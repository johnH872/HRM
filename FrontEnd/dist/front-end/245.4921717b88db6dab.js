"use strict";(self.webpackChunkFrontEnd=self.webpackChunkFrontEnd||[]).push([[245],{7245:(as,Ke,g)=>{g.r(Ke),g.d(Ke,{AdminModule:()=>ns});var T=g(8692),pe=g(7141);const Ct=[{title:"Dashboard",icon:"pie-chart-outline",link:"/admin/dashboard",home:!0},{title:"FEATURES",icon:"bookmark-outline",children:[{title:"Employees",icon:"person-outline",link:"/admin/employee"},{title:"Leave",icon:"briefcase-outline",children:[{title:"Leave Request",icon:"umbrella-outline",link:"/admin/leave-request"},{title:"Leave Entitlement",icon:"link-2-outline",link:"/admin/leave-entitlement"},{title:"Leave Type",icon:"funnel-outline",link:"/admin/leave-type"}]},{title:"Attendance",icon:"sun-outline",children:[{title:"Attendances",icon:"smartphone-outline",link:"/admin/attendances"},{title:"Reports",icon:"shake-outline",link:"/admin/attendance-report"}]},{title:"Work Calendar",icon:"calendar-outline",link:"/admin/work-calendar"},{title:"Report Schedule",icon:"pantone-outline",link:"/admin/report-schedule"}]},{title:"System",icon:"settings-2-outline",children:[{title:"Roles",icon:"shield-outline",link:"/admin/roles"},{title:"Settings",icon:"options-2-outline",link:"/admin/settings"}]}],Tt=[{title:"Dashboard",icon:"pie-chart-outline",link:"/admin/dashboard",home:!0},{title:"FEATURES",icon:"bookmark-outline",children:[{title:"Employees",icon:"person-outline",link:"/admin/employee"},{title:"Leave",icon:"briefcase-outline",children:[{title:"Leave Request",icon:"umbrella-outline",link:"/admin/leave-request"},{title:"Leave Entitlement",icon:"link-2-outline",link:"/admin/leave-entitlement"}]},{title:"Work Calendar",icon:"calendar-outline",link:"/admin/work-calendar"},{title:"Report Schedule",icon:"pantone-outline",link:"/admin/report-schedule"}]}];var e=g(4537),O=g(6815),xt=g(6405),v=g(6355);function wt(o,r){if(1&o&&e._UZ(0,"nb-menu",1),2&o){const t=e.oxw();e.Q6J("items",t.menuAdmin)}}function St(o,r){if(1&o&&e._UZ(0,"nb-menu",1),2&o){const t=e.oxw();e.Q6J("items",t.menuEmployee)}}let Zt=(()=>{class o{constructor(t){this.authService=t,this.menuAdmin=Ct,this.menuEmployee=Tt,this.roles=[],this.authService.onTokenChange().subscribe(a=>{a.isValid()&&(this.user=a.getPayload()?.user,this.roles=this.user?.roles?.map(n=>n?.roleName))})}static#e=this.\u0275fac=function(a){return new(a||o)(e.Y36(O._o))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-admin"]],decls:4,vars:2,consts:[["tag","menu",3,"items",4,"ngIf"],["tag","menu",3,"items"]],template:function(a,n){1&a&&(e.TgZ(0,"ngx-one-column-layout"),e.YNc(1,wt,1,1,"nb-menu",0),e.YNc(2,St,1,1,"nb-menu",0),e._UZ(3,"router-outlet"),e.qZA()),2&a&&(e.xp6(1),e.Q6J("ngIf",n.roles.includes("admin")),e.xp6(1),e.Q6J("ngIf",(n.roles.includes("employee")||n.roles.includes("manager"))&&!n.roles.includes("admin")))},dependencies:[T.O5,xt.s,v.mBz,pe.lC],styles:['.dialog-header .p-button.p-button-sm{padding:.5rem 1rem}  .fs-16{font-size:14px}  .fs-15{font-size:14px}  .fs-14{font-size:14px}  .fs-13{font-size:13px}  .fs-12{font-size:12px}  .fs-10{font-size:10px}  .fw-500{font-weight:500}  .text-red{color:red}  .mat-mdc-form-field-error{font-size:12px}  .custom-nb-user-small{cursor:pointer}  .custom-nb-user-small .user-name{font-size:14px!important;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol!important;font-weight:500}  .custom-nb-user-small .user-picture{width:30px!important;height:30px!important}  .custom-radio-group{display:flex;flex-direction:row;gap:1rem}  .custom-radio-group .p-radiobutton .p-radiobutton-box{height:18px;width:18px}  .custom-radio-group .p-radiobutton .p-radiobutton-box .p-radiobutton-icon{width:11px;height:11px}  .custom-radio-group .field-checkbox{font-size:14px}  .dropdown-items-with-img{display:flex;font-size:14px;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol!important}  .disable-input{pointer-events:none}  .p-multiselect-label,   .p-multiselect-panel .p-multiselect-header,   .p-multiselect-panel .p-multiselect-items .p-multiselect-item{padding:.65625rem!important;font-size:14px;height:41px;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol!important}  .p-checkbox .p-checkbox-box{width:20px;height:20px}  .p-inputtext-sm .p-inputtext{font-size:14px!important}  nb-user .user-picture{border:solid 1px #1654bb}  .notification-container{width:450px}  .notification-container .p-divider-horizontal{margin:unset}  .notification-container .notification-body{max-height:40vh;overflow:auto;padding-top:5px}  .notification-container .notification-card{padding:0 10px;cursor:pointer}  .notification-container .notification-header{padding:10px;background:#f8f9fa;color:#343a40;box-shadow:0 1px 10px #ccc}  .notification-container .noti-date{color:#6c757d}  .notification-container .noti-done-icon{width:10px;height:10px;transform:translate(-22%,20%)}  .notification-container .noti-mark-read{color:#1a65e6;cursor:pointer}  .notification-container .unread-noti{background:#f7f9fe}  .p-overlaypanel{z-index:9999!important;padding:unset}  .p-overlaypanel .p-overlaypanel-content{padding:unset}  .p-orderlist .p-orderlist-controls{padding:5px}  .p-orderlist .p-orderlist-controls .p-button{padding:unset;width:30px;height:30px}  .p-orderlist .p-orderlist-header{padding:10px;font-size:14px}  .p-orderlist .p-orderlist-list{padding:unset}  .p-orderlist .p-orderlist-list .p-orderlist-item{padding:.5rem}']})}return o})();var p=g(8239),R=g(8023),k=g(3528),fe=g(6559),je=g(6611),m=g(92);class Xe{constructor(){this.size=0,this.totalElements=0,this.totalPages=0,this.pageNumber=0}}class et extends Xe{constructor(){super(...arguments),this.isToDay=!1}}var kt=/d{1,4}|D{3,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|W{1,2}|[LlopSZN]|"[^"]*"|'[^']*'/g,Dt=/\b(?:[A-Z]{1,3}[A-Z][TC])(?:[-+]\d{4})?|((?:Australian )?(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time)\b/g,Mt=/[^-+\dA-Z]/g;function re(o,r,t,a){if(1===arguments.length&&"string"==typeof o&&!/\d/.test(o)&&(r=o,o=void 0),(o=o||0===o?o:new Date)instanceof Date||(o=new Date(o)),isNaN(o))throw TypeError("Invalid date");var n=(r=String(tt[r]||r||tt.default)).slice(0,4);("UTC:"===n||"GMT:"===n)&&(r=r.slice(4),t=!0,"GMT:"===n&&(a=!0));var l=function(){return t?"getUTC":"get"},i=function(){return o[l()+"Date"]()},s=function(){return o[l()+"Day"]()},c=function(){return o[l()+"Month"]()},d=function(){return o[l()+"FullYear"]()},h=function(){return o[l()+"Hours"]()},y=function(){return o[l()+"Minutes"]()},w=function(){return o[l()+"Seconds"]()},S=function(){return o[l()+"Milliseconds"]()},M=function(){return t?0:o.getTimezoneOffset()},D=function(){return At(o)},A={d:function(){return i()},dd:function(){return Y(i())},ddd:function(){return P.dayNames[s()]},DDD:function(){return nt({y:d(),m:c(),d:i(),_:l(),dayName:P.dayNames[s()],short:!0})},dddd:function(){return P.dayNames[s()+7]},DDDD:function(){return nt({y:d(),m:c(),d:i(),_:l(),dayName:P.dayNames[s()+7]})},m:function(){return c()+1},mm:function(){return Y(c()+1)},mmm:function(){return P.monthNames[c()]},mmmm:function(){return P.monthNames[c()+12]},yy:function(){return String(d()).slice(2)},yyyy:function(){return Y(d(),4)},h:function(){return h()%12||12},hh:function(){return Y(h()%12||12)},H:function(){return h()},HH:function(){return Y(h())},M:function(){return y()},MM:function(){return Y(y())},s:function(){return w()},ss:function(){return Y(w())},l:function(){return Y(S(),3)},L:function(){return Y(Math.floor(S()/10))},t:function(){return h()<12?P.timeNames[0]:P.timeNames[1]},tt:function(){return h()<12?P.timeNames[2]:P.timeNames[3]},T:function(){return h()<12?P.timeNames[4]:P.timeNames[5]},TT:function(){return h()<12?P.timeNames[6]:P.timeNames[7]},Z:function(){return a?"GMT":t?"UTC":Et(o)},o:function(){return(M()>0?"-":"+")+Y(100*Math.floor(Math.abs(M())/60)+Math.abs(M())%60,4)},p:function(){return(M()>0?"-":"+")+Y(Math.floor(Math.abs(M())/60),2)+":"+Y(Math.floor(Math.abs(M())%60),2)},S:function(){return["th","st","nd","rd"][i()%10>3?0:(i()%100-i()%10!=10)*i()%10]},W:function(){return D()},WW:function(){return Y(D())},N:function(){return Lt(o)}};return r.replace(kt,function(_){return _ in A?A[_]():_.slice(1,_.length-1)})}var tt={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",paddedShortDate:"mm/dd/yyyy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:sso",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",expiresHeaderFormat:"ddd, dd mmm yyyy HH:MM:ss Z"},P={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"],timeNames:["a","p","am","pm","A","P","AM","PM"]},Y=function(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return String(r).padStart(t,"0")},nt=function(r){var t=r.y,a=r.m,n=r.d,l=r._,i=r.dayName,s=r.short,c=void 0!==s&&s,d=new Date,h=new Date;h.setDate(h[l+"Date"]()-1);var y=new Date;return y.setDate(y[l+"Date"]()+1),d[l+"FullYear"]()===t&&d[l+"Month"]()===a&&d[l+"Date"]()===n?c?"Tdy":"Today":h[l+"FullYear"]()===t&&h[l+"Month"]()===a&&h[l+"Date"]()===n?c?"Ysd":"Yesterday":y[l+"FullYear"]()===t&&y[l+"Month"]()===a&&y[l+"Date"]()===n?c?"Tmw":"Tomorrow":i},At=function(r){var t=new Date(r.getFullYear(),r.getMonth(),r.getDate());t.setDate(t.getDate()-(t.getDay()+6)%7+3);var a=new Date(t.getFullYear(),0,4);a.setDate(a.getDate()-(a.getDay()+6)%7+3);var n=t.getTimezoneOffset()-a.getTimezoneOffset();return t.setHours(t.getHours()-n),1+Math.floor((t-a)/6048e5)},Lt=function(r){var t=r.getDay();return 0===t&&(t=7),t},Et=function(r){return(String(r).match(Dt)||[""]).pop().replace(Mt,"").replace(/GMT\+0000/g,"UTC")},I=(()=>{return(o=I||(I={}))[o.Annually=1]="Annually",o[o.Seniority=2]="Seniority",o[o.Transfer=3]="Transfer",o[o.UnPaid=4]="UnPaid",I;var o})();class Rt{constructor(){this.waitingLeaveRequests=[],this.waitingAttendanceReports=[],this.myLeaveRequest=[],this.myAttendanceReports=[],this.myWorkingDetail=[],this.requiredWorkingHours=0,this.workedHours=0,this.leaveHours=0}}var te=g(2755),at=g(1999),Z=g(6685),he=g(5598),ot=g(1959),f=g(4536),J=g(9638),x=g(6842),Nt=g(5998);let qt=(()=>{class o{constructor(t){this.sanitizer=t}transform(t){return this.sanitizer.bypassSecurityTrustHtml(t)}static#e=this.\u0275fac=function(a){return new(a||o)(e.Y36(Nt.H7,16))};static#t=this.\u0275pipe=e.Yjl({name:"safeHtml",type:o,pure:!0})}return o})();function Ut(o,r){if(1&o&&(e.TgZ(0,"button",6),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.Q6J("mat-dialog-close",t.alternateReturnData)("disabled",t.isDisabled),e.xp6(1),e.Oqu(t.alternateTitle)}}function It(o,r){if(1&o&&(e.TgZ(0,"button",6),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.Q6J("mat-dialog-close",!0)("disabled",t.isDisabled),e.xp6(1),e.Oqu(t.yesTitle)}}let $=(()=>{class o{constructor(t,a){this.dialogRef=t,this.data=a,this.message="",this.falseTitle="No",this.yesTitle="Yes",this.zIndex=1e3,this.isDisabled=!1,this.alternateTitle=null,this.alternateReturnData=null}ngOnInit(){(this.data?.message||this.data?.externalTemplate)&&(this.message=this.data?.message||this.message,this.falseTitle=this.data?.falseTitle||this.falseTitle,this.yesTitle=this.data?.yesTitle||this.yesTitle,this.zIndex=this.data?.zIndex||this.zIndex,this.isDisabled=this.data?.isDisabled||this.isDisabled,this.alternateTitle=this.data?.alternateTitle||this.alternateTitle,this.alternateReturnData=this.data?.alternateReturnData||this.alternateReturnData,this.externalTemplate=this.data?.externalTemplate||this.externalTemplate),this.dialogRef.afterOpened().subscribe(t=>{if(this.dialogRef){var a=window.document.querySelector(".custom-z-index-confirm");a&&(a.parentNode.style.zIndex=this.zIndex)}})}static#e=this.\u0275fac=function(a){return new(a||o)(e.Y36(f.so),e.Y36(f.WI))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-confirm-modal"]],decls:9,vars:9,consts:[["fxLayout","column"],[3,"innerHtml"],[3,"ngTemplateOutlet"],["align","center"],["mat-button","","mat-dialog-close",""],["mat-button","","cdkFocusInitial","",3,"mat-dialog-close","disabled",4,"ngIf"],["mat-button","","cdkFocusInitial","",3,"mat-dialog-close","disabled"]],template:function(a,n){1&a&&(e.TgZ(0,"mat-dialog-content",0),e._UZ(1,"p",1),e.ALo(2,"safeHtml"),e.GkF(3,2),e.qZA(),e.TgZ(4,"mat-dialog-actions",3)(5,"button",4),e._uU(6),e.qZA(),e.YNc(7,Ut,2,3,"button",5),e.YNc(8,It,2,3,"button",5),e.qZA()),2&a&&(e.xp6(1),e.Udp("margin-bottom",n.externalTemplate?0:""),e.Q6J("innerHtml",e.lcZ(2,7,n.message),e.oJD),e.xp6(2),e.Q6J("ngTemplateOutlet",n.externalTemplate?n.externalTemplate:""),e.xp6(3),e.Oqu(n.falseTitle),e.xp6(1),e.Q6J("ngIf",null!=n.alternateTitle),e.xp6(1),e.Q6J("ngIf","DISABLED"!=n.yesTitle))},dependencies:[T.O5,T.tP,J.lW,f.ZT,f.xY,f.H8,x.xw,qt],styles:["nb-card[_ngcontent-%COMP%]{width:26rem}"]})}return o})();var G=g(1940),u=g(1292),ne=g(5822),De=g(1871),Me=g(7518),Ae=g(5732);let Te=(()=>{class o{constructor(t){this.http=t,this.baseUrl=Me.NZ.apiLeaveEntitlementManagement}getAllLeaveEntitlement(){return this.http.get(`${this.baseUrl}/GetAllLeaveEntitlement`)}saveLeaveEntitlement(t){return this.http.post(`${this.baseUrl}/SaveLeaveEntitlement`,t)}deleteLeaveEntitlement(t){return this.http.delete(`${this.baseUrl}/DeleteLeaveEntitlement/${t}`)}deleteLeaveEntitlements(t){return this.http.post(`${this.baseUrl}/DeleteLeaveEntitlements`,t)}getLeaveEntitlementByEmployeeId(t){return this.http.get(`${this.baseUrl}/GetLeaveEntitlementByEmployeeId?employeeId=${t}`)}getLeaveEntitlementByIdToTransfer(t){return this.http.get(`${this.baseUrl}/GetLeaveEntitlementByIdToTransfer?employeeId=${t}`)}getYearOfLeaveEntitlement(){return this.http.get(`${this.baseUrl}/GetYearOfLeaveEntitlement`)}getTotalLeaveEntitlementById(t){return this.http.get(`${this.baseUrl}/GetTotalLeaveEntitlementById?employeeId=${t}`)}generateLeaveEntitlement(t){return this.http.post(`${this.baseUrl}/GenerateLeaveEntitlement`,t)}static#e=this.\u0275fac=function(a){return new(a||o)(e.LFG(Ae.eN))};static#t=this.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var Le=g(197),Ee=g(3827),L=g(1621),F=g(8659),Q=g(3331),j=g(6438),Je=g(8412),U=g(4189),se=g(1068),xe=g(839);function Ft(o,r){if(1&o&&(e.TgZ(0,"div",34),e._UZ(1,"nb-user",35),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("name",((null==t.employeeChosen?null:t.employeeChosen.firstName)||"")+" "+((null==t.employeeChosen?null:t.employeeChosen.middleName)||"")+" "+((null==t.employeeChosen?null:t.employeeChosen.lastName)||""))("title",t.employeeChosen.email)("showTitle",!0)("picture",null==t.employeeChosen?null:t.employeeChosen.avatarUrl)}}function Ot(o,r){if(1&o&&e.YNc(0,Ft,2,4,"div",33),2&o){const t=e.oxw();e.Q6J("ngIf",t.employeeChosen)}}function Jt(o,r){if(1&o&&(e.TgZ(0,"div",34),e._UZ(1,"nb-user",35),e.qZA()),2&o){const t=r.$implicit;e.xp6(1),e.Q6J("name",((null==t?null:t.firstName)||"")+" "+((null==t?null:t.middleName)||"")+" "+((null==t?null:t.lastName)||""))("title",t.email)("showTitle",!0)("picture",null==t?null:t.avatarUrl)}}function Pt(o,r){if(1&o&&(e.TgZ(0,"mat-error",36),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(null==t.frmLeaveRequest||null==t.frmLeaveRequest.controls?null:t.frmLeaveRequest.controls.reason.errorMessage)}}function Yt(o,r){if(1&o&&(e.TgZ(0,"mat-error",37),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(null==t.frmLeaveRequest||null==t.frmLeaveRequest.controls?null:t.frmLeaveRequest.controls.leaveDateFrom.errorMessage)}}function Qt(o,r){if(1&o&&(e.TgZ(0,"mat-error",38),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(null==t.frmLeaveRequest||null==t.frmLeaveRequest.controls?null:t.frmLeaveRequest.controls.leaveDateTo.errorMessage)}}function Wt(o,r){if(1&o&&(e.TgZ(0,"mat-error",42),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Oqu(null==t.frmLeaveRequest||null==t.frmLeaveRequest.controls?null:t.frmLeaveRequest.controls.numberOfHour.errorMessage)}}function Ht(o,r){if(1&o&&(e.TgZ(0,"div",13)(1,"label",39),e._uU(2,"Number Of Hours"),e.qZA(),e._UZ(3,"input",40),e.YNc(4,Wt,2,1,"mat-error",41),e.qZA()),2&o){const t=e.oxw();e.xp6(4),e.Q6J("ngIf",(null==t.frmLeaveRequest||null==t.frmLeaveRequest.controls||null==t.frmLeaveRequest.controls.numberOfHour?null:t.frmLeaveRequest.controls.numberOfHour.errors)&&((null==t.frmLeaveRequest||null==t.frmLeaveRequest.controls||null==t.frmLeaveRequest.controls.numberOfHour?null:t.frmLeaveRequest.controls.numberOfHour.dirty)||(null==t.frmLeaveRequest||null==t.frmLeaveRequest.controls||null==t.frmLeaveRequest.controls.numberOfHour?null:t.frmLeaveRequest.controls.numberOfHour.touched)))}}function $t(o,r){if(1&o&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.AsE(" ",null==t.leaveEntitlementChoosen||null==t.leaveEntitlementChoosen.LeaveType?null:t.leaveEntitlementChoosen.LeaveType.leaveTypeName," (",(null==t.leaveEntitlementChoosen?null:t.leaveEntitlementChoosen.usableLeave)-(null==t.leaveEntitlementChoosen?null:t.leaveEntitlementChoosen.usedLeave),") ")}}function Gt(o,r){if(1&o&&e.YNc(0,$t,2,2,"div",43),2&o){const t=e.oxw();e.Q6J("ngIf",t.leaveEntitlementChoosen)}}function Bt(o,r){1&o&&(e.TgZ(0,"div")(1,"span",45),e._uU(2," Paid Leave "),e.qZA()()),2&o&&(e.xp6(1),e.Udp("background-color","#00a339"))}function Vt(o,r){if(1&o&&(e.TgZ(0,"div",44)(1,"div"),e._uU(2),e.qZA(),e.YNc(3,Bt,3,2,"div",43),e.qZA()),2&o){const t=r.$implicit;e.xp6(2),e.AsE(" ",null==t||null==t.LeaveType?null:t.LeaveType.leaveTypeName," (",(null==t?null:t.usableLeave)-(null==t?null:t.usedLeave),") "),e.xp6(1),e.Q6J("ngIf",null==t||null==t.LeaveType?null:t.LeaveType.isPaidSalary)}}function zt(o,r){if(1&o&&(e.TgZ(0,"mat-error",46),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(null==t.frmLeaveRequest||null==t.frmLeaveRequest.controls?null:t.frmLeaveRequest.controls.leaveEntitlementId.errorMessage)}}let Pe=(()=>{class o{constructor(t,a,n,l,i,s,c,d,h,y,w,S,M,D){this.dialModalRef=t,this.data=a,this.employeeService=n,this.frmBuilder=l,this.authService=i,this.toast=s,this.cdref=c,this.dialog=d,this.dataStateService=h,this.leaveRequestService=y,this.leaveEntitlementService=w,this.datePipe=S,this.permissionService=M,this.settingService=D,this.destroy$=new R.x,this.isAdmin=!1,this.isMyLeaveRequest=!1,this.isLoading=!1,this.listSessions=["Entire day","Morning","Afternoon"],this.listStatus=[],this.sessionDefault="Entire day",this.isChange=!1,this.employeeListLeaveEntitlement=[],this.hasEditPermission=!1,this.minDate=new Date,this.defaultStartTime=new Date,this.defaultEndTime=new Date,this.lstWorkingTimeSettings=[],this.action=a?.action??Z.t.Add,this.leaveRequestModel=a?.model??new ot.n,this.listEmployees=a?.listEmployees??[],"string"!=typeof this.leaveRequestModel.userId&&(this.leaveRequestModel.userId=this.leaveRequestModel?.User?.userId),this.authService.onTokenChange().subscribe(q=>{q.isValid()&&(this.currentUser=q.getPayload()?.user,"admin"===this.currentUser?.roles[0]?.roleName&&(this.isAdmin=!0),this.isAdmin||(this.listEmployees=this.listEmployees.filter(A=>A.userId===this.currentUser?.userId||A.ownerId===this.currentUser?.userId)))}),this.dataStateService.getDataStateByType("LEAVE_REQUEST").pipe((0,k.R)(this.destroy$)).subscribe(q=>{q.result&&(this.listStatus=q.result)}),this.settingService.getSettingByGroup("WORKING_TIME").pipe((0,k.R)(this.destroy$)).subscribe(q=>{q.result&&(this.lstWorkingTimeSettings=q.result)})}ngAfterContentChecked(){this.cdref.detectChanges()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}ngOnInit(){var t=this;return(0,p.Z)(function*(){if(t.frmLeaveRequest=t.frmBuilder.formGroup(ot.n,t.leaveRequestModel),t.dialModalRef.updatePosition({right:"0"}),t.listEmployees?.length<=0){var a=yield t.employeeService.getAllEmployee().pipe((0,k.R)(t.destroy$)).toPromise();a.result&&(t.listEmployees=a.result,t.listEmployees.map(n=>{let l=`${n.firstName} ${n.middleName} ${n.lastName}`;n.displayName=l.trim()?l:"Unknown"}),t.isAdmin||(t.listEmployees=t.listEmployees.filter(n=>n.userId===t.currentUser?.userId||n.ownerId===t.currentUser?.userId)))}t.frmLeaveRequest.get("status").disable(),t.frmLeaveRequest.get("numberOfHour").disable(),t.action===Z.t.Add&&(t.defaultStartTime.setHours(8,30,0),t.defaultEndTime.setHours(17,30,0),t.statusDefault=te.p.WAITING,t.employeeService.getEmployeeById(t.currentUser?.userId).pipe((0,k.R)(t.destroy$)).subscribe(n=>{n.result&&t.getAssignee(n.result)})),t.action===Z.t.Edit&&(t.statusDefault=t.leaveRequestModel?.status,t.defaultStartTime=new Date(t.leaveRequestModel?.leaveDateFrom),t.defaultEndTime=new Date(t.leaveRequestModel?.leaveDateTo),t.leaveRequestModel.status===te.p.APPROVED&&t.frmLeaveRequest.get("leaveEntitlementId").disable(),t.leaveRequestModel?.User?t.getAssignee(t.leaveRequestModel?.User):t.employeeService.getEmployeeById(t.leaveRequestModel?.userId).pipe((0,k.R)(t.destroy$)).subscribe(n=>{n.result&&(t.employeeChosen=n.result)}))})()}ngAfterViewInit(){this.frmLeaveRequest&&this.frmLeaveRequest.valueChanges.pipe((0,he.q)(1)).subscribe(t=>this.isChange=!0)}closeDialog(){if(this.isChange)return this.isChange=!1,void this.dialog.open($,{backdropClass:"custom-backdrop",hasBackdrop:!0,data:{message:"Do you wish to close this popup? You will lose your unsaved data."}}).afterClosed().subscribe(a=>{a?this.dialModalRef.close():this.isChange=!0});this.dialModalRef.close()}saveData(){if(this.frmLeaveRequest.valid){this.isLoading=!this.isLoading;const t=Object.assign({},this.frmLeaveRequest.value);t.userId=this.employeeChosen?.userId,t.leaveRequestId=t.leaveRequestId?t.leaveRequestId:0,this.leaveRequestService.saveLeaveRequest(t,this.currentUser?.userId).pipe((0,k.R)(this.destroy$)).subscribe(a=>{a.result&&(this.toast.success("Save leave request successfully","Success",{position:v.d6C.BOTTOM_END,duration:3e3}),this.dialModalRef.close(a.result))}).add(()=>{this.isLoading=!this.isLoading})}}clearAssignee(){this.employeeChosen=null}onChangeEmployee(t){if(t){this.frmLeaveRequest.get("userId").setValue(t.value);var a=this.listEmployees.findIndex(n=>n.userId===t.value);-1!=a&&(this.employeeChosen=this.listEmployees[a]),this.getAssignee(this.employeeChosen,!0)}}getAssignee(t,a=!1){t&&(t!==this.employeeChosen||a)&&(this.employeeChosen=t,this.leaveEntitlementService.getLeaveEntitlementByEmployeeId(this.employeeChosen?.userId).pipe((0,k.R)(this.destroy$)).subscribe(n=>{n.result&&(this.employeeListLeaveEntitlement=n.result,this.employeeListLeaveEntitlement=this.employeeListLeaveEntitlement.sort((l,i)=>Number(i?.LeaveType?.isPaidSalary)-Number(l?.LeaveType?.isPaidSalary)),this.employeeListLeaveEntitlement.map(l=>{l.disabled=l.usableLeave-l.usedLeave<=0}))}).add(()=>{this.action===Z.t.Add&&(this.leaveEntitlementChoosen=this.employeeListLeaveEntitlement?.find(n=>n.usableLeave-n.usedLeave>0)),this.action===Z.t.Edit&&(this.leaveEntitlementChoosen=this.employeeListLeaveEntitlement.find(n=>n.leaveEntitlementId===this.leaveRequestModel?.leaveEntitlementId))}))}selectionLeaveEntitlement(t){t&&this.employeeListLeaveEntitlement&&(this.leaveEntitlementChoosen=this.employeeListLeaveEntitlement.find(a=>a.leaveEntitlementId===t.value))}selectionSession(t){if(t){this.defaultStartTime=new Date,this.defaultEndTime=new Date;var a=this.lstWorkingTimeSettings?.find(s=>"MORNING_START"===s.key)?.value?.split(":"),n=this.lstWorkingTimeSettings?.find(s=>"MORNING_END"===s.key)?.value?.split(":"),l=this.lstWorkingTimeSettings?.find(s=>"AFTERNOON_START"===s.key)?.value?.split(":"),i=this.lstWorkingTimeSettings?.find(s=>"AFTERNOON_END"===s.key)?.value?.split(":");switch(t.value){case"Entire day":this.defaultStartTime.setHours(Number(a[0])??8,Number(a[1])??30,0),this.defaultEndTime.setHours(Number(i[0])??17,Number(i[1])??30,0);break;case"Morning":this.defaultStartTime.setHours(Number(a[0])??8,Number(a[1])??30,0),this.defaultEndTime.setHours(Number(n[0])??12,Number(n[1])??0,0);break;case"Afternoon":this.defaultStartTime.setHours(Number(l[0])??13,Number(l[1])??0,0),this.defaultEndTime.setHours(Number(i[0])??17,Number(i[1])??30,0)}}}handleDisplayStatus(t,a=!1){if(this.listStatus?.length<=0)return a?"#0000":"";if(a){var n=this.listStatus.find(i=>i.dataStateId===t);return n?n.colorCode:"#0000"}var l=this.listStatus.find(i=>i.dataStateId===t);return l?l.dataStateName:""}saveStatusInline(t,a){t&&a&&(a.status=t,this.leaveRequestService.saveLeaveRequest(a).pipe((0,k.R)(this.destroy$)).subscribe(n=>{n.result&&(this.toast.success("Change status successfully","Success",{position:v.d6C.BOTTOM_END,duration:3e3}),this.dialModalRef.close(n.result))}))}autoCalculateWorkingHour(t,a){let n=0;if(t=new Date(t),a=new Date(a),t&&a){const l=Math.abs(t.getTime()-a.getTime())/36e5;if(this.datePipe.transform(t,"longDate")==this.datePipe.transform(a,"longDate"))l>=5.5?(n=l-1.5,n>8&&(n=8)):n=3;else{const i=l/24|0;if(i<1)n=8;else{n=8*i;let s=l-24*i;s>9&&(s-=9,s>=5.5?(s-=1.5,s>8&&(s=8)):s=3,n+=s)}}}return n}static#e=this.\u0275fac=function(a){return new(a||o)(e.Y36(f.so),e.Y36(f.WI),e.Y36(G.n),e.Y36(u.GW),e.Y36(O._o),e.Y36(v.quB),e.Y36(e.sBO),e.Y36(f.uw),e.Y36(ne.Q),e.Y36(De.k),e.Y36(Te),e.Y36(T.uU),e.Y36(Le.QH),e.Y36(Ee.L))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-add-edit-leave-request"]],decls:52,vars:39,consts:[["fxLayout","row","fxLayoutAlign","start center","mat-dialog-title","",1,"dialog-header",2,"margin","unset","padding","1px 10px 1px 28px",3,"nbSpinner"],["label","Save","icon","pi pi-save","styleClass","p-button-sm",3,"disabled","loading","click"],["fxLayout","row","fxLayoutAlign","end center",1,"ml-auto"],["mat-icon-button","","aria-label","Close the dialog",1,"ml-auto",3,"click"],[1,"mat-typography",2,"height","100%","overflow","auto"],[1,"container",3,"formGroup"],[1,"p-fluid","p-grid","p-formgrid"],[1,"p-fluid","p-grid","p-formgrid","p-md-1"],[1,"p-field","p-col-12"],["for","employee",1,"fs-14","fw-500"],["formControlName","userId","optionValue","userId","filterBy","firstName,middleName,lastName,email","placeholder","Select an Employee",1,"p-inputtext-sm",3,"options","filter","showClear","readonly","onChange"],["pTemplate","selectedItem"],["pTemplate","item"],[1,"p-field","p-col-12","p-md-1"],["for","reason",1,"fs-14","fw-500"],["formControlName","reason","id","reason","type","reason","aria-describedby","reason-help","pInputText","",1,"p-inputtext-sm"],["id","reason-help",4,"ngIf"],["for","session",1,"fs-14","fw-500"],["formControlName","session","id","session","placeholder","Session",1,"p-inputtext-sm",3,"options","ngModel","ngModelChange","onChange"],["for","leaveFrom",1,"fs-14","fw-500"],["formControlName","leaveDateFrom","inputId","leaveFrom","aria-describedby","leaveFrom-help",1,"p-inputtext-sm",3,"ngModel","showIcon","showClear","minDate","defaultDate","readonlyInput","showTime","hourFormat","stepHour","stepMinute","ngModelChange"],["id","leaveFrom-help",4,"ngIf"],["for","leaveTo",1,"fs-14","fw-500"],["formControlName","leaveDateTo","inputId","leaveTo","aria-describedby","leaveTo-help",1,"p-inputtext-sm",3,"ngModel","showIcon","showClear","minDate","defaultDate","readonlyInput","showTime","hourFormat","stepHour","stepMinute","ngModelChange"],["id","leaveTo-help",4,"ngIf"],["for","status",1,"fs-14","fw-500"],["formControlName","status","id","status","optionLabel","dataStateName","optionValue","dataStateId","placeholder","Status",1,"p-inputtext-sm",3,"options","ngModel","ngModelChange"],["class","p-field p-col-12 p-md-1",4,"ngIf"],["for","leaveEntitlement",1,"fs-14","fw-500"],["formControlName","leaveEntitlementId","id","leaveEntitlement","placeholder","Choose Leave Entitlement","aria-describedby","leaveEntitlementId-help","optionValue","leaveEntitlementId","optionDisabled","disabled",1,"p-inputtext-sm",3,"options","ngModel","ngModelChange","onChange"],["id","leaveEntitlementId-help",4,"ngIf"],["for","note",1,"fs-14","fw-500"],["formControlName","note","id","note","type","note","pInputText","",1,"p-inputtext-sm"],["class","flex align-items-center gap-2 dropdown-items-with-img",4,"ngIf"],[1,"flex","align-items-center","gap-2","dropdown-items-with-img"],["size","small",1,"custom-nb-user-small",3,"name","title","showTitle","picture"],["id","reason-help"],["id","leaveFrom-help"],["id","leaveTo-help"],["for","numberOfHour",1,"fs-14","fw-500"],["formControlName","numberOfHour","id","numberOfHour","type","numberOfHour","aria-describedby","numberOfHour-help","pInputText","",1,"p-inputtext-sm"],["id","numberOfHour-help",4,"ngIf"],["id","numberOfHour-help"],[4,"ngIf"],["fxLayout","row","fxLayoutAlign","space-between center"],[1,"badge","badge-pill","badge-primary",2,"font-size","12px"],["id","leaveEntitlementId-help"]],template:function(a,n){1&a&&(e.TgZ(0,"div",0)(1,"p-button",1),e.NdJ("click",function(){return n.saveData()}),e.qZA(),e.TgZ(2,"div",2)(3,"button",3),e.NdJ("click",function(){return n.closeDialog()}),e.TgZ(4,"mat-icon"),e._uU(5,"close"),e.qZA()()()(),e._UZ(6,"mat-divider"),e.TgZ(7,"mat-dialog-content",4)(8,"form",5)(9,"div",6)(10,"div",7)(11,"div",8)(12,"label",9),e._uU(13,"Employee"),e.qZA(),e.TgZ(14,"p-dropdown",10),e.NdJ("onChange",function(i){return n.onChangeEmployee(i)}),e.YNc(15,Ot,1,1,"ng-template",11),e.YNc(16,Jt,2,4,"ng-template",12),e.qZA()()(),e.TgZ(17,"div",13)(18,"label",14),e._uU(19,"Reason"),e.qZA(),e._UZ(20,"input",15),e.YNc(21,Pt,2,1,"mat-error",16),e.qZA(),e.TgZ(22,"div",13)(23,"label",17),e._uU(24,"Session"),e.qZA(),e.TgZ(25,"p-dropdown",18),e.NdJ("ngModelChange",function(i){return n.sessionDefault=i})("onChange",function(i){return n.selectionSession(i)}),e.qZA()(),e.TgZ(26,"div",13)(27,"label",19),e._uU(28,"Leave Date From"),e.qZA(),e.TgZ(29,"p-calendar",20),e.NdJ("ngModelChange",function(i){return n.defaultStartTime=i}),e.qZA(),e.YNc(30,Yt,2,1,"mat-error",21),e.qZA(),e.TgZ(31,"div",13)(32,"label",22),e._uU(33,"Leave Date To"),e.qZA(),e.TgZ(34,"p-calendar",23),e.NdJ("ngModelChange",function(i){return n.defaultEndTime=i}),e.qZA(),e.YNc(35,Qt,2,1,"mat-error",24),e.qZA(),e.TgZ(36,"div",13)(37,"label",25),e._uU(38,"Status"),e.qZA(),e.TgZ(39,"p-dropdown",26),e.NdJ("ngModelChange",function(i){return n.statusDefault=i}),e.qZA()(),e.YNc(40,Ht,5,1,"div",27),e.TgZ(41,"div",13)(42,"label",28),e._uU(43,"Leave Entitlement"),e.qZA(),e.TgZ(44,"p-dropdown",29),e.NdJ("ngModelChange",function(i){return n.leaveEntitlementChoosen?null==n.leaveEntitlementChoosen?null:n.leaveEntitlementChoosen.leaveEntitlementId:n.leaveEntitlementDefault=i})("onChange",function(i){return n.selectionLeaveEntitlement(i)}),e.YNc(45,Gt,1,1,"ng-template",11),e.YNc(46,Vt,4,3,"ng-template",12),e.qZA(),e.YNc(47,zt,2,1,"mat-error",30),e.qZA(),e.TgZ(48,"div",13)(49,"label",31),e._uU(50,"Note"),e.qZA(),e._UZ(51,"input",32),e.qZA()()()()),2&a&&(e.Q6J("nbSpinner",n.isLoading),e.xp6(1),e.Q6J("disabled",!n.frmLeaveRequest.valid)("loading",n.isLoading),e.xp6(7),e.Q6J("formGroup",n.frmLeaveRequest),e.xp6(6),e.Q6J("options",n.listEmployees)("filter",!0)("showClear",!0)("readonly",0!==n.action),e.xp6(7),e.Q6J("ngIf",(null==n.frmLeaveRequest||null==n.frmLeaveRequest.controls||null==n.frmLeaveRequest.controls.reason?null:n.frmLeaveRequest.controls.reason.errors)&&((null==n.frmLeaveRequest||null==n.frmLeaveRequest.controls||null==n.frmLeaveRequest.controls.reason?null:n.frmLeaveRequest.controls.reason.dirty)||(null==n.frmLeaveRequest||null==n.frmLeaveRequest.controls||null==n.frmLeaveRequest.controls.reason?null:n.frmLeaveRequest.controls.reason.touched))),e.xp6(4),e.Q6J("options",n.listSessions)("ngModel",n.sessionDefault),e.xp6(4),e.Q6J("ngModel",n.defaultStartTime)("showIcon",!0)("showClear",!0)("minDate",n.minDate)("defaultDate",n.defaultStartTime)("readonlyInput",!0)("showTime",!0)("hourFormat",24)("stepHour",1)("stepMinute",15),e.xp6(1),e.Q6J("ngIf",(null==n.frmLeaveRequest||null==n.frmLeaveRequest.controls||null==n.frmLeaveRequest.controls.leaveDateFrom?null:n.frmLeaveRequest.controls.leaveDateFrom.errors)&&((null==n.frmLeaveRequest||null==n.frmLeaveRequest.controls||null==n.frmLeaveRequest.controls.leaveDateFrom?null:n.frmLeaveRequest.controls.leaveDateFrom.dirty)||(null==n.frmLeaveRequest||null==n.frmLeaveRequest.controls||null==n.frmLeaveRequest.controls.leaveDateFrom?null:n.frmLeaveRequest.controls.leaveDateFrom.touched))),e.xp6(4),e.Q6J("ngModel",n.defaultEndTime)("showIcon",!0)("showClear",!0)("minDate",n.minDate)("defaultDate",n.defaultEndTime)("readonlyInput",!0)("showTime",!0)("hourFormat",24)("stepHour",1)("stepMinute",15),e.xp6(1),e.Q6J("ngIf",(null==n.frmLeaveRequest||null==n.frmLeaveRequest.controls||null==n.frmLeaveRequest.controls.leaveDateTo?null:n.frmLeaveRequest.controls.leaveDateTo.errors)&&((null==n.frmLeaveRequest||null==n.frmLeaveRequest.controls||null==n.frmLeaveRequest.controls.leaveDateTo?null:n.frmLeaveRequest.controls.leaveDateTo.dirty)||(null==n.frmLeaveRequest||null==n.frmLeaveRequest.controls||null==n.frmLeaveRequest.controls.leaveDateTo?null:n.frmLeaveRequest.controls.leaveDateTo.touched))),e.xp6(4),e.Q6J("options",n.listStatus)("ngModel",n.statusDefault),e.xp6(1),e.Q6J("ngIf",0!==n.action),e.xp6(4),e.Q6J("options",n.employeeListLeaveEntitlement)("ngModel",n.leaveEntitlementChoosen?null==n.leaveEntitlementChoosen?null:n.leaveEntitlementChoosen.leaveEntitlementId:n.leaveEntitlementDefault),e.xp6(3),e.Q6J("ngIf",(null==n.frmLeaveRequest||null==n.frmLeaveRequest.controls||null==n.frmLeaveRequest.controls.leaveEntitlementId?null:n.frmLeaveRequest.controls.leaveEntitlementId.errors)&&((null==n.frmLeaveRequest||null==n.frmLeaveRequest.controls||null==n.frmLeaveRequest.controls.leaveEntitlementId?null:n.frmLeaveRequest.controls.leaveEntitlementId.dirty)||(null==n.frmLeaveRequest||null==n.frmLeaveRequest.controls||null==n.frmLeaveRequest.controls.leaveEntitlementId?null:n.frmLeaveRequest.controls.leaveEntitlementId.touched))))},dependencies:[T.O5,m._Y,m.Fj,m.JJ,m.JL,m.sg,m.u,u.bc,u.VP,u.YE,L.jx,F.TO,Q.Hw,J.RK,f.uh,f.xY,j.d,v.Q7R,v.k0$,x.xw,x.Wh,Je.f,U.zx,se.o,xe.Lt]})}return o})(),Ye=(()=>{class o{constructor(t,a){this.data=t,this.dialogRef=a,this.reasonRejected=""}submitOpinion(){this.dialogRef.close(this.reasonRejected)}cancelOpinion(){this.dialogRef.close()}static#e=this.\u0275fac=function(a){return new(a||o)(e.Y36(f.WI),e.Y36(f.so))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-dialog-get-reason-rejected"]],decls:7,vars:1,consts:[["mat-dialog-title",""],["mat-dialog-content","","fxLayout","column","fxLayoutGap","10px",1,"reject-reason-container"],[1,"reject-reason-container-textarea",3,"ngModel","ngModelChange"],["fxLayout","row","fxLayoutAlign","end end","fxLayoutGap","10px"],["styleClass","p-button-sm p-button-secondary","label","Cancel","icon","pi pi-times","size","small",3,"click"],["styleClass","p-button-sm p-button-success","icon","pi pi-save","label","Save","size","small",3,"click"]],template:function(a,n){1&a&&(e.TgZ(0,"h1",0),e._uU(1,"Rejected reason"),e.qZA(),e.TgZ(2,"div",1)(3,"textarea",2),e.NdJ("ngModelChange",function(i){return n.reasonRejected=i}),e.qZA(),e.TgZ(4,"div",3)(5,"p-button",4),e.NdJ("click",function(){return n.cancelOpinion()}),e.qZA(),e.TgZ(6,"p-button",5),e.NdJ("click",function(){return n.submitOpinion()}),e.qZA()()()),2&a&&(e.xp6(3),e.Q6J("ngModel",n.reasonRejected))},dependencies:[m.Fj,m.JJ,m.On,u.bc,u.YE,f.uh,f.xY,x.xw,x.SQ,x.Wh,U.zx],styles:[".reject-reason-container-textarea[_ngcontent-%COMP%]{width:400px;height:150px}"]})}return o})();var we=g(6689),_e=g(2940),Kt=g(2658),jt=g(4291),lt=g(9474),Qe=g(1786);function Xt(o,r){if(1&o&&(e.O4$(),e.TgZ(0,"linearGradient"),e._UZ(1,"stop",5)(2,"stop",6),e.qZA()),2&o){const t=e.oxw(2);e.uIk("id",t.svg.outerLinearGradient.id),e.xp6(1),e.uIk("stop-color",t.svg.outerLinearGradient.colorStop1)("stop-opacity",1),e.xp6(1),e.uIk("stop-color",t.svg.outerLinearGradient.colorStop2)("stop-opacity",1)}}function en(o,r){if(1&o&&(e.O4$(),e.TgZ(0,"radialGradient"),e._UZ(1,"stop",5)(2,"stop",6),e.qZA()),2&o){const t=e.oxw(2);e.uIk("id",t.svg.radialGradient.id),e.xp6(1),e.uIk("stop-color",t.svg.radialGradient.colorStop1)("stop-opacity",1),e.xp6(1),e.uIk("stop-color",t.svg.radialGradient.colorStop2)("stop-opacity",1)}}function tn(o,r){if(1&o&&(e.O4$(),e._UZ(0,"circle")),2&o){const t=e.oxw(3);e.uIk("cx",t.svg.backgroundCircle.cx)("cy",t.svg.backgroundCircle.cy)("r",t.svg.backgroundCircle.r)("fill",t.svg.backgroundCircle.fill)("fill-opacity",t.svg.backgroundCircle.fillOpacity)("stroke",t.svg.backgroundCircle.stroke)("stroke-width",t.svg.backgroundCircle.strokeWidth)}}function nn(o,r){if(1&o&&(e.O4$(),e._UZ(0,"circle")),2&o){const t=e.oxw(3);e.zWS("fill","url(",t.window.location.href,"#",t.svg.radialGradient.id,")"),e.uIk("cx",t.svg.backgroundCircle.cx)("cy",t.svg.backgroundCircle.cy)("r",t.svg.backgroundCircle.r)("fill-opacity",t.svg.backgroundCircle.fillOpacity)("stroke",t.svg.backgroundCircle.stroke)("stroke-width",t.svg.backgroundCircle.strokeWidth)}}function an(o,r){if(1&o&&(e.O4$(),e.ynx(0),e.YNc(1,tn,1,7,"circle",2),e.YNc(2,nn,1,8,"circle",2),e.BQk()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",!t.options.backgroundGradient),e.xp6(1),e.Q6J("ngIf",t.options.backgroundGradient)}}function on(o,r){if(1&o&&(e.O4$(),e._UZ(0,"circle")),2&o){const t=e.oxw(2);e.uIk("cx",t.svg.circle.cx)("cy",t.svg.circle.cy)("r",t.svg.circle.r)("fill",t.svg.circle.fill)("stroke",t.svg.circle.stroke)("stroke-width",t.svg.circle.strokeWidth)}}function ln(o,r){if(1&o&&(e.O4$(),e._UZ(0,"path")),2&o){const t=e.oxw(3);e.uIk("d",t.svg.path.d)("stroke",t.svg.path.stroke)("stroke-width",t.svg.path.strokeWidth)("stroke-linecap",t.svg.path.strokeLinecap)("fill",t.svg.path.fill)}}function rn(o,r){if(1&o&&(e.O4$(),e._UZ(0,"path")),2&o){const t=e.oxw(3);e.zWS("stroke","url(",t.window.location.href,"#",t.svg.outerLinearGradient.id,")"),e.uIk("d",t.svg.path.d)("stroke-width",t.svg.path.strokeWidth)("stroke-linecap",t.svg.path.strokeLinecap)("fill",t.svg.path.fill)}}function sn(o,r){if(1&o&&(e.O4$(),e.ynx(0),e.YNc(1,ln,1,5,"path",2),e.YNc(2,rn,1,6,"path",2),e.BQk()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",!t.options.outerStrokeGradient),e.xp6(1),e.Q6J("ngIf",t.options.outerStrokeGradient)}}function un(o,r){if(1&o&&(e.O4$(),e.TgZ(0,"tspan"),e._uU(1),e.qZA()),2&o){const t=r.$implicit,a=e.oxw(4);e.uIk("x",a.svg.title.x)("y",a.svg.title.y)("dy",t.dy)("font-size",a.svg.title.fontSize)("font-weight",a.svg.title.fontWeight)("fill",a.svg.title.color),e.xp6(1),e.Oqu(t.span)}}function cn(o,r){if(1&o&&(e.O4$(),e.ynx(0),e.YNc(1,un,2,7,"tspan",8),e.BQk()),2&o){const t=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t.svg.title.tspans)}}function dn(o,r){if(1&o&&(e.O4$(),e.TgZ(0,"tspan"),e._uU(1),e.qZA()),2&o){const t=e.oxw(3);e.uIk("font-size",t.svg.units.fontSize)("font-weight",t.svg.units.fontWeight)("fill",t.svg.units.color),e.xp6(1),e.Oqu(t.svg.units.text)}}function pn(o,r){if(1&o&&(e.O4$(),e.TgZ(0,"tspan"),e._uU(1),e.qZA()),2&o){const t=r.$implicit,a=e.oxw(4);e.uIk("x",a.svg.subtitle.x)("y",a.svg.subtitle.y)("dy",t.dy)("font-size",a.svg.subtitle.fontSize)("font-weight",a.svg.subtitle.fontWeight)("fill",a.svg.subtitle.color),e.xp6(1),e.Oqu(t.span)}}function mn(o,r){if(1&o&&(e.O4$(),e.ynx(0),e.YNc(1,pn,2,7,"tspan",8),e.BQk()),2&o){const t=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t.svg.subtitle.tspans)}}function gn(o,r){if(1&o&&(e.O4$(),e.TgZ(0,"text",7),e.YNc(1,cn,2,1,"ng-container",2),e.YNc(2,dn,2,4,"tspan",2),e.YNc(3,mn,2,1,"ng-container",2),e.qZA()),2&o){const t=e.oxw(2);e.uIk("x",t.svg.circle.cx)("y",t.svg.circle.cy)("text-anchor",t.svg.title.textAnchor),e.xp6(1),e.Q6J("ngIf",t.options.showTitle),e.xp6(1),e.Q6J("ngIf",t.options.showUnits),e.xp6(1),e.Q6J("ngIf",t.options.showSubtitle)}}function fn(o,r){if(1&o&&(e.O4$(),e._UZ(0,"image",9)),2&o){const t=e.oxw(2);e.uIk("height",t.svg.image.height)("width",t.svg.image.width)("href",t.svg.image.src,null,"xlink")("x",t.svg.image.x)("y",t.svg.image.y)}}function hn(o,r){if(1&o){const t=e.EpF();e.O4$(),e.TgZ(0,"svg",1),e.NdJ("click",function(n){e.CHM(t);const l=e.oxw();return e.KtG(l.emitClickEvent(n))}),e.TgZ(1,"defs"),e.YNc(2,Xt,3,5,"linearGradient",2),e.YNc(3,en,3,5,"radialGradient",2),e.qZA(),e.YNc(4,an,3,2,"ng-container",2),e.YNc(5,on,1,6,"circle",2),e.YNc(6,sn,3,2,"ng-container",2),e.YNc(7,gn,4,6,"text",3),e.YNc(8,fn,1,5,"image",4),e.qZA()}if(2&o){const t=e.oxw();e.uIk("viewBox",t.svg.viewBox)("height",t.svg.height)("width",t.svg.width)("class",t.options.class),e.xp6(2),e.Q6J("ngIf",t.options.outerStrokeGradient),e.xp6(1),e.Q6J("ngIf",t.options.backgroundGradient),e.xp6(1),e.Q6J("ngIf",t.options.showBackground),e.xp6(1),e.Q6J("ngIf",t.options.showInnerStroke),e.xp6(1),e.Q6J("ngIf",0!=+t.options.percent||t.options.showZeroOuterStroke),e.xp6(1),e.Q6J("ngIf",!t.options.showImage&&(t.options.showTitle||t.options.showUnits||t.options.showSubtitle)),e.xp6(1),e.Q6J("ngIf",t.options.showImage)}}class Re{constructor(){this.class="",this.backgroundGradient=!1,this.backgroundColor="transparent",this.backgroundGradientStopColor="transparent",this.backgroundOpacity=1,this.backgroundStroke="transparent",this.backgroundStrokeWidth=0,this.backgroundPadding=5,this.percent=0,this.radius=90,this.space=4,this.toFixed=0,this.maxPercent=1e3,this.renderOnClick=!0,this.units="%",this.unitsFontSize="10",this.unitsFontWeight="normal",this.unitsColor="#444444",this.outerStrokeGradient=!1,this.outerStrokeWidth=8,this.outerStrokeColor="#78C000",this.outerStrokeGradientStopColor="transparent",this.outerStrokeLinecap="round",this.innerStrokeColor="#C7E596",this.innerStrokeWidth=4,this.titleFormat=void 0,this.title="auto",this.titleColor="#444444",this.titleFontSize="20",this.titleFontWeight="normal",this.subtitleFormat=void 0,this.subtitle="progress",this.subtitleColor="#A9A9A9",this.subtitleFontSize="10",this.subtitleFontWeight="normal",this.imageSrc=void 0,this.imageHeight=0,this.imageWidth=0,this.animation=!0,this.animateTitle=!0,this.animateSubtitle=!1,this.animationDuration=500,this.showTitle=!0,this.showSubtitle=!0,this.showUnits=!0,this.showImage=!1,this.showBackground=!0,this.showInnerStroke=!0,this.clockwise=!0,this.responsive=!1,this.startFromZero=!0,this.showZeroOuterStroke=!0,this.lazy=!1}}let it=(()=>{class o{constructor(t,a,n,l){this.ngZone=a,this.elRef=n,this.onClick=new e.vpe,this.svgElement=null,this.isInViewport=!1,this.onViewportChanged=new e.vpe,this._viewportChangedSubscriber=null,this.options=new Re,this.defaultOptions=new Re,this._lastPercent=0,this._gradientUUID=null,this.render=()=>{this.applyOptions(),this.options.lazy?(null===this.svgElement&&this.draw(this._lastPercent),this.isInViewport&&(this.options.animation&&this.options.animationDuration>0?this.animate(this._lastPercent,this.options.percent):this.draw(this.options.percent),this._lastPercent=this.options.percent)):(this.options.animation&&this.options.animationDuration>0?this.animate(this._lastPercent,this.options.percent):this.draw(this.options.percent),this._lastPercent=this.options.percent)},this.polarToCartesian=(i,s,c,d)=>{let h=d*Math.PI/180;return{x:i+Math.sin(h)*c,y:s-Math.cos(h)*c}},this.draw=i=>{let s=(i=void 0===i?this.options.percent:Math.abs(i))>100?100:i,c=2*this.options.radius+2*this.options.outerStrokeWidth;this.options.showBackground&&(c+=2*this.options.backgroundStrokeWidth+this.max(0,2*this.options.backgroundPadding));let w,S,d={x:c/2,y:c/2},h_x=d.x,h_y=d.y-this.options.radius,y=this.polarToCartesian(d.x,d.y,this.options.radius,360*(this.options.clockwise?s:100-s)/100);100===s&&(y.x=y.x+(this.options.clockwise?-.01:.01)),[w,S]=s>50?this.options.clockwise?[1,1]:[1,0]:this.options.clockwise?[0,1]:[0,0];let M=this.options.animateTitle?i:this.options.percent,D=M>this.options.maxPercent?`${this.options.maxPercent.toFixed(this.options.toFixed)}+`:M.toFixed(this.options.toFixed),q=this.options.animateSubtitle?i:this.options.percent,A={x:d.x,y:d.y,textAnchor:"middle",color:this.options.titleColor,fontSize:this.options.titleFontSize,fontWeight:this.options.titleFontWeight,texts:[],tspans:[]};if(void 0!==this.options.titleFormat&&"Function"===this.options.titleFormat.constructor.name){let K=this.options.titleFormat(M);K instanceof Array?A.texts=[...K]:A.texts.push(K.toString())}else"auto"===this.options.title?A.texts.push(D):this.options.title instanceof Array?A.texts=[...this.options.title]:A.texts.push(this.options.title.toString());let _={x:d.x,y:d.y,textAnchor:"middle",color:this.options.subtitleColor,fontSize:this.options.subtitleFontSize,fontWeight:this.options.subtitleFontWeight,texts:[],tspans:[]};if(void 0!==this.options.subtitleFormat&&"Function"===this.options.subtitleFormat.constructor.name){let K=this.options.subtitleFormat(q);K instanceof Array?_.texts=[...K]:_.texts.push(K.toString())}else this.options.subtitle instanceof Array?_.texts=[...this.options.subtitle]:_.texts.push(this.options.subtitle.toString());let ze={text:`${this.options.units}`,fontSize:this.options.unitsFontSize,fontWeight:this.options.unitsFontWeight,color:this.options.unitsColor},Ce=0,H=1;if(this.options.showTitle&&(Ce+=A.texts.length),this.options.showSubtitle&&(Ce+=_.texts.length),this.options.showTitle)for(let K of A.texts)A.tspans.push({span:K,dy:this.getRelativeY(H,Ce)}),H++;if(this.options.showSubtitle)for(let K of _.texts)_.tspans.push({span:K,dy:this.getRelativeY(H,Ce)}),H++;null===this._gradientUUID&&(this._gradientUUID=this.uuid()),this.svg={viewBox:`0 0 ${c} ${c}`,width:this.options.responsive?"100%":c,height:this.options.responsive?"100%":c,backgroundCircle:{cx:d.x,cy:d.y,r:this.options.radius+this.options.outerStrokeWidth/2+this.options.backgroundPadding,fill:this.options.backgroundColor,fillOpacity:this.options.backgroundOpacity,stroke:this.options.backgroundStroke,strokeWidth:this.options.backgroundStrokeWidth},path:{d:`M ${h_x} ${h_y}\n        A ${this.options.radius} ${this.options.radius} 0 ${w} ${S} ${y.x} ${y.y}`,stroke:this.options.outerStrokeColor,strokeWidth:this.options.outerStrokeWidth,strokeLinecap:this.options.outerStrokeLinecap,fill:"none"},circle:{cx:d.x,cy:d.y,r:this.options.radius-this.options.space-this.options.outerStrokeWidth/2-this.options.innerStrokeWidth/2,fill:"none",stroke:this.options.innerStrokeColor,strokeWidth:this.options.innerStrokeWidth},title:A,units:ze,subtitle:_,image:{x:d.x-this.options.imageWidth/2,y:d.y-this.options.imageHeight/2,src:this.options.imageSrc,width:this.options.imageWidth,height:this.options.imageHeight},outerLinearGradient:{id:"outer-linear-"+this._gradientUUID,colorStop1:this.options.outerStrokeColor,colorStop2:"transparent"===this.options.outerStrokeGradientStopColor?"#FFF":this.options.outerStrokeGradientStopColor},radialGradient:{id:"radial-"+this._gradientUUID,colorStop1:this.options.backgroundColor,colorStop2:"transparent"===this.options.backgroundGradientStopColor?"#FFF":this.options.backgroundGradientStopColor}}},this.getAnimationParameters=(i,s)=>{let d,h,y,w=this.options.startFromZero||i<0?0:i,S=s<0?0:this.min(s,this.options.maxPercent),M=Math.abs(Math.round(S-w));return M>=100?(d=100,h=this.options.animateTitle||this.options.animateSubtitle?Math.round(M/d):1):(d=M,h=1),y=Math.round(this.options.animationDuration/d),y<10&&(y=10,d=this.options.animationDuration/y,h=!this.options.animateTitle&&!this.options.animateSubtitle&&M>100?Math.round(100/d):Math.round(M/d)),h<1&&(h=1),{times:d,step:h,interval:y}},this.animate=(i,s)=>{this._timerSubscription&&!this._timerSubscription.closed&&this._timerSubscription.unsubscribe();let c=this.options.startFromZero?0:i,d=s,{step:h,interval:y}=this.getAnimationParameters(c,d),w=c;this._timerSubscription=c<d?(0,Qe.H)(0,y).subscribe(()=>{w+=h,w<=d?!this.options.animateTitle&&!this.options.animateSubtitle&&w>=100?(this.draw(d),this._timerSubscription.unsubscribe()):this.draw(w):(this.draw(d),this._timerSubscription.unsubscribe())}):(0,Qe.H)(0,y).subscribe(()=>{w-=h,w>=d?!this.options.animateTitle&&!this.options.animateSubtitle&&d>=100?(this.draw(d),this._timerSubscription.unsubscribe()):this.draw(w):(this.draw(d),this._timerSubscription.unsubscribe())})},this.applyOptions=()=>{for(let i of Object.keys(this.options))this.hasOwnProperty(i)&&void 0!==this[i]?this.options[i]=this[i]:this.templateOptions&&void 0!==this.templateOptions[i]&&(this.options[i]=this.templateOptions[i]);this.options.radius=Math.abs(+this.options.radius),this.options.space=+this.options.space,this.options.percent=+this.options.percent>0?+this.options.percent:0,this.options.maxPercent=Math.abs(+this.options.maxPercent),this.options.animationDuration=Math.abs(this.options.animationDuration),this.options.outerStrokeWidth=Math.abs(+this.options.outerStrokeWidth),this.options.innerStrokeWidth=Math.abs(+this.options.innerStrokeWidth),this.options.backgroundPadding=+this.options.backgroundPadding},this.getRelativeY=(i,s)=>(1*(i-s/2)-.18).toFixed(2)+"em",this.min=(i,s)=>i<s?i:s,this.max=(i,s)=>i>s?i:s,this.uuid=()=>{var i=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var d=(i+16*Math.random())%16|0;return i=Math.floor(i/16),("x"==c?d:3&d|8).toString(16)})},this.checkViewport=()=>{this.findSvgElement();let i=this.isInViewport;this.isInViewport=this.isElementInViewport(this.svgElement),i!==this.isInViewport&&this.onViewportChanged.observers.length>0&&this.ngZone.run(()=>{this.onViewportChanged.emit({oldValue:i,newValue:this.isInViewport})})},this.onScroll=i=>{this.checkViewport()},this.loadEventsForLazyMode=()=>{if(this.options.lazy){this.ngZone.runOutsideAngular(()=>{this.document.addEventListener("scroll",this.onScroll,!0),this.window.addEventListener("resize",this.onScroll,!0)}),null===this._viewportChangedSubscriber&&(this._viewportChangedSubscriber=this.onViewportChanged.subscribe(({newValue:c})=>{c&&this.render()}));let i=(0,Qe.H)(0,50).subscribe(()=>{null===this.svgElement?this.checkViewport():i.unsubscribe()})}},this.unloadEventsForLazyMode=()=>{this.document.removeEventListener("scroll",this.onScroll,!0),this.window.removeEventListener("resize",this.onScroll,!0),null!==this._viewportChangedSubscriber&&(this._viewportChangedSubscriber.unsubscribe(),this._viewportChangedSubscriber=null)},this.document=l.get(T.K0),this.window=this.document.defaultView,Object.assign(this.options,t),Object.assign(this.defaultOptions,t)}emitClickEvent(t){this.options.renderOnClick&&this.animate(0,this.options.percent),this.onClick.observers.length>0&&this.onClick.emit(t)}isDrawing(){return this._timerSubscription&&!this._timerSubscription.closed}findSvgElement(){if(null===this.svgElement){let t=this.elRef.nativeElement.getElementsByTagName("svg");t.length>0&&(this.svgElement=t[0])}}isElementInViewport(t){if(null==t)return!1;let l,a=t.getBoundingClientRect(),n=t.parentNode;do{if(l=n.getBoundingClientRect(),a.top>=l.bottom||a.bottom<=l.top||a.left>=l.right||a.right<=l.left)return!1;n=n.parentNode}while(n!=this.document.body);return!(a.top>=(this.window.innerHeight||this.document.documentElement.clientHeight)||a.bottom<=0||a.left>=(this.window.innerWidth||this.document.documentElement.clientWidth)||a.right<=0)}ngOnInit(){this.loadEventsForLazyMode()}ngOnDestroy(){this.unloadEventsForLazyMode()}ngOnChanges(t){this.render(),"lazy"in t&&(t.lazy.currentValue?this.loadEventsForLazyMode():this.unloadEventsForLazyMode())}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(Re),e.Y36(e.R0b),e.Y36(e.SBq),e.Y36(e.zs3))},o.\u0275cmp=e.Xpm({type:o,selectors:[["circle-progress"]],inputs:{name:"name",class:"class",backgroundGradient:"backgroundGradient",backgroundColor:"backgroundColor",backgroundGradientStopColor:"backgroundGradientStopColor",backgroundOpacity:"backgroundOpacity",backgroundStroke:"backgroundStroke",backgroundStrokeWidth:"backgroundStrokeWidth",backgroundPadding:"backgroundPadding",radius:"radius",space:"space",percent:"percent",toFixed:"toFixed",maxPercent:"maxPercent",renderOnClick:"renderOnClick",units:"units",unitsFontSize:"unitsFontSize",unitsFontWeight:"unitsFontWeight",unitsColor:"unitsColor",outerStrokeGradient:"outerStrokeGradient",outerStrokeWidth:"outerStrokeWidth",outerStrokeColor:"outerStrokeColor",outerStrokeGradientStopColor:"outerStrokeGradientStopColor",outerStrokeLinecap:"outerStrokeLinecap",innerStrokeColor:"innerStrokeColor",innerStrokeWidth:"innerStrokeWidth",titleFormat:"titleFormat",title:"title",titleColor:"titleColor",titleFontSize:"titleFontSize",titleFontWeight:"titleFontWeight",subtitleFormat:"subtitleFormat",subtitle:"subtitle",subtitleColor:"subtitleColor",subtitleFontSize:"subtitleFontSize",subtitleFontWeight:"subtitleFontWeight",imageSrc:"imageSrc",imageHeight:"imageHeight",imageWidth:"imageWidth",animation:"animation",animateTitle:"animateTitle",animateSubtitle:"animateSubtitle",animationDuration:"animationDuration",showTitle:"showTitle",showSubtitle:"showSubtitle",showUnits:"showUnits",showImage:"showImage",showBackground:"showBackground",showInnerStroke:"showInnerStroke",clockwise:"clockwise",responsive:"responsive",startFromZero:"startFromZero",showZeroOuterStroke:"showZeroOuterStroke",lazy:"lazy",templateOptions:["options","templateOptions"]},outputs:{onClick:"onClick"},features:[e.TTD],decls:1,vars:1,consts:[["xmlns","http://www.w3.org/2000/svg","preserveAspectRatio","xMidYMid meet",3,"click",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","preserveAspectRatio","xMidYMid meet",3,"click"],[4,"ngIf"],["alignment-baseline","baseline",4,"ngIf"],["preserveAspectRatio","none",4,"ngIf"],["offset","5%"],["offset","95%"],["alignment-baseline","baseline"],[4,"ngFor","ngForOf"],["preserveAspectRatio","none"]],template:function(t,a){1&t&&e.YNc(0,hn,9,11,"svg",0),2&t&&e.Q6J("ngIf",a.svg)},dependencies:[T.sg,T.O5],encapsulation:2}),o})(),_n=(()=>{class o{static forRoot(t={}){return{ngModule:o,providers:[{provide:Re,useValue:t}]}}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[T.ez]}),o})();function vn(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",40),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,l=e.oxw();return e.KtG(l.saveAttendanceReport(!0,n))}),e.qZA()}}function yn(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",41),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,l=e.oxw();return e.KtG(l.saveAttendanceReport(!1,n))}),e.qZA()}}function bn(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",32)(1,"img",33),e.NdJ("click",function(){const l=e.CHM(t).$implicit,i=e.oxw();return e.KtG(i.openReportDialog(l))}),e.qZA(),e.TgZ(2,"div",34),e.NdJ("click",function(){const l=e.CHM(t).$implicit,i=e.oxw();return e.KtG(i.openReportDialog(l))}),e.TgZ(3,"h5",35),e._uU(4),e.ALo(5,"date"),e.qZA(),e._UZ(6,"nb-user",36),e.qZA(),e.TgZ(7,"div",37),e.YNc(8,vn,1,0,"button",38),e.YNc(9,yn,1,0,"button",39),e.qZA()()}if(2&o){const t=r.$implicit,a=e.oxw();e.xp6(1),e.Q6J("src",null==t?null:t.imageUrl,e.LSH)("alt",null==t?null:t.imageUrl),e.xp6(3),e.Oqu(e.xi3(5,9,t.createdAt,"dd/MM/yyyy HH:mm")),e.xp6(2),e.Q6J("name",(null==t||null==t.User?null:t.User.firstName)+" "+(null==t||null==t.User?null:t.User.middleName)+" "+(null==t||null==t.User?null:t.User.lastName))("onlyPicture",!1)("nbContextMenu",a.userMenu)("picture",null==t||null==t.User?null:t.User.avatarUrl),e.xp6(2),e.Q6J("ngIf",1===(null==t?null:t.statusId)),e.xp6(1),e.Q6J("ngIf",1===(null==t?null:t.statusId))}}function Cn(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",40),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,l=e.oxw();return e.KtG(l.saveLeaveRequest(!0,n))}),e.qZA()}}function Tn(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",41),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,l=e.oxw();return e.KtG(l.saveLeaveRequest(!1,n))}),e.qZA()}}function xn(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",32)(1,"div",42),e.NdJ("click",function(){const l=e.CHM(t).$implicit,i=e.oxw();return e.KtG(i.openLeaveDialog(l))}),e.TgZ(2,"h5",35),e._uU(3),e.ALo(4,"date"),e.ALo(5,"date"),e.qZA(),e._UZ(6,"nb-user",36),e.qZA(),e.TgZ(7,"div",37),e.YNc(8,Cn,1,0,"button",38),e.YNc(9,Tn,1,0,"button",39),e.qZA()()}if(2&o){const t=r.$implicit,a=e.oxw();e.xp6(3),e.AsE("",e.xi3(4,8,t.leaveDateFrom,"dd/MM/yyyy HH:mm")," - ",e.xi3(5,11,t.leaveDateTo,"dd/MM/yyyy HH:mm"),""),e.xp6(3),e.Q6J("name",(null==t||null==t.User?null:t.User.firstName)+" "+(null==t||null==t.User?null:t.User.middleName)+" "+(null==t||null==t.User?null:t.User.lastName))("onlyPicture",!1)("nbContextMenu",a.userMenu)("picture",null==t||null==t.User?null:t.User.avatarUrl),e.xp6(2),e.Q6J("ngIf",1===(null==t?null:t.status)),e.xp6(1),e.Q6J("ngIf",1===(null==t?null:t.status))}}function wn(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",32)(1,"img",33),e.NdJ("click",function(){const l=e.CHM(t).$implicit,i=e.oxw();return e.KtG(i.openReportDialog(l))}),e.qZA(),e.TgZ(2,"div",34),e.NdJ("click",function(){const l=e.CHM(t).$implicit,i=e.oxw();return e.KtG(i.openReportDialog(l))}),e.TgZ(3,"h5",35),e._uU(4),e.ALo(5,"date"),e.qZA(),e.TgZ(6,"span",43),e._uU(7),e.qZA()(),e._UZ(8,"p-tag",44),e.qZA()}if(2&o){const t=r.$implicit;e.xp6(1),e.Q6J("src",null==t?null:t.imageUrl,e.LSH)("alt",null==t?null:t.imageUrl),e.xp6(3),e.Oqu(e.xi3(5,6,t.createdAt,"dd/MM/yyyy HH:mm")),e.xp6(3),e.Oqu(t.note),e.xp6(1),e.Q6J("severity","APPROVED"==t.status.dataStateName?"success":"REJECTED"==t.status.dataStateName?"danger":"primary")("value",t.status.dataStateName)}}function Sn(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",32)(1,"div",42),e.NdJ("click",function(){const l=e.CHM(t).$implicit,i=e.oxw();return e.KtG(i.openLeaveDialog(l))}),e.TgZ(2,"h5",35),e._uU(3),e.ALo(4,"date"),e.ALo(5,"date"),e.qZA(),e.TgZ(6,"span",43),e._uU(7),e.qZA()(),e._UZ(8,"p-tag",44),e.qZA()}if(2&o){const t=r.$implicit;e.xp6(3),e.AsE("",e.xi3(4,5,t.leaveDateFrom,"dd/MM/yyyy HH:mm")," - ",e.xi3(5,8,t.leaveDateTo,"dd/MM/yyyy HH:mm"),""),e.xp6(4),e.Oqu((null==t?null:t.reason)||"No reason"),e.xp6(1),e.Q6J("severity","APPROVED"==(null==t||null==t.DataState?null:t.DataState.dataStateName)?"success":"REJECTED"==(null==t||null==t.DataState?null:t.DataState.dataStateName)?"danger":"primary")("value",t.DataState.dataStateName)}}const Ne=function(){return{height:"42vh"}};let Zn=(()=>{class o{constructor(t,a,n,l,i,s,c,d){var h=this;this.attendanceService=t,this.authService=a,this.nbAuthJwtToken=n,this.leaveEntitlementService=l,this.employeeService=i,this.leaveRequestService=s,this.messageService=c,this.dialog=d,this.order=0,this.isApply=!1,this.isLoadingChart=!1,this.listAttendanceWeeks=[],this.listTypeOfWeek=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],this.totalDurationWeekDisplay="",this.timeRangeDisplay="",this.frmDateRange=new m.cw({startDate:new m.NI("",[m.kI.required]),endDate:new m.NI("",[m.kI.required])}),this.pagingAttendanceRange=new et,this.leaveTypes=[],this.usedAnnualLeavePercentage=null,this.usedSeniorityLeavePercentage=null,this.usedUnpaidLeavePercentage=null,this.usedTransferLeavePercentage=null,this.dashboardData=new Rt,this.isLoadingDashboard=!1,this.firstDayOfMonth=new Date,this.lastDayOfMonth=new Date,this.destroy$=new R.x,this.authService.onTokenChange().pipe((0,k.R)(this.destroy$)).subscribe(function(){var M=(0,p.Z)(function*(D){D.isValid()&&(h.userModel=D.getPayload().user)});return function(D){return M.apply(this,arguments)}}());var y=new Date,w=y.getFullYear(),S=y.getMonth();this.firstDayOfMonth=new Date(w,S,1),this.lastDayOfMonth=new Date(w,S+1,0,23,59,59)}ngOnInit(){this.userModel||(this.userModel=this.nbAuthJwtToken.getPayload().user),this.initChartData(),this.initListData()}ngOnDestroy(){this.destroy$.complete(),this.destroy$.next()}refreshData(){this.initListData()}initListData(){this.isLoadingDashboard=!0,this.employeeService.getDashboardData(this.userModel.userId,this.userModel.email).subscribe(t=>{t.result&&(this.dashboardData=t.result,this.isLoadingDashboard=!1)})}initChartData(){var t=this;return(0,p.Z)(function*(){t.leaveEntitlementService.getLeaveEntitlementByEmployeeId(t.userModel.userId).subscribe(a=>{a.result&&a.result.length>0&&a.result.forEach(n=>{switch(n.leaveTypeId){case I.Annually:t.annualLeaveEntitlement=n,t.usedAnnualLeavePercentage=(n.usableLeave-n.usedLeave)/n.usableLeave*100;break;case I.Seniority:t.seniorityLeaveEntitlement=n,t.usedSeniorityLeavePercentage=(n.usableLeave-n.usedLeave)/n.usableLeave*100;break;case I.Transfer:t.transferLeaveEntitlement=n,t.usedTransferLeavePercentage=(n.usableLeave-n.usedLeave)/n.usableLeave*100;break;case I.UnPaid:t.unpaidLeaveEntitlement=n,t.usedUnpaidLeavePercentage=(n.usableLeave-n.usedLeave)/n.usableLeave*100}})}),t.rangeWeekDefault={startDate:re(t.getStartOfWeek(),"mm-dd-yyyy 0:00:00"),endDate:re(t.getEndOfWeek(),"mm-dd-yyyy 23:59:59")},t.frmDateRange.setValue({startDate:t.getStartOfWeek().toString(),endDate:t.getEndOfWeek().toString()}),yield t.setupChart()})()}setupChart(){var t=this;return(0,p.Z)(function*(){t.isLoadingChart=!t.isLoadingChart;var a=[],n=[];if(t.frmDateRange.valid){t.timeRangeDisplay=t.getMonthName(t.frmDateRange.get("startDate")?.value)+" "+t.getDateName(t.frmDateRange.get("startDate")?.value)+`, ${t.getYearName(t.frmDateRange.get("endDate")?.value)} - `+t.getMonthName(t.frmDateRange.get("endDate")?.value)+" "+t.getDateName(t.frmDateRange.get("endDate")?.value)+`, ${t.getYearName(t.frmDateRange.get("endDate")?.value)}`;var l=new Date(t.frmDateRange.get("startDate")?.value);l.setHours(0,0,0);var i=new Date(t.frmDateRange.get("endDate")?.value);i.setHours(23,59,59);var s={startDate:l.toISOString(),endDate:i.toISOString()};t.pagingAttendanceRange.rangeDateValue=s;var c=yield(0,fe.n)(t.attendanceService.getAttendanceRange(t.userModel?.userId,t.pagingAttendanceRange).pipe((0,k.R)(t.destroy$)));c.result&&c.result.length>0&&(t.listAttendanceWeeks=c.result);const S=new Date(t.frmDateRange.get("startDate")?.value);S.setHours(0,0,0,0);const M=new Date(t.frmDateRange.get("endDate")?.value);M.setHours(0,0,0,0);const D=new Date(S);for(D.setHours(0,0,0,0);D<=M;){var d=0;t.listAttendanceWeeks.map(q=>{var A=new Date(q.punchinDate);A?.getDate()===D?.getDate()&&A?.getMonth()===D?.getMonth()&&A?.getFullYear()===D?.getFullYear()&&(d+=q.duration)}),a.push(Number(d.toFixed(2))),n.push(t.listTypeOfWeek[D.getDay()]),D.setDate(D.getDate()+1)}}var h=0;a.map(S=>h+=S),t.totalDurationWeekDisplay=Math.floor(h)+"h"+Math.round(h%1*60)+"m";const w=[];for(let S=0;S<a.length;S++)w.push(25);t.chartOption={title:{left:"15%",subtext:"Total duration: "+t.totalDurationWeekDisplay,textAlign:"center"},xAxis:[{type:"category",data:n,axisTick:{alignWithLabel:!0}}],yAxis:[{type:"value"}],series:[{type:"bar",itemStyle:{color:"rgba(0,0,0,0.05)"},barGap:"-100%",barCategoryGap:"40%",barWidth:"20%",data:w,animation:!1},{type:"bar",barWidth:"20%",label:{show:!0,position:"top",formatter:S=>t.formatDurationEchart(S.value)},itemStyle:{},data:a.map(S=>({value:S,itemStyle:{color:t.handleDisplayDurationEchart(S)}}))}]},t.isLoadingChart=!t.isLoadingChart})()}setupDataFilter(t){var a=this;return(0,p.Z)(function*(){switch(t){case"prev":a.order-=1;break;case"next":a.order+=1;break;case"this":a.order=0}var n=new Date(a.rangeWeekDefault.startDate),l=new Date(a.rangeWeekDefault.endDate);n.setDate(n.getDate()+7*a.order),l.setDate(l.getDate()+7*a.order),a.frmDateRange.setValue({startDate:n.toString(),endDate:l.toString()}),yield a.setupChart()})()}getStartOfWeek(){const t=new Date,a=t.getDay(),l=a>=1?a-1:6+a,i=new Date(t);return i.setDate(t.getDate()-l),i}getEndOfWeek(){const t=new Date,a=t.getDay(),l=0>=a?0-a:7-a+0,i=new Date(t);return i.setDate(t.getDate()+l),i}getDateName(t){return new Date(t).getDate().toString()}getYearName(t){return new Date(t).getFullYear().toString()}getMonthName(t){const l=new Date(t)?.getMonth();return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][l]}formatDurationEchart(t){return t?Math.floor(t)+"h"+Math.round(t%1*60)+"m":"0"}handleDisplayDuration(t,a=!1){if(a)return t?.punchoutDate?t?.duration<9?"#ff0009":t?.duration>=10?"#008080":"#8dc63f":"#ffaa00"}handleDisplayDurationEchart(t){return t<9?"#ff0009":t>=10?"#008080":"#8dc63f"}rangeDateChange(t,a){if(!0===a){if(t.value){const n=new je.c;n.endDate=re(this.frmDateRange.value.endDate,"mm-dd-yyyy 23:59:59"),n.startDate=re(this.frmDateRange.value.startDate,"mm-dd-yyyy 0:00:00"),this.isApply=!0}}else this.isApply=!1}clearDate(t){t.stopPropagation(),this.frmDateRange.reset({startDate:"",endDate:""}),this.isApply=!0}saveAttendanceReport(t,a){this.isLoadingDashboard=!0,a.statusId=t?te.p.APPROVED:te.p.REJECTED,this.attendanceService.saveAttendanceReport(a,this.userModel.userId).subscribe(n=>{n.result?(this.messageService.add({key:"toast1",severity:"success",summary:"Success",detail:(t?"Approved":"Rejected")+" successfully!",life:2e3}),this.refreshData()):this.messageService.add({key:"toast1",severity:"warn",summary:"Warning",detail:"Failed!",life:2e3})})}openReportDialog(t){this.dialog.open(at.y,{width:"auto",height:"auto",backdropClass:"custom-backdrop",hasBackdrop:!0,autoFocus:!1,data:{captureImg:t.imageUrl,model:t,action:Z.t.Edit}}).afterClosed().subscribe(n=>{n&&(this.messageService.add({key:"toast1",severity:"success",summary:"Success",detail:(n.isApprove?"Approved":"Rejected")+" successfully!",life:2e3}),this.refreshData())})}openLeaveDialog(t=null){var a=this;return(0,p.Z)(function*(){a.dialog.open(Pe,{disableClose:!0,height:"100%",width:"600px",autoFocus:!1,backdropClass:"custom-backdrop",hasBackdrop:!0,data:{model:t,listEmployees:[],action:null===t?Z.t.Add:Z.t.Edit}}).afterClosed().subscribe(function(){var l=(0,p.Z)(function*(i){i&&a.refreshData()});return function(i){return l.apply(this,arguments)}}())})()}saveLeaveRequest(t=!1,a){this.isLoadingDashboard=!0,a.status=t?te.p.APPROVED:te.p.REJECTED,t?this.leaveRequestService.saveLeaveRequest(a).subscribe(n=>{n.result&&this.messageService.add({key:"toast1",severity:"success",summary:"Success",detail:(t?"Approved":"Rejected")+" successfully!",life:2e3})}).add(()=>{this.refreshData()}):this.dialog.open(Ye,{backdropClass:"custom-backdrop",hasBackdrop:!0}).afterClosed().subscribe(l=>{l?this.leaveRequestService.saveLeaveRequest(a).subscribe(i=>{i.result&&this.messageService.add({key:"toast1",severity:"success",summary:"Success",detail:(t?"Approved":"Rejected")+" successfully!",life:2e3})}).add(()=>{this.refreshData()}):this.refreshData()})}static#e=this.\u0275fac=function(a){return new(a||o)(e.Y36(we.v),e.Y36(O._o),e.Y36(O.OS),e.Y36(Te),e.Y36(G.n),e.Y36(De.k),e.Y36(L.ez),e.Y36(f.uw))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-dashboard"]],decls:72,vars:72,consts:[["fxLayout","row",1,"main-container"],["fxLayout","column","fxFlex","30",1,"other-emp-container"],["fxLayout","column","fxFlex","50"],[1,"card","flex","justify-content-center",3,"nbSpinner"],["header","Waiting Reports",3,"value","listStyle"],["pTemplate","item"],["header","Waiting Leave Requests",3,"value","listStyle"],["fxLayout","column","fxFlex","70"],["fxLayout","row","fxFlex","50",1,"leave-attendance-container"],["header","My Attendance Reports",3,"value","listStyle"],["header","My Leave Requests",3,"value","listStyle"],["fxLayout","row","fxFlex","35","fxLayoutAlign","center center"],["fxLayout","column","fxFlex","30"],["fxLayout","row","fxLayoutAlign","center start","fxLayoutGap","10",1,"mt-2"],["pButton","","pRipple","","icon","pi pi-angle-left",1,"p-button-sm","p-button-primary","custom-dashboard-btn",3,"click"],["pButton","","pRipple","",1,"p-button-sm","p-button-primary","custom-dashboard-btn",3,"click"],["pButton","","pRipple","","icon","pi pi-angle-right",1,"p-button-sm","p-button-primary","custom-dashboard-btn",3,"click"],["fxLayout","row","fxLayoutAlign","center start",1,"mt-2","fs-13","fw-bold"],["fxFlex","70","fxLayout","row","fxLayoutGap","20"],["fxLayout","column","fxLayoutAlign","center center"],[1,"margin-circle",3,"percent","space","radius","outerStrokeWidth","innerStrokeWidth","outerStrokeColor","animation","animationDuration","titleFontSize","title","maxPercent"],[1,"fs-13","header-text"],[1,"margin-circle",3,"percent","space","radius","outerStrokeWidth","innerStrokeWidth","outerStrokeColor","animation","titleFontSize","title","animationDuration","maxPercent"],["fxLayout","row","fxFlex","65",1,"total-container"],["fxFlex","70","echarts","",1,"mt-3",2,"width","100%","height","220px",3,"options","loading"],["fxFlex","30","fxLayout","column","fxLayoutAlign","start start","fxLayoutGap","10",1,"p-2","mt-4"],[1,"fw-bold"],["fxLayout","row"],["icon","pi pi-calendar","styleClass","p-button-sm mr-2",1,"custom-icon-button"],[1,"fs-13",2,"line-height","22px"],["icon","pi pi-check-circle","styleClass","p-button-sm mr-2 p-button-success",1,"custom-icon-button"],["icon","pi pi-sign-out","styleClass","p-button-sm mr-2 p-button-warning",1,"custom-icon-button"],["fxLayout","row","fxLayoutGap","5"],["fxFlex","20",3,"src","alt","click"],["fxLayout","column","fxFlex","50",3,"click"],[1,"fw-bold","mb-2"],["size","small","shape","rectangle",3,"name","onlyPicture","nbContextMenu","picture"],["fxLayout","row","fxFlex","30","fxLayoutGap","5","fxLayoutAlign","end center"],["matTooltip","Approve","pButton","","pRipple","","icon","pi pi-check-circle","class","p-button-sm p-button-success custom-dashboard-btn",3,"click",4,"ngIf"],["matTooltip","Reject","pButton","","pRipple","","icon","pi pi-times-circle","class","p-button-sm p-button-warning custom-dashboard-btn",3,"click",4,"ngIf"],["matTooltip","Approve","pButton","","pRipple","","icon","pi pi-check-circle",1,"p-button-sm","p-button-success","custom-dashboard-btn",3,"click"],["matTooltip","Reject","pButton","","pRipple","","icon","pi pi-times-circle",1,"p-button-sm","p-button-warning","custom-dashboard-btn",3,"click"],["fxLayout","column","fxFlex","70",3,"click"],[1,"fs-13","text-truncate"],["fxFlex","20","fxLayoutAlign","end center",3,"severity","value"]],template:function(a,n){1&a&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"p-orderList",4),e.YNc(5,bn,10,12,"ng-template",5),e.qZA()()(),e.TgZ(6,"div",2)(7,"div",3)(8,"p-orderList",6),e.YNc(9,xn,10,14,"ng-template",5),e.qZA()()()(),e.TgZ(10,"div",7)(11,"div",8)(12,"div",2)(13,"div",3)(14,"p-orderList",9),e.YNc(15,wn,9,9,"ng-template",5),e.qZA()()(),e.TgZ(16,"div",2)(17,"div",3)(18,"p-orderList",10),e.YNc(19,Sn,9,11,"ng-template",5),e.qZA()()()(),e.TgZ(20,"div",2)(21,"div",11)(22,"div",12)(23,"div",13)(24,"button",14),e.NdJ("click",function(){return n.setupDataFilter("prev")}),e.qZA(),e.TgZ(25,"button",15),e.NdJ("click",function(){return n.setupDataFilter("this")}),e._uU(26,"This week"),e.qZA(),e.TgZ(27,"button",16),e.NdJ("click",function(){return n.setupDataFilter("next")}),e.qZA()(),e.TgZ(28,"div",17),e._uU(29),e.qZA()(),e.TgZ(30,"div",18)(31,"div",19),e._UZ(32,"circle-progress",20),e.TgZ(33,"span",21),e._uU(34,"Annual Leaves"),e.qZA()(),e.TgZ(35,"div",19),e._UZ(36,"circle-progress",20),e.TgZ(37,"span",21),e._uU(38,"Seniority Leaves"),e.qZA()(),e.TgZ(39,"div",19),e._UZ(40,"circle-progress",22),e.TgZ(41,"span",21),e._uU(42,"Transfer Leaves"),e.qZA()(),e.TgZ(43,"div",19),e._UZ(44,"circle-progress",20),e.TgZ(45,"span",21),e._uU(46,"Unpaid Leaves"),e.qZA()()()(),e.TgZ(47,"div",23),e._UZ(48,"div",24),e.TgZ(49,"div",25)(50,"h5",26),e._uU(51),e.ALo(52,"date"),e.ALo(53,"date"),e.qZA(),e.TgZ(54,"div",27),e._UZ(55,"p-button",28),e.TgZ(56,"span",29)(57,"b"),e._uU(58,"Required:"),e.qZA(),e._uU(59),e.qZA()(),e.TgZ(60,"div",27),e._UZ(61,"p-button",30),e.TgZ(62,"span",29)(63,"b"),e._uU(64,"Worked:"),e.qZA(),e._uU(65),e.qZA()(),e.TgZ(66,"div",27),e._UZ(67,"p-button",31),e.TgZ(68,"span",29)(69,"b"),e._uU(70,"Leaves:"),e.qZA(),e._uU(71),e.qZA()()()()()()()),2&a&&(e.xp6(3),e.Q6J("nbSpinner",n.isLoadingDashboard),e.xp6(1),e.Q6J("value",n.dashboardData.waitingAttendanceReports)("listStyle",e.DdM(68,Ne)),e.xp6(3),e.Q6J("nbSpinner",n.isLoadingDashboard),e.xp6(1),e.Q6J("value",n.dashboardData.waitingLeaveRequests)("listStyle",e.DdM(69,Ne)),e.xp6(5),e.Q6J("nbSpinner",n.isLoadingDashboard),e.xp6(1),e.Q6J("value",n.dashboardData.myAttendanceReports)("listStyle",e.DdM(70,Ne)),e.xp6(3),e.Q6J("nbSpinner",n.isLoadingDashboard),e.xp6(1),e.Q6J("value",n.dashboardData.myLeaveRequest)("listStyle",e.DdM(71,Ne)),e.xp6(11),e.hij("",n.timeRangeDisplay," "),e.xp6(3),e.Q6J("percent",n.usedAnnualLeavePercentage)("space",-8)("radius",40)("outerStrokeWidth",8)("innerStrokeWidth",8)("outerStrokeColor",n.usedAnnualLeavePercentage>=67&&n.usedAnnualLeavePercentage<=100?"#4CC790":n.usedAnnualLeavePercentage>=33&&n.usedAnnualLeavePercentage<67?"#3c9ee5":"#ff9f00")("animation",!0)("animationDuration",300)("titleFontSize","13px")("title",n.annualLeaveEntitlement?((null==n.annualLeaveEntitlement?null:n.annualLeaveEntitlement.usableLeave)-(null==n.annualLeaveEntitlement?null:n.annualLeaveEntitlement.usedLeave)==null?null:((null==n.annualLeaveEntitlement?null:n.annualLeaveEntitlement.usableLeave)-(null==n.annualLeaveEntitlement?null:n.annualLeaveEntitlement.usedLeave)).toFixed(1))+"/"+(null==n.annualLeaveEntitlement||null==n.annualLeaveEntitlement.usableLeave?null:n.annualLeaveEntitlement.usableLeave.toFixed(1)):"0/0")("maxPercent",100),e.xp6(4),e.Q6J("percent",n.usedSeniorityLeavePercentage)("space",-8)("radius",40)("outerStrokeWidth",8)("innerStrokeWidth",8)("outerStrokeColor",n.usedSeniorityLeavePercentage>=67&&n.usedSeniorityLeavePercentage<=100?"#4CC790":n.usedSeniorityLeavePercentage>=33&&n.usedSeniorityLeavePercentage<67?"#3c9ee5":"#ff9f00")("animation",!0)("animationDuration",300)("titleFontSize","13px")("title",n.seniorityLeaveEntitlement?((null==n.seniorityLeaveEntitlement?null:n.seniorityLeaveEntitlement.usableLeave)-(null==n.seniorityLeaveEntitlement?null:n.seniorityLeaveEntitlement.usedLeave)==null?null:((null==n.seniorityLeaveEntitlement?null:n.seniorityLeaveEntitlement.usableLeave)-(null==n.seniorityLeaveEntitlement?null:n.seniorityLeaveEntitlement.usedLeave)).toFixed(1))+"/"+(null==n.seniorityLeaveEntitlement||null==n.seniorityLeaveEntitlement.usableLeave?null:n.seniorityLeaveEntitlement.usableLeave.toFixed(1)):"0/0")("maxPercent",100),e.xp6(4),e.Q6J("percent",n.usedTransferLeavePercentage)("space",-8)("radius",40)("outerStrokeWidth",8)("innerStrokeWidth",8)("outerStrokeColor",n.usedTransferLeavePercentage>=67&&n.usedTransferLeavePercentage<=100?"#4CC790":n.usedTransferLeavePercentage>=33&&n.usedTransferLeavePercentage<67?"#3c9ee5":"#ff9f00")("animation",!0)("titleFontSize","13px")("title",n.transferLeaveEntitlement?((null==n.transferLeaveEntitlement?null:n.transferLeaveEntitlement.usableLeave)-(null==n.transferLeaveEntitlement?null:n.transferLeaveEntitlement.usedLeave)==null?null:((null==n.transferLeaveEntitlement?null:n.transferLeaveEntitlement.usableLeave)-(null==n.transferLeaveEntitlement?null:n.transferLeaveEntitlement.usedLeave)).toFixed(1))+"/"+(null==n.transferLeaveEntitlement||null==n.transferLeaveEntitlement.usableLeave?null:n.transferLeaveEntitlement.usableLeave.toFixed(1)):"0/0")("animationDuration",300)("maxPercent",100),e.xp6(4),e.Q6J("percent",n.usedUnpaidLeavePercentage)("space",-8)("radius",40)("outerStrokeWidth",8)("innerStrokeWidth",8)("outerStrokeColor",n.usedUnpaidLeavePercentage>=67&&n.usedUnpaidLeavePercentage<=100?"#4CC790":n.usedUnpaidLeavePercentage>=33&&n.usedUnpaidLeavePercentage<67?"#3c9ee5":"#ff9f00")("animation",!0)("animationDuration",300)("titleFontSize","13px")("title",n.unpaidLeaveEntitlement?((null==n.unpaidLeaveEntitlement?null:n.unpaidLeaveEntitlement.usableLeave)-(null==n.unpaidLeaveEntitlement?null:n.unpaidLeaveEntitlement.usedLeave)==null?null:((null==n.unpaidLeaveEntitlement?null:n.unpaidLeaveEntitlement.usableLeave)-(null==n.unpaidLeaveEntitlement?null:n.unpaidLeaveEntitlement.usedLeave)).toFixed(1))+"/"+(null==n.unpaidLeaveEntitlement||null==n.unpaidLeaveEntitlement.usableLeave?null:n.unpaidLeaveEntitlement.usableLeave.toFixed(1)):"0/0")("maxPercent",100),e.xp6(4),e.Q6J("options",n.chartOption)("loading",n.isLoadingChart),e.xp6(3),e.AsE("",e.lcZ(52,64,n.firstDayOfMonth)," - ",e.lcZ(53,66,n.lastDayOfMonth),": "),e.xp6(8),e.hij(" ",(null==n.dashboardData||null==n.dashboardData.requiredWorkingHours?null:n.dashboardData.requiredWorkingHours.toFixed(2))||0," hours "),e.xp6(6),e.hij(" ",(null==n.dashboardData||null==n.dashboardData.workedHours?null:n.dashboardData.workedHours.toFixed(2))||0," hours "),e.xp6(6),e.hij(" ",(null==n.dashboardData||null==n.dashboardData.leaveHours?null:n.dashboardData.leaveHours.toFixed(2))||0," hours "))},dependencies:[T.O5,L.jx,_e.gM,v.Q7R,v.k0$,x.xw,x.SQ,x.Wh,x.yH,U.Hq,U.zx,Kt.F,jt.V,lt._w,it,T.uU],styles:[".main-container[_ngcontent-%COMP%]{height:100%;width:100%}.main-container[_ngcontent-%COMP%]   nb-user[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%]{font-weight:500!important}.custom-icon-button[_ngcontent-%COMP%]     .p-button-icon-only{padding:2px;width:22px;height:22px}.custom-icon-button[_ngcontent-%COMP%]     .p-button-icon-only .p-button-icon{font-size:10px}.custom-dashboard-btn[_ngcontent-%COMP%]{max-height:40px}.button-app-function[_ngcontent-%COMP%]{margin-right:10px!important;background-color:#b45cea;color:#fff}"]})}return o})();var C=g(4911);class me{}(0,C.gn)([(0,u.vg)()],me.prototype,"dataStateId",void 0),(0,C.gn)([(0,u.vg)(),(0,u.C1)()],me.prototype,"dataStateName",void 0),(0,C.gn)([(0,u.vg)(),(0,u.C1)()],me.prototype,"type",void 0),(0,C.gn)([(0,u.vg)()],me.prototype,"colorCode",void 0),(0,C.gn)([(0,u.vg)(),(0,u.C1)()],me.prototype,"order",void 0);var rt=g(4001);function kn(o,r){if(1&o&&(e.TgZ(0,"small",18),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.hij(" ",t.form.controls.dataStateName.errorMessage,"")}}function Dn(o,r){if(1&o&&(e.TgZ(0,"small",18),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.hij(" ",t.form.controls.type.errorMessage,"")}}function Mn(o,r){if(1&o&&(e.TgZ(0,"small",18),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.hij(" ",t.form.controls.type.errorMessage,"")}}let An=(()=>{class o{constructor(t,a,n,l,i,s){this.data=t,this.dialogRef=a,this.formBuilder=n,this.dataStateService=l,this.messageService=i,this.dialog=s,this.submitted=!1,this.isChange=!1,this.destroy$=new R.x}ngOnInit(){this.action=this.data.action,this.data.model&&"Edit"===this.action&&(this.dataSateModel=this.data.model),!this.data.model&&"Add"===this.action&&(this.dataSateModel=new me),this.form=this.formBuilder.formGroup(me,this.dataSateModel),this.dialogRef.updatePosition({right:"0"})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}closeDialog(){this.isChange?this.dialog.open($,{backdropClass:"custom-backdrop",hasBackdrop:!0,data:{message:"Do you want to quit? unsaved data will be lost."}}).afterClosed().subscribe(a=>{a&&this.dialogRef.close(!1)}):this.dialogRef.close(!1)}saveData(){this.submitted=!0,this.dataStateService.saveDataState(this.form.value).subscribe(t=>{this.submitted=!1,t.result?this.dialogRef.close(!0):t.message?(this.messageService.clear(),this.messageService.add({key:"toast1",severity:"warn",summary:"L\xf4\u0303i",detail:`${t.message}`,life:2e4})):(this.messageService.clear(),this.messageService.add({key:"toast1",severity:"warn",summary:"L\xf4\u0303i",detail:"Co\u0301 l\xf4\u0303i xa\u0309y ra!",life:2e4}))})}ngAfterViewInit(){this.form.valueChanges.pipe((0,k.R)(this.destroy$)).subscribe(t=>this.isChange=!0)}static#e=this.\u0275fac=function(a){return new(a||o)(e.Y36(f.WI),e.Y36(f.so),e.Y36(u.GW),e.Y36(ne.Q),e.Y36(L.ez),e.Y36(f.uw))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-add-edit-datastate"]],decls:34,vars:5,consts:[["mat-dialog-title","",1,"d-flex","flex-wrap",2,"margin","unset","padding","1px 10px 1px 28px","justify-content","center","align-items","center"],["nbButton","","status","success",2,"margin","10px 0px 5px 0px",3,"disabled","click"],["icon","save-outline"],["nbButton","","ghost","",1,"ml-auto",3,"click"],["icon","close-outline"],["position","bottom-right","key","toast1"],[3,"formGroup"],[1,"mb-3","text-uppercase","bg-light","p-2"],[1,"mdi","mdi-account-circle","mr-1"],[1,"row"],[1,"col-12"],[1,"form-control-group"],["for","dataStateName",1,"label"],["nbInput","","formControlName","dataStateName","type","text","id","dataStateName","placeholder","Enter Name",1,"form-control",2,"width","100% !important","max-width","100% !important"],["class","caption text-danger",4,"ngIf"],["for","type",1,"label"],["nbInput","","formControlName","type","type","text","id","type","placeholder","Enter Type",1,"form-control",2,"width","100% !important","max-width","100% !important"],["nbInput","","formControlName","order","type","text","id","type","placeholder","Enter Order",1,"form-control",2,"width","100% !important","max-width","100% !important"],[1,"caption","text-danger"]],template:function(a,n){1&a&&(e.TgZ(0,"div",0)(1,"button",1),e.NdJ("click",function(){return n.saveData()}),e._UZ(2,"nb-icon",2),e._uU(3,"Save "),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return n.closeDialog()}),e._UZ(5,"nb-icon",4),e.qZA()(),e._UZ(6,"mat-divider")(7,"p-toast",5),e.TgZ(8,"mat-dialog-content")(9,"form",6)(10,"h5",7),e._UZ(11,"i",8),e._uU(12," Data States"),e.qZA(),e.TgZ(13,"div",9)(14,"div",10)(15,"div",11)(16,"label",12),e._uU(17,"Name"),e.qZA(),e._UZ(18,"input",13),e.YNc(19,kn,2,1,"small",14),e.qZA()()(),e.TgZ(20,"div",9)(21,"div",10)(22,"div",11)(23,"label",15),e._uU(24,"Type"),e.qZA(),e._UZ(25,"input",16),e.YNc(26,Dn,2,1,"small",14),e.qZA()()(),e.TgZ(27,"div",9)(28,"div",10)(29,"div",11)(30,"label",15),e._uU(31,"Order"),e.qZA(),e._UZ(32,"input",17),e.YNc(33,Mn,2,1,"small",14),e.qZA()()()()()),2&a&&(e.xp6(1),e.Q6J("disabled",!n.form.valid),e.xp6(8),e.Q6J("formGroup",n.form),e.xp6(10),e.Q6J("ngIf",n.form.controls.dataStateName.errors&&(n.form.controls.dataStateName.dirty||n.form.controls.dataStateName.touched)),e.xp6(7),e.Q6J("ngIf",n.form.controls.type.errors&&(n.form.controls.type.dirty||n.form.controls.type.touched)),e.xp6(7),e.Q6J("ngIf",n.form.controls.type.errors&&(n.form.controls.type.dirty||n.form.controls.type.touched)))},dependencies:[T.O5,m._Y,m.Fj,m.JJ,m.JL,m.sg,m.u,u.bc,u.VP,u.YE,rt.FN,f.uh,f.xY,j.d,v.fMN,v.h8i,v.DPz],styles:[".row[_ngcontent-%COMP%]{margin-bottom:10px}"]})}return o})();var We=g(9167),V=g(3319),ue=g(8698),Ln=g(8381);const En=["columnAction"],Rn=["headerFilter"],Nn=["dateCell"],qn=["colorCodeCell"],Un=function(o){return{"width.px":o}};function In(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",6)(1,"mat-icon"),e._uU(2,"more_vert"),e.qZA()(),e.TgZ(3,"mat-menu",null,7)(5,"button",8),e.NdJ("click",function(){const n=e.CHM(t),l=n.row,i=n.rowIndex,s=e.oxw();return e.KtG(s.onClickEdit(l,i))}),e.TgZ(6,"mat-icon",9),e._uU(7,"edit"),e.qZA(),e.TgZ(8,"span"),e._uU(9,"Edit item"),e.qZA()(),e.TgZ(10,"button",8),e.NdJ("click",function(){const n=e.CHM(t),l=n.row,i=n.rowIndex,s=e.oxw();return e.KtG(s.onClickDelete(l,i))}),e.TgZ(11,"mat-icon",10),e._uU(12,"delete"),e.qZA(),e.TgZ(13,"span"),e._uU(14,"Delete item"),e.qZA()()()}if(2&o){const t=e.MAs(4),a=e.oxw();e.Q6J("ngStyle",e.VKq(2,Un,a.actionWidth))("matMenuTriggerFor",t)}}function Fn(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"input",11),e.NdJ("keyup",function(n){const i=e.CHM(t).column,s=e.oxw();return e.KtG(s.updateFilter(n,i))}),e.qZA()}2&o&&e.Q6J("placeholder",r.column.name)}function On(o,r){if(1&o&&(e.TgZ(0,"p"),e._uU(1),e.ALo(2,"datePipe"),e.qZA()),2&o){const t=r.column,a=r.row;e.xp6(1),e.Oqu(e.lcZ(2,1,a[t.prop]))}}function Jn(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"input",12),e.NdJ("colorPickerChange",function(n){const l=e.CHM(t);return e.KtG(l.row[l.column.prop]=n)}),e.qZA()}if(2&o){const t=r.column,a=r.row;e.Udp("background",a[t.prop]),e.Q6J("colorPicker",a[t.prop])}}let Pn=(()=>{class o{constructor(t){this.dialog=t,this.actionWidth=70,this.onRefresh=new e.vpe,this.onDelete=new e.vpe,this.editEvent=new e.vpe,this.isNormalShowTable=!1,this.addEditHeight="100vh",this.addEditWidth="600px",this.isLoading=0,this.rows=[],this.columns=[],this.page=new Xe,this.selected=[],this.SelectionType=We.RT,this.actionColumn=[],this.listFilter=[],this.rawData=[]}ngOnInit(){this.actionColumn.push({width:30,sortable:!1,canAutoResize:!1,draggable:!1,resizeable:!1,headerCheckboxable:!0,checkboxable:!0,headerClass:"text-center",cellClass:"text-center",frozenLeft:!0}),this.actionColumn.push({maxWidth:this.actionWidth,name:"",prop:"id",sortable:!1,cellTemplate:this.columnAction,headerClass:"text-center remove-padding",cellClass:"text-center remove-padding",frozenLeft:!0}),this.isNormalShowTable||(this.columns=this.columns.concat(this.actionColumn));var t=["birth","createdAt","updatedAt"];this.columnsTable&&this.columnsTable.length>0&&this.columnsTable.forEach((a,n)=>{a.headerTemplate||(a.headerTemplate=this.headerFilter),t.includes(a.prop)&&(a.cellTemplate=this.dateCell),"colorCode"===a.prop&&(a.cellTemplate=this.colorCodeCell,a.cellClass="text-center remove-padding")}),this.columns=this.columns.concat(this.columnsTable)}onSelect({selected:t}){this.selected.length>0&&t.length>0&&(this.selected.splice(0,this.selected.length),this.selected.push(...t))}setData(t){t&&(this.isLoading--,this.page=t.page,this.rows=t.data,this.rawData=t.data,this.listFilter=[])}onClickEdit(t,a){this.dialog.open(this.addEditComponent,{disableClose:!0,height:this.addEditHeight,width:this.addEditWidth,backdropClass:"custom-backdrop",hasBackdrop:!0,autoFocus:!1,data:{model:t,action:"Edit"}}).afterClosed().subscribe(l=>{null!=l&&("boolean"==typeof l?(this.refreshTable(l),this.editEvent.emit(l)):this.refreshTable())})}refreshTable(t=!1){this.onRefresh.emit()}onClickDelete(t,a){this.dialog.open($,{backdropClass:"custom-backdrop",hasBackdrop:!0,data:{message:"Do you wish to delete this item?"}}).afterClosed().subscribe(l=>{l&&this.onDelete.emit({row:t,rowIndex:a})})}updateFilter(t,a){this.rows=[...this.rawData];const n=t.target.value.toLowerCase();var l=this.listFilter.findIndex(s=>s.prop===a.prop);l<0?this.listFilter.push({prop:a.prop,value:n}):this.listFilter[l].value=n;var i=this.rows;this.listFilter.forEach(s=>{i=i.filter(c=>!c[s.prop]||c[s.prop]?.toString()?.toLowerCase()?.trim()?.includes(s.value?.toLowerCase()?.trim()))}),this.rows=i,this.table.offset=0}static#e=this.\u0275fac=function(a){return new(a||o)(e.Y36(f.uw))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-ngx-table"]],viewQuery:function(a,n){if(1&a&&(e.Gf(En,7),e.Gf(Rn,7),e.Gf(Nn,7),e.Gf(qn,7),e.Gf(We.nE,5)),2&a){let l;e.iGM(l=e.CRH())&&(n.columnAction=l.first),e.iGM(l=e.CRH())&&(n.headerFilter=l.first),e.iGM(l=e.CRH())&&(n.dateCell=l.first),e.iGM(l=e.CRH())&&(n.colorCodeCell=l.first),e.iGM(l=e.CRH())&&(n.table=l.first)}},inputs:{actionWidth:"actionWidth",columnsTable:"columnsTable",addEditComponent:"addEditComponent",isNormalShowTable:"isNormalShowTable",addEditHeight:"addEditHeight",addEditWidth:"addEditWidth"},outputs:{onRefresh:"onRefresh",onDelete:"onDelete",editEvent:"editEvent"},decls:10,vars:11,consts:[[1,"table-responsive","material"],["rowHeight","auto",1,"material",3,"rows","columns","columnMode","headerHeight","scrollbarV","scrollbarH","footerHeight","reorderable","selected","selectionType","limit","select"],["columnAction",""],["headerFilter",""],["dateCell",""],["colorCodeCell",""],["type","button","mat-icon-button","","title","Action",3,"ngStyle","matMenuTriggerFor"],["menuAction","matMenu"],["mat-menu-item","",3,"click"],["color","primary"],[2,"color","red"],["nbInput","","type","text",2,"width","100%",3,"placeholder","keyup"],["nbInput","",2,"width","80% !important","max-width","80% !important","color","transparent",3,"colorPicker","colorPickerChange"]],template:function(a,n){1&a&&(e.TgZ(0,"div",0)(1,"ngx-datatable",1),e.NdJ("select",function(i){return n.onSelect(i)}),e.qZA()(),e.YNc(2,In,15,4,"ng-template",null,2,e.W1O),e.YNc(4,Fn,1,1,"ng-template",null,3,e.W1O),e.YNc(6,On,3,3,"ng-template",null,4,e.W1O),e.YNc(8,Jn,1,3,"ng-template",null,5,e.W1O)),2&a&&(e.xp6(1),e.Q6J("rows",n.rows)("columns",n.columns)("columnMode","force")("headerHeight",60)("scrollbarV",!1)("scrollbarH",!0)("footerHeight",50)("reorderable",!1)("selected",n.selected)("selectionType",n.SelectionType.checkbox)("limit",20))},dependencies:[T.PC,We.nE,Q.Hw,V.VK,V.OP,V.p6,J.RK,v.h8i,ue.Zl,Ln.A],styles:[".text-center.remove-padding{padding:0 10px 0 0!important}.text-center[_ngcontent-%COMP%]{align-items:center;justify-self:center}"]})}return o})();var He=g(5295);let Yn=(()=>{class o{constructor(t){this.dialog=t,this.onRefresh=new e.vpe,this.onDeletes=new e.vpe,this.addEvent=new e.vpe,this.selectedCout=0,this.addEditHeight="100vh",this.addEditWidth="600px"}ngOnInit(){}onClickAddNew(){this.dialog.open(this.addEditComponent,{disableClose:!0,height:this.addEditHeight,width:this.addEditWidth,backdropClass:"custom-backdrop",hasBackdrop:!0,autoFocus:!1,data:{action:"Add"}}).afterClosed().subscribe(a=>{null!=a&&("boolean"==typeof a?(this.onRefresh.emit(a),this.addEvent.emit(a)):this.onRefresh.emit())})}onClickDeletes(){this.dialog.open($,{backdropClass:"custom-backdrop",hasBackdrop:!0,data:{message:`Do you wish to delete ${this.selectedCout} item(s)?`}}).afterClosed().subscribe(a=>{a&&this.onDeletes.emit()})}configClearFilter(){this.onRefresh.emit()}static#e=this.\u0275fac=function(a){return new(a||o)(e.Y36(f.uw))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-toolbar"]],inputs:{tableResource:"tableResource",addEditComponent:"addEditComponent",selectedCout:"selectedCout",addEditHeight:"addEditHeight",addEditWidth:"addEditWidth"},outputs:{onRefresh:"onRefresh",onDeletes:"onDeletes",addEvent:"addEvent"},decls:13,vars:1,consts:[["fxLayout","row","fxLayoutAlign","space-between center",2,"background-color","white"],["fxLayout","row","fxLayoutAlign","start center"],["mat-raised-button","","color","primary",3,"click"],["type","button","color","warn","mat-button","",3,"hidden","click"],[1,"mr"],["type","button","mat-icon-button","","title","Clear Filter","debouncedClick","","throttleTime","1000",1,"ml-auto",3,"click"]],template:function(a,n){1&a&&(e.TgZ(0,"mat-toolbar",0)(1,"span",1)(2,"button",2),e.NdJ("click",function(){return n.onClickAddNew()}),e.TgZ(3,"mat-icon"),e._uU(4,"add"),e.qZA(),e._uU(5,"New "),e.qZA(),e.TgZ(6,"button",3),e.NdJ("click",function(){return n.onClickDeletes()}),e.TgZ(7,"mat-icon",4),e._uU(8,"delete"),e.qZA(),e._uU(9,"Delete Selected "),e.qZA(),e.TgZ(10,"button",5),e.NdJ("click",function(){return n.configClearFilter()}),e.TgZ(11,"mat-icon"),e._uU(12,"autorenew"),e.qZA()()()()),2&a&&(e.xp6(6),e.Q6J("hidden",0==n.selectedCout))},dependencies:[He.Ye,Q.Hw,J.lW,J.RK,x.xw,x.Wh]})}return o})();const Qn=["ngxTableUser"];let Wn=(()=>{class o{constructor(t,a){this.dataStateService=t,this.messageService=a,this.columns=[],this.addEditComponent=An,this.destroy$=new R.x,this.user={}}ngOnInit(){this.columns=[{name:"dataStateName",prop:"dataStateName"},{name:"type",prop:"type"},{name:"order",prop:"order"},{name:"colorCode",prop:"colorCode"},{name:"createdAt",prop:"createdAt"},{name:"updatedAt",prop:"updatedAt"}],this.refreshData()}refreshData(t=!1){this.dataStateService.getAllDataState().subscribe(a=>{this.ngxTable.setData(a)})}successEventEdit(t){t&&(this.messageService.clear(),this.messageService.add({key:"toast1",severity:"success",summary:"Success",detail:"Edit success!",life:2e3}))}successEventAdd(t){t&&(this.messageService.clear(),this.messageService.add({key:"toast1",severity:"success",summary:"Success",detail:"Create new success!",life:2e3}))}onClickDelete(t){this.dataStateService.onDeletes([t.row.dataStateId]).subscribe(n=>{n.result?(this.messageService.clear(),this.messageService.add({key:"toast1",severity:"success",summary:"Success",detail:"Delete succesfully!",life:2e3}),this.refreshData()):(this.messageService.clear(),this.messageService.add({key:"toast1",severity:"warn",summary:"Warning",detail:"Delete unsuccesfully!",life:2e3}))})}onClickDeletes(t){var n=this.ngxTable.selected.map(l=>l.dataStateId);this.dataStateService.onDeletes(n).subscribe(l=>{l.result?(this.messageService.clear(),this.messageService.add({key:"toast1",severity:"success",summary:"Success",detail:"Delete succesfully!",life:2e3}),this.refreshData()):(this.messageService.clear(),this.messageService.add({key:"toast1",severity:"warn",summary:"Warning",detail:"Delete unsuccesfully!",life:2e3}))})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static#e=this.\u0275fac=function(a){return new(a||o)(e.Y36(ne.Q),e.Y36(L.ez))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-datastate-management"]],viewQuery:function(a,n){if(1&a&&e.Gf(Qn,7),2&a){let l;e.iGM(l=e.CRH())&&(n.ngxTable=l.first)}},decls:5,vars:4,consts:[[1,"base-container"],[3,"selectedCout","addEditComponent","onRefresh","onDeletes","addEvent"],[3,"columnsTable","addEditComponent","onRefresh","editEvent","onDelete"],["ngxTableUser",""]],template:function(a,n){1&a&&(e.TgZ(0,"div",0)(1,"app-toolbar",1),e.NdJ("onRefresh",function(i){return n.refreshData(i)})("onDeletes",function(i){return n.onClickDeletes(i)})("addEvent",function(i){return n.successEventAdd(i)}),e.qZA(),e._UZ(2,"mat-divider"),e.TgZ(3,"app-ngx-table",2,3),e.NdJ("onRefresh",function(i){return n.refreshData(i)})("editEvent",function(i){return n.successEventEdit(i)})("onDelete",function(i){return n.onClickDelete(i)}),e.qZA()()),2&a&&(e.xp6(1),e.Q6J("selectedCout",null==n.ngxTable?null:n.ngxTable.selected.length)("addEditComponent",n.addEditComponent),e.xp6(2),e.Q6J("columnsTable",n.columns)("addEditComponent",n.addEditComponent))},dependencies:[j.d,Pn,Yn],styles:["input[_ngcontent-%COMP%]{width:100%;max-width:100%}"]})}return o})();var Hn=g(7070),$n=g(1948),st=g(707),Gn=g(827),E=g(4838),ve=(()=>{return(o=ve||(ve={}))[o.Detection=1]="Detection",o[o.Recognition=2]="Recognition",ve;var o})();const Bn=["video"],Vn=["canvas"];let zn=(()=>{class o{constructor(t,a){this.elRef=t,this.http=a,this.isOpenCamera=!1,this.mode=ve.Detection,this.finishCapturing=new e.vpe,this.isCollectingImages=!1}ngOnInit(){this.setUpData()}setUpData(){var t=this;return(0,p.Z)(function*(){yield Promise.all([E.qB.tinyFaceDetector.loadFromUri("../../assets/models"),yield E.qB.faceLandmark68Net.loadFromUri("../../assets/models"),yield E.qB.faceRecognitionNet.loadFromUri("../../assets/models"),yield E.qB.ssdMobilenetv1.loadFromUri("../../assets/models"),yield E.qB.faceExpressionNet.loadFromUri("../../assets/models")]).then(()=>t.initVideo())})()}initVideo(){if(this.videoInput=this.video.nativeElement,this.isOpenCamera)switch(navigator.mediaDevices.getUserMedia({video:{},audio:!1}).then(t=>{this.videoInput.srcObject=t}).catch(t=>{console.log(t)}),this.mode){case ve.Detection:this.detectFaces();break;case ve.Recognition:this.recogFace()}}detectFaces(){var t=this;return(0,p.Z)(function*(){t.elRef.nativeElement.querySelector("video").addEventListener("play",(0,p.Z)(function*(){t.canvas=E.Jd(t.videoInput),t.canvasEl=t.canvasRef.nativeElement,t.canvasEl.appendChild(t.canvas),t.canvas.setAttribute("id","canvass"),t.displaySize={width:window.innerWidth,height:window.innerHeight},E.JF(t.canvas,t.displaySize),t.detectionInterval=setInterval((0,p.Z)(function*(){t.detection=yield E.bd(t.videoInput,new E.d7).withFaceLandmarks().withFaceExpressions(),t.canvas.getContext("2d").clearRect(0,0,t.canvas.width,t.canvas.height),t.detection&&(t.resizedDetections=E._C(t.detection,t.displaySize))}),300)}))})()}recogFace(){var t=this;return(0,p.Z)(function*(){t.elRef.nativeElement.querySelector("video").addEventListener("play",(0,p.Z)(function*(){t.canvas=E.Jd(t.videoInput),t.canvasEl=t.canvasRef.nativeElement,t.canvasEl.appendChild(t.canvas),t.canvas.setAttribute("id","canvass"),t.displaySize={width:t.videoInput.width,height:t.videoInput.height},E.JF(t.canvas,t.displaySize);const a=yield(0,fe.n)(t.http.get("./assets/traning_model/faceMatcher.json")),l=E.zi.fromJSON(a).labeledDescriptors,i=new E.zi(l,.7);t.captureInterval=setInterval((0,p.Z)(function*(){if(t.detection=yield E.bd(t.videoInput,new E.d7({minConfidence:.75,maxResults:1})).withFaceLandmarks().withFaceDescriptor(),t.canvas.getContext("2d").clearRect(0,0,t.canvas.width,t.canvas.height),t.detection){const s=i.findBestMatch(t.detection.descriptor);t.resizedDetections=E._C(t.detection,t.displaySize),new E.ii.DrawBox(t.resizedDetections.detection.box,{label:s.toString(!0)}).draw(t.canvas)}}),300)}))})()}recogFaceNoInterval(t){var a=this;return(0,p.Z)(function*(){var n=!1;const l=yield(0,fe.n)(a.http.get("./assets/traning_model/faceMatcher.json")),s=E.zi.fromJSON(l).labeledDescriptors,c=new E.zi(s,.7);if(a.detection=yield E.bd(a.videoInput,new E.d7({minConfidence:.75,maxResults:1})).withFaceLandmarks().withFaceDescriptor(),a.detection){const d=c.findBestMatch(a.detection.descriptor);d.distance>.5&&d.label===t&&(n=!0)}return n})()}captureImages(t=0){var a=this;return(0,p.Z)(function*(){var n=[],l=0;a.canvas.style.display="none",a.canvas.width=80*window.innerWidth/100,a.canvas.height=window.innerHeight,a.captureInterval=setInterval((0,p.Z)(function*(){try{a.canvas.getContext("2d").drawImage(a.videoInput,0,0,80*window.innerWidth/100,window.innerHeight),a.canvas.toBlob(i=>{const s=new File([i],`${10*t+l}.png`,{type:"image/jpg"});n.push(s),10==++l&&(clearInterval(a.captureInterval),a.finishCapturing.emit(n))},"image/png")}catch(i){console.log(i),a.finishCapturing.emit([])}}),500)})()}ngOnDestroy(){clearInterval(this.detectionInterval),clearInterval(this.captureInterval),this.videoInput.srcObject=null}turnOffCamera(){clearInterval(this.detectionInterval),clearInterval(this.captureInterval),this.videoInput.srcObject=null}static#e=this.\u0275fac=function(a){return new(a||o)(e.Y36(e.SBq),e.Y36(Ae.eN))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-webcam"]],viewQuery:function(a,n){if(1&a&&(e.Gf(Bn,7),e.Gf(Vn,7)),2&a){let l;e.iGM(l=e.CRH())&&(n.video=l.first),e.iGM(l=e.CRH())&&(n.canvasRef=l.first)}},inputs:{isOpenCamera:"isOpenCamera",mode:"mode"},outputs:{finishCapturing:"finishCapturing"},decls:7,vars:0,consts:[[1,"border"],["fxLayout","row"],[1,"video-container"],["id","video","autoplay","","muted",""],["video",""],[2,"position","fixed"],["canvas",""]],template:function(a,n){1&a&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"video",3,4)(5,"div",5,6),e.qZA()()())},dependencies:[x.xw],styles:[".video-container[_ngcontent-%COMP%]{width:80%;height:75%;overflow:auto;background-repeat:no-repeat;background-size:cover;background-position:center center}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{position:absolute;object-fit:cover;width:calc(100% - 50px);height:75%}"]})}return o})();const Kn=["stepper"],jn=["webcamComp"];function Xn(o,r){1&o&&e._UZ(0,"mat-progress-bar",18)}function ea(o,r){1&o&&e._UZ(0,"mat-progress-bar",18)}function ta(o,r){1&o&&e._UZ(0,"mat-progress-bar",18)}function na(o,r){1&o&&e._UZ(0,"mat-progress-bar",18)}let aa=(()=>{class o{constructor(t,a,n,l){this.dialModalRef=t,this.data=a,this.trainEmployeeService=n,this.messageService=l,this.editableSteps=Array(4).fill(!0),this.currentStep=0,this.isOpenCamera=!0,this.isStartStep=!1,this.allFiles=[],a.model&&(this.employeeModel=a.model)}ngOnInit(){}closeDialog(){this.webcamComp.turnOffCamera(),this.dialModalRef.close()}startDetection(){var t=this;return(0,p.Z)(function*(){3===t.currentStep?(t.isStartStep=!0,t.trainEmployeeService.traningUserFace(t.employeeModel.userId,t.allFiles).subscribe(a=>{t.messageService.clear(),a.result?(t.messageService.add({key:"toast1",severity:"success",summary:"Success",detail:"Add user face successfully!",life:2e3}),t.dialModalRef.close()):t.messageService.add({key:"toast1",severity:"error",summary:"Error",detail:"Add user face failed!",life:2e3}),t.isStartStep=!1})):(t.isStartStep=!0,yield t.webcamComp.captureImages(t.currentStep))})()}onSelectStepperChange(t){this.currentStep=t,this.stepper.selectedIndex=t;for(var a=0;a<t;a++)this.editableSteps[a]=!1}finishCapturing(t){this.isStartStep=!1,t&&t?.length>0&&(this.allFiles=this.allFiles.concat(t),this.onSelectStepperChange(this.stepper.selectedIndex+1))}static#e=this.\u0275fac=function(a){return new(a||o)(e.Y36(f.so),e.Y36(f.WI),e.Y36($n.e),e.Y36(L.ez))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-train-employee"]],viewQuery:function(a,n){if(1&a&&(e.Gf(Kn,7),e.Gf(jn,7)),2&a){let l;e.iGM(l=e.CRH())&&(n.stepper=l.first),e.iGM(l=e.CRH())&&(n.webcamComp=l.first)}},decls:30,vars:16,consts:[["mat-dialog-title","",1,"d-flex","flex-wrap","align-items-center","justify-content-start",2,"margin","unset","padding","5px 10px 5px 28px"],["icon","pi pi-camera","styleClass","p-button-primary",3,"loading","label","click"],[1,"ml-auto"],["mat-icon-button","","aria-label","Close the dialog",1,"ml-auto",3,"click"],[1,"mat-typography","pb-0"],["fxLayout","column"],["fxLayout","row"],["fxFlex","grow",3,"linear"],["stepper",""],["label","Front-face",3,"editable"],["fxLayout","row","fxLayoutAlign","none center"],["mode","indeterminate",4,"ngIf"],["label","Bow down",3,"editable"],["label","Raise one's head",3,"editable"],["label","Training",3,"editable"],[3,"isOpenCamera","finishCapturing"],["webcamComp",""],["position","bottom-right","key","toast1"],["mode","indeterminate"]],template:function(a,n){1&a&&(e.TgZ(0,"div",0)(1,"p-button",1),e.NdJ("click",function(){return n.startDetection()}),e.qZA(),e.TgZ(2,"span",2),e._uU(3),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return n.closeDialog()}),e.TgZ(5,"mat-icon"),e._uU(6,"close"),e.qZA()()(),e._UZ(7,"mat-divider"),e.TgZ(8,"mat-dialog-content",4)(9,"div",5)(10,"div",6)(11,"mat-stepper",7,8)(13,"mat-step",9)(14,"div",10),e.YNc(15,Xn,1,0,"mat-progress-bar",11),e.qZA()(),e.TgZ(16,"mat-step",12)(17,"div",10),e.YNc(18,ea,1,0,"mat-progress-bar",11),e.qZA()(),e.TgZ(19,"mat-step",13)(20,"div",10),e.YNc(21,ta,1,0,"mat-progress-bar",11),e.qZA()(),e.TgZ(22,"mat-step",14)(23,"p"),e._uU(24),e.qZA(),e.YNc(25,na,1,0,"mat-progress-bar",11),e.qZA()()(),e.TgZ(26,"div",6)(27,"app-webcam",15,16),e.NdJ("finishCapturing",function(i){return n.finishCapturing(i)}),e.qZA()()()(),e._UZ(29,"p-toast",17)),2&a&&(e.xp6(1),e.Q6J("loading",n.isStartStep)("label","Start step "+(n.currentStep+1)),e.xp6(2),e.lnq("",n.employeeModel.firstName||""," ",n.employeeModel.middleName||""," ",n.employeeModel.lastName||"",""),e.xp6(8),e.Q6J("linear",!0),e.xp6(2),e.Q6J("editable",n.editableSteps[0]),e.xp6(2),e.Q6J("ngIf",n.isStartStep),e.xp6(1),e.Q6J("editable",n.editableSteps[1]),e.xp6(2),e.Q6J("ngIf",n.isStartStep),e.xp6(1),e.Q6J("editable",n.editableSteps[2]),e.xp6(2),e.Q6J("ngIf",n.isStartStep),e.xp6(1),e.Q6J("editable",n.editableSteps[3]),e.xp6(2),e.Oqu(n.isStartStep?"Adding your face. Please wait for a few minutes.":"Click on the button above to start."),e.xp6(1),e.Q6J("ngIf",n.isStartStep),e.xp6(2),e.Q6J("isOpenCamera",n.isOpenCamera))},dependencies:[T.O5,rt.FN,Q.Hw,J.RK,f.uh,f.xY,j.d,st.C0,st.Vq,Gn.pW,x.xw,x.Wh,x.yH,U.zx,zn]})}return o})(),qe=(()=>{class o{constructor(t){this.http=t,this.baseUrl=Me.NZ.apiLeaveTypeManagement}getAllLeaveType(){return this.http.get(`${this.baseUrl}/GetAllLeaveType`)}saveLeaveType(t){return this.http.post(`${this.baseUrl}/SaveLeaveType`,t)}deleteLeaveType(t){return this.http.delete(`${this.baseUrl}/DeleteLeaveType/${t}`)}deleteLeaveTypes(t){return this.http.post(`${this.baseUrl}/DeleteLeaveTypes`,t)}static#e=this.\u0275fac=function(a){return new(a||o)(e.LFG(Ae.eN))};static#t=this.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})(),Ue=(()=>{class o{constructor(t,a,n,l,i,s,c){this.dialModalRef=t,this.data=a,this.leaveEntitlementService=n,this.leaveTypeService=l,this.messageService=i,this.frmBuilder=s,this.attendanceService=c,this.destroy$=new R.x,this.leaveEntitlements=[],this.leaveTypes=[],this.usedAnnualLeavePercentage=null,this.usedSeniorityLeavePercentage=null,this.usedUnpaidLeavePercentage=null,this.usedTransferLeavePercentage=null,this.order=0,this.isApply=!1,this.isLoadingChart=!1,this.listAttendanceWeeks=[],this.listTypeOfWeek=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],this.totalDurationWeekDisplay="",this.timeRangeDisplay="",this.frmDateRange=new m.cw({startDate:new m.NI("",[m.kI.required]),endDate:new m.NI("",[m.kI.required])}),this.pagingAttendanceRange=new et,this.data.model&&(this.employeeModel=this.data.model)}ngOnInit(){var t=this;return(0,p.Z)(function*(){yield t.initData()})()}initData(){var t=this;return(0,p.Z)(function*(){t.rangeWeekDefault={startDate:re(t.getStartOfWeek(),"mm-dd-yyyy 0:00:00"),endDate:re(t.getEndOfWeek(),"mm-dd-yyyy 23:59:59")},t.frmDateRange.setValue({startDate:t.getStartOfWeek().toString(),endDate:t.getEndOfWeek().toString()}),t.leaveEntitlementService.getLeaveEntitlementByEmployeeId(t.employeeModel.userId).subscribe(a=>{a.result&&a.result.length>0&&a.result.forEach(n=>{switch(n.leaveTypeId){case I.Annually:t.annualLeaveEntitlement=n,t.usedAnnualLeavePercentage=(n.usableLeave-n.usedLeave)/n.usableLeave*100;break;case I.Seniority:t.seniorityLeaveEntitlement=n,t.usedSeniorityLeavePercentage=(n.usableLeave-n.usedLeave)/n.usableLeave*100;break;case I.Transfer:t.transferLeaveEntitlement=n,t.usedTransferLeavePercentage=(n.usableLeave-n.usedLeave)/n.usableLeave*100;break;case I.UnPaid:t.unpaidLeaveEntitlement=n,t.usedUnpaidLeavePercentage=(n.usableLeave-n.usedLeave)/n.usableLeave*100}})}),yield t.setupChart()})()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}setupChart(){var t=this;return(0,p.Z)(function*(){t.isLoadingChart=!t.isLoadingChart;var a=[],n=[];if(t.frmDateRange.valid){t.timeRangeDisplay=t.getMonthName(t.frmDateRange.get("startDate")?.value)+" "+t.getDateName(t.frmDateRange.get("startDate")?.value)+" - "+t.getMonthName(t.frmDateRange.get("endDate")?.value)+" "+t.getDateName(t.frmDateRange.get("endDate")?.value);var l=new Date(t.frmDateRange.get("startDate")?.value);l.setHours(0,0,0);var i=new Date(t.frmDateRange.get("endDate")?.value);i.setHours(23,59,59);var s={startDate:l.toISOString(),endDate:i.toISOString()};t.pagingAttendanceRange.rangeDateValue=s;var c=yield t.attendanceService.getAttendanceRange(t.employeeModel?.userId,t.pagingAttendanceRange).pipe((0,k.R)(t.destroy$)).toPromise();c.result&&c.result.length>0&&(t.listAttendanceWeeks=c.result);const S=new Date(t.frmDateRange.get("startDate")?.value);S.setHours(0,0,0,0);const M=new Date(t.frmDateRange.get("endDate")?.value);M.setHours(0,0,0,0);const D=new Date(S);for(D.setHours(0,0,0,0);D<=M;){var d=0;t.listAttendanceWeeks.map(q=>{var A=new Date(q.punchinDate);A?.getDate()===D?.getDate()&&A?.getMonth()===D?.getMonth()&&A?.getFullYear()===D?.getFullYear()&&(d+=q.duration)}),a.push(Number(d.toFixed(2))),n.push(t.listTypeOfWeek[D.getDay()]),D.setDate(D.getDate()+1)}}var h=0;a.map(S=>h+=S),t.totalDurationWeekDisplay=Math.floor(h)+"h"+Math.round(h%1*60)+"m";const w=[];for(let S=0;S<a.length;S++)w.push(25);t.chartOption={title:{left:"15%",subtext:"Total duration: "+t.totalDurationWeekDisplay,textAlign:"center"},xAxis:[{type:"category",data:n,axisTick:{alignWithLabel:!0}}],yAxis:[{type:"value"}],series:[{type:"bar",itemStyle:{color:"rgba(0,0,0,0.05)"},barGap:"-100%",barCategoryGap:"40%",barWidth:"20%",data:w,animation:!1},{type:"bar",barWidth:"20%",label:{show:!0,position:"top",formatter:S=>t.formatDurationEchart(S.value)},itemStyle:{},data:a.map(S=>({value:S,itemStyle:{color:t.handleDisplayDurationEchart(S)}}))}]},t.isLoadingChart=!t.isLoadingChart})()}setupDataFilter(t){var a=this;return(0,p.Z)(function*(){switch(t){case"prev":a.order-=1;break;case"next":a.order+=1;break;case"this":a.order=0}var n=new Date(a.rangeWeekDefault.startDate),l=new Date(a.rangeWeekDefault.endDate);n.setDate(n.getDate()+7*a.order),l.setDate(l.getDate()+7*a.order),a.frmDateRange.setValue({startDate:n.toString(),endDate:l.toString()}),yield a.setupChart()})()}getStartOfWeek(){const t=new Date,a=t.getDay(),l=a>=1?a-1:6+a,i=new Date(t);return i.setDate(t.getDate()-l),i}getEndOfWeek(){const t=new Date,a=t.getDay(),l=0>=a?0-a:7-a+0,i=new Date(t);return i.setDate(t.getDate()+l),i}getDateName(t){return new Date(t).getDate().toString()}getMonthName(t){const l=new Date(t)?.getMonth();return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][l]}formatDurationEchart(t){return t?Math.floor(t)+"h"+Math.round(t%1*60)+"m":"0"}handleDisplayDuration(t,a=!1){if(a)return t?.punchoutDate?t?.duration<9?"#ff0009":t?.duration>=10?"#008080":"#8dc63f":"#ffaa00"}handleDisplayDurationEchart(t){return t<9?"#ff0009":t>=10?"#008080":"#8dc63f"}closeDialog(){this.dialModalRef.close(!1)}rangeDateChange(t,a){if(!0===a){if(t.value){const n=new je.c;n.endDate=re(this.frmDateRange.value.endDate,"mm-dd-yyyy 23:59:59"),n.startDate=re(this.frmDateRange.value.startDate,"mm-dd-yyyy 0:00:00"),this.isApply=!0}}else this.isApply=!1}clearDate(t){t.stopPropagation(),this.frmDateRange.reset({startDate:"",endDate:""}),this.isApply=!0}static#e=this.\u0275fac=function(a){return new(a||o)(e.Y36(f.so),e.Y36(f.WI),e.Y36(Te),e.Y36(qe),e.Y36(L.ez),e.Y36(u.GW),e.Y36(we.v))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-employee-detail-dialog"]],decls:103,vars:71,consts:[["mat-dialog-title","",1,"d-flex","flex-wrap",2,"margin","unset","padding","1px 10px 1px 28px"],["icon","pi pi-times","styleClass","p-button-rounded p-button-secondary p-button-text",1,"ml-auto",3,"click"],[1,"mat-typography","mat-dialog-container"],["fxLayout","column","fxLayoutAlign","start center","fxLayoutGap","10px",1,"col-container"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","20px",1,"header-card-container"],["fxLayout","row","fxLayoutAlign","start center",1,"custom-card","user-card",2,"background-color","#F3F5F9"],["size","large","color","#fff",1,"custom-nb-user",3,"name","onlyPicture","picture"],["fxLayout","column","fxLayoutAlign","center start"],[1,"fs-14","header-text"],[1,"fs-13"],["fxLayout","column","fxLayoutAlign","center center"],[1,"margin-circle",3,"percent","space","radius","outerStrokeWidth","innerStrokeWidth","outerStrokeColor","animation","animationDuration","titleFontSize","title","maxPercent"],[1,"margin-circle",3,"percent","space","radius","outerStrokeWidth","innerStrokeWidth","outerStrokeColor","animation","titleFontSize","title","animationDuration","maxPercent"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","10px",1,"h-100","w-100",2,"padding-bottom","10px"],["fxLayout","column","fxLayoutAlign","start start","fxLayoutGap","5px",1,"custom-card","user-infor-card","h-100"],[1,"fs-16","c-black","w-100"],["fxLayout","column","fxLayoutAlign","start start",1,"w-100"],[1,"header-info-text","fs-14"],["fxLayout","column","fxLayoutAlign","start start",1,"custom-card","h-100","w-100"],["fxLayout","row","fxLayoutAlign","start start","fxFlex","40"],["fxFlex","100","fxLayout","row","fxLayoutAlign","center start"],["fxFlex","60","echarts","",2,"width","700px","height","220px","margin-top","30px",3,"options","loading"],["fxFlex","40",2,"margin-bottom","100px","text-align","center"],[1,"fs-13",2,"color","black"],["mat-raised-button","",1,"button-app-function",2,"background-color","#b45cea","color","white","font-size","13px",3,"click"],["mat-raised-button","",1,"button-app-function","background-gradient",2,"background-color","#b45cea","color","white","font-size","13px",3,"click"],["fxLayout","row","fxLayoutAlign","start start","fxFlex","60",1,"attendance-management","w-100"],[1,"w-100",3,"scrollHeight","isOnlyCurrentUser","currentUser"]],template:function(a,n){1&a&&(e.TgZ(0,"div",0)(1,"p-button",1),e.NdJ("click",function(){return n.closeDialog()}),e.qZA()(),e._UZ(2,"mat-divider"),e.TgZ(3,"mat-dialog-content",2)(4,"div",3)(5,"div",4)(6,"div",5),e._UZ(7,"nb-user",6),e.TgZ(8,"div",7)(9,"span",8),e._uU(10),e.qZA(),e.TgZ(11,"span",9),e._uU(12),e.qZA()()(),e.TgZ(13,"div",10),e._UZ(14,"circle-progress",11),e.TgZ(15,"span",8),e._uU(16,"Annual Leaves"),e.qZA()(),e.TgZ(17,"div",10),e._UZ(18,"circle-progress",11),e.TgZ(19,"span",8),e._uU(20,"Seniority Leaves"),e.qZA()(),e.TgZ(21,"div",10),e._UZ(22,"circle-progress",12),e.TgZ(23,"span",8),e._uU(24,"Transfer Leaves"),e.qZA()(),e.TgZ(25,"div",10),e._UZ(26,"circle-progress",11),e.TgZ(27,"span",8),e._uU(28,"Unpaid Leaves"),e.qZA()()(),e.TgZ(29,"div",13)(30,"div",14)(31,"span",15),e._uU(32,"Employee Information"),e.qZA(),e.TgZ(33,"div",16)(34,"span",17),e._uU(35,"First Name"),e.qZA(),e.TgZ(36,"span",9),e._uU(37),e.qZA()(),e.TgZ(38,"div",16)(39,"span",17),e._uU(40,"Middle Name"),e.qZA(),e.TgZ(41,"span",9),e._uU(42),e.qZA()(),e.TgZ(43,"div",16)(44,"span",17),e._uU(45,"Last Name"),e.qZA(),e.TgZ(46,"span",9),e._uU(47),e.qZA()(),e.TgZ(48,"div",16)(49,"span",17),e._uU(50,"Job title"),e.qZA(),e.TgZ(51,"span",9),e._uU(52),e.qZA()(),e.TgZ(53,"div",16)(54,"span",17),e._uU(55,"Gender"),e.qZA(),e.TgZ(56,"span",9),e._uU(57),e.qZA()(),e.TgZ(58,"div",16)(59,"span",17),e._uU(60,"Birth"),e.qZA(),e.TgZ(61,"span",9),e._uU(62),e.ALo(63,"dateFormat"),e.qZA()(),e.TgZ(64,"div",16)(65,"span",17),e._uU(66,"Email"),e.qZA(),e.TgZ(67,"span",9),e._uU(68),e.qZA()(),e.TgZ(69,"div",16)(70,"span",17),e._uU(71,"Phone"),e.qZA(),e.TgZ(72,"span",9),e._uU(73),e.qZA()(),e.TgZ(74,"div",16)(75,"span",17),e._uU(76,"Nationality"),e.qZA(),e.TgZ(77,"span",9),e._uU(78),e.qZA()(),e.TgZ(79,"div",16)(80,"span",17),e._uU(81,"Date Start Contract"),e.qZA(),e.TgZ(82,"span",9),e._uU(83),e.ALo(84,"dateFormat"),e.qZA()()(),e.TgZ(85,"div",18)(86,"div",19)(87,"div",20),e._UZ(88,"div",21),e.TgZ(89,"div",22)(90,"div",23),e._uU(91),e.qZA(),e.TgZ(92,"div")(93,"button",24),e.NdJ("click",function(){return n.setupDataFilter("prev")}),e.TgZ(94,"mat-icon"),e._uU(95,"arrow_back_ios"),e.qZA()(),e.TgZ(96,"button",25),e.NdJ("click",function(){return n.setupDataFilter("this")}),e._uU(97," This Week "),e.qZA(),e.TgZ(98,"button",24),e.NdJ("click",function(){return n.setupDataFilter("next")}),e.TgZ(99,"mat-icon"),e._uU(100,"arrow_forward_ios"),e.qZA()()()()()(),e.TgZ(101,"div",26),e._UZ(102,"app-attendance-managment",27),e.qZA()()()()()),2&a&&(e.xp6(7),e.Q6J("name",(null==n.employeeModel?null:n.employeeModel.firstName)+" "+(null==n.employeeModel?null:n.employeeModel.middleName)+" "+(null==n.employeeModel?null:n.employeeModel.lastName))("onlyPicture",!0)("picture",null==n.employeeModel?null:n.employeeModel.avatarUrl),e.xp6(3),e.lnq("",(null==n.employeeModel?null:n.employeeModel.firstName)||""," ",(null==n.employeeModel?null:n.employeeModel.middleName)||""," ",(null==n.employeeModel?null:n.employeeModel.lastName)||"",""),e.xp6(2),e.Oqu(n.employeeModel.jobTitle||"No position"),e.xp6(2),e.Q6J("percent",n.usedAnnualLeavePercentage)("space",-8)("radius",45)("outerStrokeWidth",8)("innerStrokeWidth",8)("outerStrokeColor",n.usedAnnualLeavePercentage>=67&&n.usedAnnualLeavePercentage<=100?"#4CC790":n.usedAnnualLeavePercentage>=33&&n.usedAnnualLeavePercentage<67?"#3c9ee5":"#ff9f00")("animation",!0)("animationDuration",300)("titleFontSize","14px")("title",n.annualLeaveEntitlement?((null==n.annualLeaveEntitlement?null:n.annualLeaveEntitlement.usableLeave)-(null==n.annualLeaveEntitlement?null:n.annualLeaveEntitlement.usedLeave)).toFixed(1)+"/"+(null==n.annualLeaveEntitlement?null:n.annualLeaveEntitlement.usableLeave.toFixed(1))||0:"0/0")("maxPercent",100),e.xp6(4),e.Q6J("percent",n.usedSeniorityLeavePercentage)("space",-8)("radius",45)("outerStrokeWidth",8)("innerStrokeWidth",8)("outerStrokeColor",n.usedSeniorityLeavePercentage>=67&&n.usedSeniorityLeavePercentage<=100?"#4CC790":n.usedSeniorityLeavePercentage>=33&&n.usedSeniorityLeavePercentage<67?"#3c9ee5":"#ff9f00")("animation",!0)("animationDuration",300)("titleFontSize","14px")("title",n.seniorityLeaveEntitlement?((null==n.seniorityLeaveEntitlement?null:n.seniorityLeaveEntitlement.usableLeave)-(null==n.seniorityLeaveEntitlement?null:n.seniorityLeaveEntitlement.usedLeave)).toFixed(1)+"/"+(null==n.seniorityLeaveEntitlement?null:n.seniorityLeaveEntitlement.usableLeave.toFixed(1))||0:"0/0")("maxPercent",100),e.xp6(4),e.Q6J("percent",n.usedTransferLeavePercentage)("space",-8)("radius",45)("outerStrokeWidth",8)("innerStrokeWidth",8)("outerStrokeColor",n.usedTransferLeavePercentage>=67&&n.usedTransferLeavePercentage<=100?"#4CC790":n.usedTransferLeavePercentage>=33&&n.usedTransferLeavePercentage<67?"#3c9ee5":"#ff9f00")("animation",!0)("titleFontSize","14px")("title",n.transferLeaveEntitlement?((null==n.transferLeaveEntitlement?null:n.transferLeaveEntitlement.usableLeave)-(null==n.transferLeaveEntitlement?null:n.transferLeaveEntitlement.usedLeave)).toFixed(1)+"/"+(null==n.transferLeaveEntitlement?null:n.transferLeaveEntitlement.usableLeave.toFixed(1))||0:"0/0")("animationDuration",300)("maxPercent",100),e.xp6(4),e.Q6J("percent",n.usedUnpaidLeavePercentage)("space",-8)("radius",45)("outerStrokeWidth",8)("innerStrokeWidth",8)("outerStrokeColor",n.usedUnpaidLeavePercentage>=67&&n.usedUnpaidLeavePercentage<=100?"#4CC790":n.usedUnpaidLeavePercentage>=33&&n.usedUnpaidLeavePercentage<67?"#3c9ee5":"#ff9f00")("animation",!0)("animationDuration",300)("titleFontSize","14px")("title",n.unpaidLeaveEntitlement?((null==n.unpaidLeaveEntitlement?null:n.unpaidLeaveEntitlement.usableLeave)-(null==n.unpaidLeaveEntitlement?null:n.unpaidLeaveEntitlement.usedLeave)).toFixed(1)+"/"+(null==n.unpaidLeaveEntitlement?null:n.unpaidLeaveEntitlement.usableLeave.toFixed(1))||0:"0/0")("maxPercent",100),e.xp6(11),e.Oqu((null==n.employeeModel?null:n.employeeModel.firstName)||"none"),e.xp6(5),e.Oqu((null==n.employeeModel?null:n.employeeModel.middleName)||"none"),e.xp6(5),e.Oqu((null==n.employeeModel?null:n.employeeModel.lastName)||"none"),e.xp6(5),e.Oqu((null==n.employeeModel?null:n.employeeModel.jobTitle)||"none"),e.xp6(5),e.Oqu((null==n.employeeModel?null:n.employeeModel.gender)||"none"),e.xp6(5),e.Oqu(e.lcZ(63,67,null==n.employeeModel?null:n.employeeModel.birth)),e.xp6(6),e.Oqu((null==n.employeeModel?null:n.employeeModel.email)||"none"),e.xp6(5),e.Oqu((null==n.employeeModel?null:n.employeeModel.phoneNumber)||"none"),e.xp6(5),e.Oqu((null==n.employeeModel?null:n.employeeModel.nationality)||"none"),e.xp6(5),e.Oqu(e.lcZ(84,69,null==n.employeeModel?null:n.employeeModel.dateStartContract)),e.xp6(5),e.Q6J("options",n.chartOption)("loading",n.isLoadingChart),e.xp6(3),e.Oqu(n.timeRangeDisplay),e.xp6(11),e.Q6J("scrollHeight","320px")("isOnlyCurrentUser",!0)("currentUser",n.employeeModel))},styles:[".button-app-function[_ngcontent-%COMP%]{margin-right:10px!important;background-color:#b45cea;color:#fff}.background-gradient[_ngcontent-%COMP%]{background:linear-gradient(to right,#b45cea,#ff9393)}.col-container[_ngcontent-%COMP%]{height:100%;width:100%;padding-bottom:10px}.mat-dialog-container[_ngcontent-%COMP%]{height:calc(100% - 51px);width:100%}.custom-card[_ngcontent-%COMP%]{border:1px solid #ccc!important;border-radius:16px;padding:10px}.user-card[_ngcontent-%COMP%]{width:300px}.leave-card[_ngcontent-%COMP%]{width:400px;height:117.6px}.rounded-circle[_ngcontent-%COMP%]{border-radius:50%!important}.custom-nb-user[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;margin-right:10px}[_nghost-%COMP%]     .custom-nb-user .user-picture{width:6rem!important;cursor:pointer;height:6rem!important}.header-text[_ngcontent-%COMP%]{color:#000;font-weight:500}.c-black[_ngcontent-%COMP%]{color:#000}.header-card-container[_ngcontent-%COMP%], .w-100[_ngcontent-%COMP%]{width:100%}.h-100[_ngcontent-%COMP%]{height:100%}.user-infor-card[_ngcontent-%COMP%]{width:300px}.header-info-text[_ngcontent-%COMP%]{color:#54507c;font-weight:500}.attendance-management[_ngcontent-%COMP%]{overflow:auto}.margin-circle[_ngcontent-%COMP%]{margin:8px 8px 3px}.flex-wrapper[_ngcontent-%COMP%]{display:flex;flex-flow:row nowrap}.single-chart[_ngcontent-%COMP%]{width:117px}.circular-chart[_ngcontent-%COMP%]{display:block;margin:10px auto;max-width:80%;max-height:250px}.circle-bg[_ngcontent-%COMP%]{fill:none;stroke:#eee;stroke-width:3.8}.circle[_ngcontent-%COMP%]{fill:none;stroke-width:2.8;stroke-linecap:round;animation:_ngcontent-%COMP%_progress 1s ease-out forwards}@keyframes _ngcontent-%COMP%_progress{0%{stroke-dasharray:0 100}}.circular-chart.orange[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{stroke:#ff9f00}.circular-chart.green[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{stroke:#4cc790}.circular-chart.blue[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{stroke:#3c9ee5}.percentage[_ngcontent-%COMP%]{fill:#666;font-family:sans-serif;font-size:.5em;text-anchor:middle}"]})}return o})();var Se=g(6879),$e=g(690),b=g(4860),ce=g(3767);let oa=(()=>{class o{transform(t){var a="";return t&&t?.length>0&&(a=t.map(l=>l.displayName).join(", ")),a}static#e=this.\u0275fac=function(a){return new(a||o)};static#t=this.\u0275pipe=e.Yjl({name:"roles",type:o,pure:!0})}return o})();function la(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",12),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.addEditEmployee())}),e.qZA()}}function ia(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",13),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.deleteEmployee())}),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("label",t.Delete)("disabled",!t.selectedEmployees||!(null!=t.selectedEmployees&&t.selectedEmployees.length))}}function ra(o,r){if(1&o&&(e.YNc(0,la,1,0,"button",10),e.YNc(1,ia,1,2,"button",11)),2&o){const t=e.oxw();e.Q6J("ngIf",t.isAdmin),e.xp6(1),e.Q6J("ngIf",t.isAdmin)}}function sa(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",14),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(),l=e.MAs(5);return e.KtG(n.clear(l))}),e.qZA(),e.TgZ(1,"button",15),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.reset())}),e.qZA()}}function ua(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",16)(1,"span",17),e._UZ(2,"i",18),e.TgZ(3,"input",19),e.NdJ("input",function(n){e.CHM(t),e.oxw();const l=e.MAs(5);return e.KtG(l.filterGlobal(n.target.value,"contains"))}),e.qZA()()()}}function ca(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"p-dropdown",40),e.NdJ("onChange",function(n){const i=e.CHM(t).filterCallback;return e.KtG(i(null==n?null:n.value))}),e.qZA()}if(2&o){const t=r.$implicit,a=e.oxw(2);e.Q6J("ngModel",t)("options",a.lstRoles)}}function da(o,r){1&o&&(e.TgZ(0,"div",41)(1,"span",42),e._uU(2,"Agent Picker"),e.qZA()())}function pa(o,r){if(1&o&&(e.TgZ(0,"div",45),e._UZ(1,"img",46),e.TgZ(2,"span",47),e._uU(3),e.qZA()()),2&o){const t=r.$implicit;e.xp6(1),e.s9C("src",null==t?null:t.avatarUrl,e.LSH),e.xp6(2),e.Oqu(null==t?null:t.displayName)}}function ma(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"p-multiSelect",43),e.NdJ("onChange",function(n){const i=e.CHM(t).filterCallback;return e.KtG(i(n.value))}),e.YNc(1,pa,4,2,"ng-template",44),e.qZA()}if(2&o){const t=r.$implicit,a=e.oxw(2);e.Q6J("ngModel",t)("options",a.dataTable)}}function ga(o,r){1&o&&(e.TgZ(0,"tr")(1,"th",20),e._UZ(2,"p-tableHeaderCheckbox"),e.qZA(),e.TgZ(3,"th",21),e._uU(4," Employee "),e._UZ(5,"p-columnFilter",22)(6,"p-sortIcon",23),e.qZA(),e.TgZ(7,"th",24),e._uU(8," Email "),e._UZ(9,"p-columnFilter",25),e.qZA(),e.TgZ(10,"th",26),e._uU(11," Role "),e.TgZ(12,"p-columnFilter",27),e.YNc(13,ca,1,2,"ng-template",28),e.qZA()(),e.TgZ(14,"th",29),e._uU(15," Phone Number "),e._UZ(16,"p-sortIcon",30),e.qZA(),e.TgZ(17,"th",31),e._uU(18," Job Title "),e._UZ(19,"p-columnFilter",32),e.qZA(),e.TgZ(20,"th",31),e._uU(21," Manage By "),e.TgZ(22,"p-columnFilter",33),e.YNc(23,da,3,0,"ng-template",7),e.YNc(24,ma,2,2,"ng-template",28),e.qZA()(),e.TgZ(25,"th",34),e._uU(26," Gender "),e._UZ(27,"p-columnFilter",35)(28,"p-sortIcon",36),e.qZA(),e.TgZ(29,"th",37),e._uU(30," Nationality "),e._UZ(31,"p-columnFilter",38),e.qZA(),e._UZ(32,"th",39),e.qZA()),2&o&&(e.xp6(22),e.Q6J("showMatchModes",!1)("showOperator",!1)("showAddButton",!1))}function fa(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"nb-user",50),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,l=e.oxw();return e.KtG(l.openEmployeeDetail(n.manager))}),e.qZA()}if(2&o){const t=e.oxw().$implicit;e.Q6J("name",((null==t||null==t.manager?null:t.manager.firstName)||"")+" "+((null==t||null==t.manager?null:t.manager.middleName)||"")+" "+((null==t||null==t.manager?null:t.manager.lastName)||""))("showTitle",!1)("picture",null==t||null==t.manager?null:t.manager.avatarUrl)}}function ha(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",56),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,l=e.oxw();return e.KtG(l.addEditEmployee(n))}),e.qZA()}}function _a(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",57),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,l=e.oxw();return e.KtG(l.deleteEmployee(n))}),e.qZA()}}function va(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",58),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,l=e.oxw();return e.KtG(l.addEmployeeFaceRecog(n))}),e.qZA()}}function ya(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"tr",48)(1,"td"),e._UZ(2,"p-tableCheckbox",49),e.qZA(),e.TgZ(3,"td")(4,"nb-user",50),e.NdJ("click",function(){const l=e.CHM(t).$implicit,i=e.oxw();return e.KtG(i.openEmployeeDetail(l))}),e.qZA()(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.ALo(9,"roles"),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.qZA(),e.TgZ(12,"td"),e._uU(13),e.qZA(),e.TgZ(14,"td"),e.YNc(15,fa,1,3,"nb-user",51),e.qZA(),e.TgZ(16,"td"),e._uU(17),e.qZA(),e.TgZ(18,"td"),e._UZ(19,"img",52),e._uU(20),e.qZA(),e.TgZ(21,"td"),e.YNc(22,ha,1,0,"button",53),e.YNc(23,_a,1,0,"button",54),e.YNc(24,va,1,0,"button",55),e.qZA()()}if(2&o){const t=r.$implicit,a=e.oxw();e.Q6J("pEditableRow",t),e.xp6(2),e.Q6J("value",t),e.xp6(2),e.Q6J("name",null==t?null:t.displayName)("showTitle",!1)("picture",null==t?null:t.avatarUrl),e.xp6(2),e.Oqu(null==t?null:t.email),e.xp6(2),e.hij(" ",e.lcZ(9,16,t.Roles)," "),e.xp6(3),e.Oqu(null==t?null:t.phoneNumber),e.xp6(2),e.Oqu(null==t?null:t.jobTitle),e.xp6(2),e.Q6J("ngIf",null==t?null:t.manager),e.xp6(2),e.Oqu(null==t?null:t.gender),e.xp6(2),e.Q6J("src",a.getNationalityImg(null==t?null:t.nationality),e.LSH),e.xp6(1),e.hij(" ",null==t?null:t.nationality," "),e.xp6(2),e.Q6J("ngIf",t.ownerId==a.currentUser.userId||a.isAdmin),e.xp6(1),e.Q6J("ngIf",a.isAdmin),e.xp6(1),e.Q6J("ngIf",t.ownerId==a.currentUser.userId||a.isAdmin)}}function ba(o,r){}const Ca=function(){return{"min-width":"50rem",height:"100%"}},Ta=function(o){return[10,25,o]},xa=function(){return["displayName"]};let wa=(()=>{class o{constructor(t,a,n,l,i,s){this.employeeService=t,this.roleService=a,this.dataStateService=n,this.dialog=l,this.authService=i,this.messageService=s,this.destroy$=new R.x,this.lstRoles=[],this.lstEmployees=[],this.isAdmin=!1,this.first=0,this.rows=10,this.loading=!1,this.authService.onTokenChange().pipe((0,k.R)(this.destroy$)).subscribe(c=>{c.isValid()&&(this.currentUser=c.getPayload().user)}),this.roleService.getRoles().subscribe(c=>{null!=c.result&&c.result.length>0&&(this.lstRoles=[...c.result],this.adminRole=this.lstRoles.find(d=>"admin"==d.roleName.toLocaleLowerCase().trim()),this.currentUser.roles.length>0&&this.adminRole&&(this.isAdmin=-1!=this.currentUser.roles.findIndex(d=>d.roleId===this.adminRole.roleId)))}),this.dataStateService.getListCountries().subscribe(c=>{this.lstNationalities=c?.data?c?.data?.map(d=>Object.assign({text:`${d?.name}`,value:d?.name,img:d?.flag})):[]})}ngOnInit(){var t=this;return(0,p.Z)(function*(){t.loading=!t.loading,yield t.refreshData(),t.loadAllEmployeeData(),t.loading=!t.loading})()}loadAllEmployeeData(){var t=this;return(0,p.Z)(function*(){if(t.lstEmployees?.length<=0){var a=yield(0,fe.n)(t.employeeService.getAllEmployee());a.result&&(t.lstEmployees=a.result)}})()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}refreshData(){var t=this;return(0,p.Z)(function*(){t.loading=!t.loading;var a=yield t.employeeService.getEmployeeCurrentUserRole(t.currentUser.roles).pipe((0,k.R)(t.destroy$)).toPromise();a.result&&(t.dataTable=a.result,t.dataTable.map(n=>{n.roleId=[],n?.Roles?.map(l=>{n?.roleId?.push(l.roleId)})}),t.dataTable.map(n=>n.displayName=`${n.firstName||""}  ${n.middleName||""}  ${n.lastName||""}`)),t.loading=!t.loading})()}addEditEmployee(t=null){var a=this;return(0,p.Z)(function*(){a.employeeModel=t,a.dialog.open(Hn.d,{disableClose:!0,height:"100vh",width:"600px",autoFocus:!1,backdropClass:"custom-backdrop",hasBackdrop:!0,data:{model:t,action:null===t?Z.t.Add:Z.t.Edit,listEmployees:[],isAdmin:a.isAdmin}}).afterClosed().subscribe(function(){var l=(0,p.Z)(function*(i){i&&(yield a.refreshData())});return function(i){return l.apply(this,arguments)}}())})()}next(){this.first=this.first+this.rows}prev(){this.first=this.first-this.rows}reset(){var t=this;return(0,p.Z)(function*(){t.first=0,yield t.refreshData()})()}pageChange(t){this.first=t.first,this.rows=t.rows}clear(t){t.clear()}deleteSelectedEmployee(){}addEmployeeFaceRecog(t=null){var a=this;this.employeeModel=t,this.dialog.open(aa,{disableClose:!0,height:"calc(100% - 30px)",width:"80%",backdropClass:"custom-backdrop",hasBackdrop:!0,autoFocus:!1,data:{model:t}}).afterClosed().subscribe(function(){var l=(0,p.Z)(function*(i){i&&(yield a.refreshData())});return function(i){return l.apply(this,arguments)}}())}getNationalityImg(t){return this.lstNationalities?.find(a=>a.value.toLowerCase()===t.toLowerCase())?.img}openEmployeeDetail(t=null){this.dialog.open(Ue,{width:"90vw",height:"90vh",backdropClass:"custom-backdrop",hasBackdrop:!0,data:{model:t,action:Z.t.Edit}}).afterClosed().subscribe(a=>{})}deleteEmployee(t){var a;a=t?[t.userId]:this.selectedEmployees.map(l=>l.userId),this.dialog.open($,{width:"auto",height:"auto",backdropClass:"custom-backdrop",hasBackdrop:!0,autoFocus:!1,data:{message:`Do you wish to remove ${a.length} item(s)?`}}).afterClosed().subscribe(l=>{l&&this.employeeService.deleteEmployees(a).subscribe(i=>{i.result?(this.messageService.add({key:"toast1",severity:"success",summary:"Success",detail:"Delete successfully!",life:2e3}),this.refreshData()):this.messageService.add({key:"toast1",severity:"warn",summary:"Warning",detail:"Failed!",life:2e3})})})}static#e=this.\u0275fac=function(a){return new(a||o)(e.Y36(G.n),e.Y36(Se.U),e.Y36(ne.Q),e.Y36(f.uw),e.Y36(O._o),e.Y36(L.ez))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-employee-management"]],decls:10,vars:15,consts:[[1,"card"],["styleClass","mb-4 gap-2"],["pTemplate","left"],["pTemplate","right"],["styleClass","p-datatable-sm","editMode","row","scrollHeight","700px","dataKey","userId",3,"value","paginator","rows","showCurrentPageReport","tableStyle","rowsPerPageOptions","loading","globalFilterFields","selection","rowHover","scrollable","onPage","selectionChange"],["table",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","paginatorleft"],["pButton","","pRipple","","label","New","icon","pi pi-plus","class","p-button-success p-button-sm mr-2",3,"click",4,"ngIf"],["pButton","","pRipple","","icon","pi pi-trash","class","p-button-danger p-button-sm",3,"label","disabled","click",4,"ngIf"],["pButton","","pRipple","","label","New","icon","pi pi-plus",1,"p-button-success","p-button-sm","mr-2",3,"click"],["pButton","","pRipple","","icon","pi pi-trash",1,"p-button-danger","p-button-sm",3,"label","disabled","click"],["pButton","","label","Clear","icon","pi pi-filter-slash",1,"p-button-outlined","p-button-sm","mr-2",3,"click"],["pButton","","label","Refresh","icon","pi pi-refresh",1,"p-button-outlined","p-button-sm",3,"click"],[1,"flex"],[1,"p-input-icon-left","ml-auto"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search by name",1,"p-inputtext-sm",3,"input"],[2,"width","4rem"],["pSortableColumn","displayName",2,"min-width","150px"],["type","text","field","displayName","display","menu"],["field","displayName"],["pSortableColumn","email",2,"min-width","150px"],["type","text","field","email","display","menu"],["pSortableColumn","role",2,"min-width","150px"],["field","role","matchMode","equals","display","menu"],["pTemplate","filter"],["pSortableColumn","phoneNumber",2,"min-width","150px"],["field","phoneNumber"],[2,"min-width","150px"],["type","text","field","jobTitle","display","menu"],["field","ownerId","matchMode","in","display","menu",3,"showMatchModes","showOperator","showAddButton"],["pSortableColumn","gender",2,"min-width","150px"],["type","text","field","gender","display","menu"],["field","gender"],["pSortableColumn","nationality",2,"min-width","150px"],["type","text","field","nationality","display","menu"],["pSortableColumn","nationality",2,"min-width","200px"],["optionLabel","displayName","optionValue","displayName","placeholder","Any",3,"ngModel","options","onChange"],[1,"px-3","pt-3","pb-0"],[1,"font-bold"],["placeholder","Any",3,"ngModel","options","onChange"],["pTemplate","item"],[1,"inline-block","vertical-align-middle"],["width","24",1,"vertical-align-middle",3,"alt","src"],[1,"ml-1","mt-1"],[3,"pEditableRow"],[3,"value"],["size","small","title","Engineer",1,"custom-nb-user-small",3,"name","showTitle","picture","click"],["class","custom-nb-user-small","size","small","title","Engineer",3,"name","showTitle","picture","click",4,"ngIf"],[1,"custom-display-img",3,"src"],["pButton","","pRipple","","icon","pi pi-pencil","class","p-button-success p-button-sm mr-2",3,"click",4,"ngIf"],["pButton","","pRipple","","icon","pi pi-trash","class","p-button-warning p-button-sm mr-2",3,"click",4,"ngIf"],["pButton","","pRipple","","icon","pi pi-camera","class","p-button-info p-button-sm mr-2",3,"click",4,"ngIf"],["pButton","","pRipple","","icon","pi pi-pencil",1,"p-button-success","p-button-sm","mr-2",3,"click"],["pButton","","pRipple","","icon","pi pi-trash",1,"p-button-warning","p-button-sm","mr-2",3,"click"],["pButton","","pRipple","","icon","pi pi-camera",1,"p-button-info","p-button-sm","mr-2",3,"click"]],template:function(a,n){1&a&&(e.TgZ(0,"div",0)(1,"p-toolbar",1),e.YNc(2,ra,2,2,"ng-template",2),e.YNc(3,sa,2,0,"ng-template",3),e.qZA(),e.TgZ(4,"p-table",4,5),e.NdJ("onPage",function(i){return n.pageChange(i)})("selectionChange",function(i){return n.selectedEmployees=i}),e.YNc(6,ua,4,0,"ng-template",6),e.YNc(7,ga,33,3,"ng-template",7),e.YNc(8,ya,25,18,"ng-template",8),e.YNc(9,ba,0,0,"ng-template",9),e.qZA()()),2&a&&(e.xp6(4),e.Q6J("value",n.dataTable)("paginator",!0)("rows",10)("showCurrentPageReport",!0)("tableStyle",e.DdM(11,Ca))("rowsPerPageOptions",e.VKq(12,Ta,null==n.dataTable?null:n.dataTable.length))("loading",n.loading)("globalFilterFields",e.DdM(14,xa))("selection",n.selectedEmployees)("rowHover",!0)("scrollable",!0))},dependencies:[T.O5,m.JJ,m.On,u.bc,u.YE,L.jx,v.k0$,U.Hq,se.o,xe.Lt,$e.NU,b.iA,b.lQ,b.fz,b.UA,b.Mo,b.D$,b.xl,ce.o,oa],styles:[".custom-display-img[_ngcontent-%COMP%]{max-width:4vh!important;max-height:4vh!important}"]})}return o})();class z{}(0,C.gn)([(0,u.vg)()],z.prototype,"leaveTypeId",void 0),(0,C.gn)([(0,u.vg)()],z.prototype,"leaveTypeName",void 0),(0,C.gn)([(0,u.vg)(),(0,u.uR)({acceptValue:u.Hf.PositiveNumber,message:"Only numberic is allowed"})],z.prototype,"defaultStartDay",void 0),(0,C.gn)([(0,u.vg)(),(0,u.uR)({acceptValue:u.Hf.PositiveNumber,message:"Only numberic is allowed"})],z.prototype,"defaultStartMonth",void 0),(0,C.gn)([(0,u.vg)(),(0,u.uR)({acceptValue:u.Hf.PositiveNumber,message:"Only numberic is allowed"})],z.prototype,"defaultEndDay",void 0),(0,C.gn)([(0,u.vg)(),(0,u.uR)({acceptValue:u.Hf.PositiveNumber,message:"Only numberic is allowed"})],z.prototype,"defaultEndMonth",void 0),(0,C.gn)([(0,u.vg)(),(0,u.uR)({acceptValue:u.Hf.PositiveNumber,message:"Only numberic is allowed"})],z.prototype,"defaultBudget",void 0),(0,C.gn)([(0,u.vg)()],z.prototype,"isPaidSalary",void 0);var Ie=g(9665),ge=g(8033),Fe=g(1379);function Sa(o,r){if(1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.frmLeaveType?null:t.frmLeaveType.controls.leaveTypeName.errorMessage,"")}}function Za(o,r){if(1&o&&(e.TgZ(0,"mat-option",20),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function ka(o,r){if(1&o&&(e.TgZ(0,"mat-option",20),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function Da(o,r){if(1&o&&(e.TgZ(0,"mat-option",20),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function Ma(o,r){if(1&o&&(e.TgZ(0,"mat-option",20),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function Aa(o,r){if(1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.frmLeaveType?null:t.frmLeaveType.controls.defaultBudget.errorMessage,"")}}let La=(()=>{class o{constructor(t,a,n,l,i,s,c,d){this.dialModalRef=t,this.data=a,this.frmBuilder=n,this.authService=l,this.toast=i,this.cdref=s,this.leaveTypeService=c,this.dataStateService=d,this.destroy$=new R.x,this.isLoading=!1,this.listDay=[],this.listMonth=[],this.action=a?.action,this.leaveTypeModel=a?.model??new z,this.authService.onTokenChange().subscribe(h=>{h.isValid()&&(this.user=h.getPayload().user)})}ngOnInit(){this.frmLeaveType=this.frmBuilder.formGroup(z,this.leaveTypeModel),this.dialModalRef.updatePosition({right:"0"});for(var t=1;t<32;t++)this.listDay.push(t);for(t=1;t<13;t++)this.listMonth.push(t);this.action==Z.t.Add&&(this.frmLeaveType.get("defaultStartDay").setValue(1),this.frmLeaveType.get("defaultStartMonth").setValue(1),this.frmLeaveType.get("defaultEndDay").setValue(31),this.frmLeaveType.get("defaultEndMonth").setValue(12))}ngAfterContentChecked(){this.cdref.detectChanges()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}closeDialog(){this.dialModalRef.close()}saveData(){if(this.frmLeaveType?.valid){this.isLoading=!this.isLoading;const t=Object.assign({},this.frmLeaveType?.value);this.leaveTypeService.saveLeaveType(t).subscribe(a=>{a.result?(this.toast.success("Save leave type successfully","Success",{position:v.d6C.BOTTOM_END,duration:3e3}),this.dialModalRef.close(a.result)):this.toast.danger(a.message,"Failure",{position:v.d6C.BOTTOM_END,duration:3e3})}).add(()=>{this.isLoading=!this.isLoading})}}static#e=this.\u0275fac=function(a){return new(a||o)(e.Y36(f.so),e.Y36(f.WI),e.Y36(u.GW),e.Y36(O._o),e.Y36(v.quB),e.Y36(e.sBO),e.Y36(qe),e.Y36(ne.Q))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-add-edit-leave-type"]],decls:49,vars:10,consts:[["fxLayout","row","fxLayoutAlign","start center","mat-dialog-title","",1,"dialog-header",2,"margin","unset","padding","1px 10px 1px 28px",3,"nbSpinner"],["label","Save","icon","pi pi-save","styleClass","p-button-sm",3,"disabled","loading","click"],["fxLayout","row","fxLayoutAlign","end center",1,"ml-auto"],["mat-icon-button","","aria-label","Close the dialog",1,"ml-auto",3,"click"],[1,"mat-typography"],[1,"container",3,"formGroup"],[1,"row"],[1,"col-12"],["appearance","fill"],["matInput","","formControlName","leaveTypeName","autocomplete","off","required","","trim","blur"],[4,"ngIf"],["appearance","fill","trim","blur"],["required","","formControlName","defaultStartDay"],[3,"value",4,"ngFor","ngForOf"],["required","","formControlName","defaultStartMonth"],["required","","formControlName","defaultEndDay"],["required","","formControlName","defaultEndMonth"],["matInput","","formControlName","defaultBudget","autocomplete","off"],[1,"col-12","col-lg-6"],["formControlName","isPaidSalary","status","success"],[3,"value"]],template:function(a,n){1&a&&(e.TgZ(0,"div",0)(1,"p-button",1),e.NdJ("click",function(){return n.saveData()}),e.qZA(),e.TgZ(2,"div",2)(3,"button",3),e.NdJ("click",function(){return n.closeDialog()}),e.TgZ(4,"mat-icon"),e._uU(5,"close"),e.qZA()()()(),e._UZ(6,"mat-divider"),e.TgZ(7,"mat-dialog-content",4)(8,"form",5)(9,"div",6)(10,"div",7)(11,"mat-form-field",8)(12,"mat-label"),e._uU(13,"Leave Type Name"),e.qZA(),e._UZ(14,"input",9),e.YNc(15,Sa,2,1,"mat-error",10),e.qZA()(),e.TgZ(16,"div",7)(17,"mat-form-field",11)(18,"mat-label"),e._uU(19,"Default Start Day"),e.qZA(),e.TgZ(20,"mat-select",12),e.YNc(21,Za,2,2,"mat-option",13),e.qZA()()(),e.TgZ(22,"div",7)(23,"mat-form-field",11)(24,"mat-label"),e._uU(25,"Default Start Month"),e.qZA(),e.TgZ(26,"mat-select",14),e.YNc(27,ka,2,2,"mat-option",13),e.qZA()()(),e.TgZ(28,"div",7)(29,"mat-form-field",11)(30,"mat-label"),e._uU(31,"Default End Day"),e.qZA(),e.TgZ(32,"mat-select",15),e.YNc(33,Da,2,2,"mat-option",13),e.qZA()()(),e.TgZ(34,"div",7)(35,"mat-form-field",11)(36,"mat-label"),e._uU(37,"Default End Month"),e.qZA(),e.TgZ(38,"mat-select",16),e.YNc(39,Ma,2,2,"mat-option",13),e.qZA()()(),e.TgZ(40,"div",7)(41,"mat-form-field",8)(42,"mat-label"),e._uU(43,"Budget Default"),e.qZA(),e._UZ(44,"input",17),e.YNc(45,Aa,2,1,"mat-error",10),e.qZA()(),e.TgZ(46,"div",18)(47,"nb-toggle",19),e._uU(48,"Paid Leave"),e.qZA()()()()()),2&a&&(e.Q6J("nbSpinner",n.isLoading),e.xp6(1),e.Q6J("disabled",!n.frmLeaveType.valid)("loading",n.isLoading),e.xp6(7),e.Q6J("formGroup",n.frmLeaveType),e.xp6(7),e.Q6J("ngIf",(null==n.frmLeaveType||null==n.frmLeaveType.controls||null==n.frmLeaveType.controls.leaveTypeName?null:n.frmLeaveType.controls.leaveTypeName.errors)&&((null==n.frmLeaveType||null==n.frmLeaveType.controls||null==n.frmLeaveType.controls.leaveTypeName?null:n.frmLeaveType.controls.leaveTypeName.dirty)||(null==n.frmLeaveType||null==n.frmLeaveType.controls||null==n.frmLeaveType.controls.leaveTypeName?null:n.frmLeaveType.controls.leaveTypeName.touched))),e.xp6(6),e.Q6J("ngForOf",n.listDay),e.xp6(6),e.Q6J("ngForOf",n.listMonth),e.xp6(6),e.Q6J("ngForOf",n.listDay),e.xp6(6),e.Q6J("ngForOf",n.listMonth),e.xp6(6),e.Q6J("ngIf",(null==n.frmLeaveType||null==n.frmLeaveType.controls||null==n.frmLeaveType.controls.defaultBudget?null:n.frmLeaveType.controls.defaultBudget.errors)&&((null==n.frmLeaveType||null==n.frmLeaveType.controls||null==n.frmLeaveType.controls.defaultBudget?null:n.frmLeaveType.controls.defaultBudget.dirty)||(null==n.frmLeaveType||null==n.frmLeaveType.controls||null==n.frmLeaveType.controls.defaultBudget?null:n.frmLeaveType.controls.defaultBudget.touched))))},dependencies:[T.sg,T.O5,m._Y,m.Fj,m.JJ,m.JL,m.Q7,m.sg,m.u,u.bc,u.VP,u.YE,F.KE,F.hX,F.TO,Ie.Nt,Q.Hw,J.RK,ge.gD,Fe.ey,f.uh,f.xY,j.d,v.Q7R,v.BLq,x.xw,x.Wh,U.zx]})}return o})();function Ea(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",9),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.addEditLeaveType())}),e.qZA()}}function Ra(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",10),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(),l=e.MAs(5);return e.KtG(n.clear(l))}),e.qZA(),e.TgZ(1,"button",11),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.reset())}),e.qZA()}}function Na(o,r){1&o&&(e.TgZ(0,"tr")(1,"th"),e._UZ(2,"p-tableHeaderCheckbox"),e.qZA(),e.TgZ(3,"th",12),e._uU(4," Leave Type Name "),e._UZ(5,"p-columnFilter",13)(6,"p-sortIcon",14),e.qZA(),e.TgZ(7,"th",15),e._uU(8," Is Paid Salary "),e._UZ(9,"p-columnFilter",16)(10,"p-sortIcon",17),e.qZA(),e.TgZ(11,"th",18),e._uU(12," Default Start Day "),e._UZ(13,"p-columnFilter",19)(14,"p-sortIcon",20),e.qZA(),e.TgZ(15,"th",21),e._uU(16," Default Start Month "),e._UZ(17,"p-columnFilter",22)(18,"p-sortIcon",23),e.qZA(),e.TgZ(19,"th",24),e._uU(20," Default End Day "),e._UZ(21,"p-columnFilter",25)(22,"p-sortIcon",26),e.qZA(),e.TgZ(23,"th",27),e._uU(24," Default End Month "),e._UZ(25,"p-columnFilter",28)(26,"p-sortIcon",29),e.qZA(),e.TgZ(27,"th",30),e._uU(28," Default Budget "),e._UZ(29,"p-columnFilter",31)(30,"p-sortIcon",32),e.qZA(),e._UZ(31,"th",33),e.qZA())}function qa(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"tr",34)(1,"td"),e._UZ(2,"p-tableCheckbox",35),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.qZA(),e.TgZ(15,"td"),e._uU(16),e.qZA(),e.TgZ(17,"td")(18,"button",36),e.NdJ("click",function(){const l=e.CHM(t).$implicit,i=e.oxw();return e.KtG(i.addEditLeaveType(l))}),e.qZA()()()}if(2&o){const t=r.$implicit;e.Q6J("pEditableRow",t),e.xp6(2),e.Q6J("value",t),e.xp6(2),e.Oqu(null==t?null:t.leaveTypeName),e.xp6(2),e.Oqu(null==t?null:t.isPaidSalary),e.xp6(2),e.Oqu(null==t?null:t.defaultStartDay),e.xp6(2),e.Oqu(null==t?null:t.defaultStartMonth),e.xp6(2),e.Oqu(null==t?null:t.defaultEndDay),e.xp6(2),e.Oqu(null==t?null:t.defaultEndMonth),e.xp6(2),e.Oqu(null==t?null:t.defaultBudget)}}function Ua(o,r){}const Ia=function(){return{"min-width":"50rem"}},Fa=function(o){return[10,25,o]},Oa=function(){return["leaveTypeName"]};let Ja=(()=>{class o{constructor(t,a){this.leaveTypeService=t,this.dialog=a,this.destroy$=new R.x,this.first=0,this.rows=10,this.loading=!1}ngOnInit(){var t=this;return(0,p.Z)(function*(){t.loading=!t.loading,yield t.refreshData(),t.loading=!t.loading})()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}refreshData(){var t=this;return(0,p.Z)(function*(){t.loading=!t.loading;var a=yield t.leaveTypeService.getAllLeaveType().pipe((0,k.R)(t.destroy$)).toPromise();a.result&&(t.dataTable=a.result),t.loading=!t.loading})()}addEditLeaveType(t=null){var a=this;return(0,p.Z)(function*(){a.leaveTypeModel=t,a.dialog.open(La,{disableClose:!0,height:"100vh",width:"600px",autoFocus:!1,backdropClass:"custom-backdrop",hasBackdrop:!0,data:{model:t,action:null===t?Z.t.Add:Z.t.Edit}}).afterClosed().subscribe(function(){var l=(0,p.Z)(function*(i){i&&(yield a.refreshData())});return function(i){return l.apply(this,arguments)}}())})()}next(){this.first=this.first+this.rows}prev(){this.first=this.first-this.rows}reset(){var t=this;return(0,p.Z)(function*(){t.first=0,yield t.refreshData()})()}pageChange(t){this.first=t.first,this.rows=t.rows}clear(t){t.clear()}deleteLeaveType(t){}deleteSelectedLeaveType(){}static#e=this.\u0275fac=function(a){return new(a||o)(e.Y36(qe),e.Y36(f.uw))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-leave-type-management"]],decls:9,vars:15,consts:[[1,"card"],["styleClass","mb-4 gap-2"],["pTemplate","left"],["pTemplate","right"],["styleClass","p-datatable-sm","editMode","row","scrollHeight","700px","dataKey","leaveTypeId",3,"value","paginator","rows","showCurrentPageReport","tableStyle","rowsPerPageOptions","loading","globalFilterFields","selection","rowHover","scrollable","onPage","selectionChange"],["table",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","paginatorleft"],["pButton","","pRipple","","label","New","icon","pi pi-plus",1,"p-button-sm","p-button-success","mr-2",3,"click"],["pButton","","label","Clear","icon","pi pi-filter-slash",1,"p-button-outlined","p-button-sm",3,"click"],["pButton","","label","Refresh","icon","pi pi-refresh",1,"p-button-outlined","p-button-sm",2,"margin-left","10px",3,"click"],["pSortableColumn","leaveTypeName","stylestyle","min-width:150px"],["type","text","field","leaveTypeName","display","menu"],["field","leaveTypeName"],["pSortableColumn","isPaidSalary","stylestyle","min-width:150px"],["type","text","field","isPaidSalary","display","menu"],["field","isPaidSalary"],["pSortableColumn","defaultStartDay","stylestyle","min-width:150px"],["type","text","field","defaultStartDay","display","menu"],["field","defaultStartDay"],["pSortableColumn","defaultStartMonth","stylestyle","min-width:150px"],["type","text","field","defaultStartMonth","display","menu"],["field","defaultStartMonth"],["pSortableColumn","defaultEndDay","stylestyle","min-width:150px"],["type","text","field","defaultEndDay","display","menu"],["field","defaultEndDay"],["pSortableColumn","defaultEndMonth","stylestyle","min-width:150px"],["type","text","field","defaultEndMonth","display","menu"],["field","defaultEndMonth"],["pSortableColumn","defaultBudget","stylestyle","min-width:150px"],["type","text","field","defaultBudget","display","menu"],["field","defaultBudget"],["pSortableColumn","nationality","stylestyle","min-width:150px"],[3,"pEditableRow"],[3,"value"],["pButton","","pRipple","","icon","pi pi-pencil",1,"p-button-sm","p-button-success","mr-2",3,"click"]],template:function(a,n){1&a&&(e.TgZ(0,"div",0)(1,"p-toolbar",1),e.YNc(2,Ea,1,0,"ng-template",2),e.YNc(3,Ra,2,0,"ng-template",3),e.qZA(),e.TgZ(4,"p-table",4,5),e.NdJ("onPage",function(i){return n.pageChange(i)})("selectionChange",function(i){return n.selectedLeaveTypes=i}),e.YNc(6,Na,32,0,"ng-template",6),e.YNc(7,qa,19,9,"ng-template",7),e.YNc(8,Ua,0,0,"ng-template",8),e.qZA()()),2&a&&(e.xp6(4),e.Q6J("value",n.dataTable)("paginator",!0)("rows",10)("showCurrentPageReport",!0)("tableStyle",e.DdM(11,Ia))("rowsPerPageOptions",e.VKq(12,Fa,null==n.dataTable?null:n.dataTable.length))("loading",n.loading)("globalFilterFields",e.DdM(14,Oa))("selection",n.selectedLeaveTypes)("rowHover",!0)("scrollable",!0))},dependencies:[L.jx,U.Hq,b.iA,b.lQ,b.fz,b.UA,b.Mo,b.D$,b.xl,ce.o]})}return o})();class W{}(0,C.gn)([(0,u.vg)()],W.prototype,"leaveEntitlementId",void 0),(0,C.gn)([(0,u.vg)()],W.prototype,"leaveTypeId",void 0),(0,C.gn)([(0,u.vg)()],W.prototype,"LeaveType",void 0),(0,C.gn)([(0,u.vg)()],W.prototype,"userId",void 0),(0,C.gn)([(0,u.vg)()],W.prototype,"User",void 0),(0,C.gn)([(0,u.vg)(),(0,u.uR)({acceptValue:u.Hf.PositiveNumber,allowDecimal:!0,message:"Only numberic is allowed"})],W.prototype,"availableLeave",void 0),(0,C.gn)([(0,u.vg)(),(0,u.uR)({acceptValue:u.Hf.PositiveNumber,allowDecimal:!0,message:"Only numberic is allowed"})],W.prototype,"usableLeave",void 0),(0,C.gn)([(0,u.vg)()],W.prototype,"startDate",void 0),(0,C.gn)([(0,u.vg)()],W.prototype,"endDate",void 0),(0,C.gn)([(0,u.vg)(),(0,u.uR)({acceptValue:u.Hf.PositiveNumber,message:"Only numberic is allowed"})],W.prototype,"effectedYear",void 0),(0,C.gn)([(0,u.uR)({acceptValue:u.Hf.PositiveNumber,allowDecimal:!0,message:"Only numberic is allowed"})],W.prototype,"usedLeave",void 0);class X{constructor(){this.transferType=[]}}(0,C.gn)([(0,u.vg)()],X.prototype,"annuallyStart",void 0),(0,C.gn)([(0,u.vg)()],X.prototype,"annuallyEnd",void 0),(0,C.gn)([(0,u.vg)(),(0,u.uR)({acceptValue:u.Hf.PositiveNumber,allowDecimal:!0,message:"Only numberic is allowed"})],X.prototype,"annuallyBudget",void 0),(0,C.gn)([(0,u.vg)()],X.prototype,"seniorityStart",void 0),(0,C.gn)([(0,u.vg)()],X.prototype,"seniorityEnd",void 0),(0,C.gn)([(0,u.vg)()],X.prototype,"transferStart",void 0),(0,C.gn)([(0,u.vg)()],X.prototype,"transferEnd",void 0),(0,C.gn)([(0,u.vg)(),(0,u.uR)({acceptValue:u.Hf.PositiveNumber,allowDecimal:!0,message:"Only numberic is allowed"})],X.prototype,"transferBudget",void 0),(0,C.gn)([(0,u.vg)()],X.prototype,"transferType",void 0),(0,C.gn)([(0,u.vg)(),(0,u.uR)({acceptValue:u.Hf.PositiveNumber,message:"Only numberic is allowed"})],X.prototype,"effectedYear",void 0);var de=g(3507),ae=g(3704),Pa=g(5557),Ya=g(8726),Qa=g(2836),Ge=g(5941);let Wa=(()=>{class o{transform(t,a){if(!a)return t;a=a.trim().toLowerCase();const n=new RegExp(a,"gi"),l=t.match(n);return l?t.replace(n,`<span class='highlight'>${l[0]}</span>`):t}static#e=this.\u0275fac=function(a){return new(a||o)};static#t=this.\u0275pipe=e.Yjl({name:"highlightTextSearching",type:o,pure:!0})}return o})();const Ha=["singleSelect"];function $a(o,r){if(1&o&&(e.TgZ(0,"div")(1,"div",11)(2,"div"),e._UZ(3,"nb-user",12),e.qZA(),e.TgZ(4,"div",13)(5,"div",14),e._UZ(6,"strong",15),e.qZA()()()()),2&o){const t=e.oxw(2);e.xp6(3),e.Q6J("onlyPicture",!0)("picture",null==t.bankCtrl||null==t.bankCtrl.value?null:t.bankCtrl.value.avatarUrl)("name",null==t.bankCtrl||null==t.bankCtrl.value?null:t.bankCtrl.value.displayName),e.xp6(3),e.Q6J("innerHTML",(null==t.bankCtrl||null==t.bankCtrl.value?null:t.bankCtrl.value.displayName)||"Unknown",e.oJD)}}function Ga(o,r){if(1&o&&(e.TgZ(0,"mat-option",16),e._uU(1),e.ALo(2,"numberFormat"),e.qZA()),2&o){const t=e.oxw(2);e.Q6J("disabled",!0),e.xp6(1),e.hij("About ",e.lcZ(2,2,t.totalResults)," result(s) match")}}function Ba(o,r){if(1&o&&(e.TgZ(0,"mat-option",17)(1,"div",11)(2,"div"),e._UZ(3,"nb-user",12),e.qZA(),e.TgZ(4,"div",13)(5,"div",14),e._UZ(6,"strong",15),e.ALo(7,"highlightTextSearching"),e.qZA()()()()),2&o){const t=r.$implicit,a=e.oxw(2);e.Q6J("value",t),e.xp6(3),e.Q6J("onlyPicture",!0)("picture",null==t?null:t.avatarUrl)("name",null==t?null:t.displayName),e.xp6(3),e.Q6J("innerHTML",e.xi3(7,5,(null==t?null:t.displayName)||"Unknown",null==a.bankFilterCtrl?null:a.bankFilterCtrl.value),e.oJD)}}function Va(o,r){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"mat-form-field",4)(2,"mat-select",5,6),e.NdJ("openedChange",function(n){e.CHM(t);const l=e.oxw();return e.KtG(l.selectionChange(n))}),e.TgZ(4,"mat-select-trigger"),e.YNc(5,$a,7,4,"div",7),e.qZA(),e.TgZ(6,"mat-option"),e._UZ(7,"ngx-mat-select-search",8),e.qZA(),e.YNc(8,Ga,3,4,"mat-option",9),e.YNc(9,Ba,8,8,"mat-option",10),e.ALo(10,"async"),e.qZA()(),e.BQk()}if(2&o){const t=e.oxw();e.xp6(1),e.Q6J("nbSpinner",t.employeeLoading),e.xp6(1),e.Q6J("formControl",t.bankCtrl)("ngStyle",t.styleMatSelect)("placeholder",t.label)("disabled",t.readonly),e.xp6(3),e.Q6J("ngIf",null==t.bankCtrl?null:t.bankCtrl.value),e.xp6(2),e.Q6J("formControl",t.bankFilterCtrl)("placeholderLabel",t.placeholderLabel),e.xp6(1),e.Q6J("ngIf",t.banks&&t.banks.length>0),e.xp6(1),e.Q6J("ngForOf",e.lcZ(10,10,t.filteredBanks))}}const za=function(o){return{item:o}};function Ka(o,r){if(1&o&&(e.TgZ(0,"div"),e.GkF(1,18),e.TgZ(2,"span")(3,"strong"),e._uU(4),e.qZA()()()),2&o){const t=e.oxw(2),a=e.MAs(6),n=e.MAs(4);e.xp6(1),e.Q6J("ngTemplateOutlet",t.isNbUser?a:n)("ngTemplateOutletContext",e.VKq(3,za,t.bankCtrl.value)),e.xp6(3),e.Oqu(null==t.bankCtrl||null==t.bankCtrl.value?null:t.bankCtrl.value.displayName)}}function ja(o,r){if(1&o&&e.YNc(0,Ka,5,5,"div",7),2&o){const t=e.oxw();e.Q6J("ngIf",t.bankCtrl.value)}}function Xa(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"img",19),e.NdJ("error",function(){const l=e.CHM(t).item;return e.KtG(l.avatarUrl="assets/images/man.png")}),e.ALo(1,"safeIframe"),e.qZA()}if(2&o){const t=r.item;let a;e.Q6J("src",e.lcZ(1,1,null!==(a=null==t?null:t.avatarUrl)&&void 0!==a?a:"assets/images/man.png"),e.LSH)}}function eo(o,r){if(1&o&&e._UZ(0,"nb-user",20),2&o){const t=r.item;e.Q6J("onlyPicture",!0)("picture",null==t?null:t.avatarUrl)("name",null==t?null:t.displayName)}}let to=(()=>{class o{constructor(t){this.employeeService=t,this.banks=[],this.currentUser=new Ya.h,this.isNbUser=!1,this.enableUnAssignee=!0,this.label="Employee",this.placeholderLabel="Search display name or user name...",this.isDropDown=!0,this.readonly=!1,this.userSelect=new e.vpe,this.bankCtrl=new m.NI,this.bankFilterCtrl=new m.NI,this.filteredBanks=new Pa.t(1),this._onDestroy=new R.x,this.employeeLoading=!1,this.totalResults=0}ngOnInit(){this.filteredBanks?.next(this.banks?.slice()),this.currentUser&&this.bankCtrl.setValue(this.banks?.find(t=>t.userId===this.currentUser?.userId)),this.bankFilterCtrl.valueChanges.pipe((0,k.R)(this._onDestroy)).subscribe(()=>{this.filterBanks()})}getCurrentEmployee(t){var a=this;return(0,p.Z)(function*(){const n=yield a.employeeService.getEmployeeById(t).toPromise();n.result&&a.bankCtrl.setValue(n.result)})()}ngAfterViewInit(){this.setInitialValue()}ngOnDestroy(){this._onDestroy.next(),this._onDestroy.complete()}ngOnChanges(t){}setInitialValue(){this.employeeLoading=!0,this.filteredBanks.pipe((0,he.q)(1),(0,k.R)(this._onDestroy)).subscribe(()=>{this.singleSelect.compareWith=(t,a)=>t&&a&&t?.userId===a?.userId}),this.totalResults=this.banks?.length,this.employeeLoading=!1}filterBanks(){if(!this.banks)return;let t=this.bankFilterCtrl?.value;t?(t=t.toLowerCase(),this.totalResults=0,this.filteredBanks.next(this.banks.filter(a=>a.displayName.toLowerCase().indexOf(t)>-1||a.displayName.toLowerCase().indexOf(t)>-1?(this.totalResults+=1,a):void 0))):(this.totalResults=this.banks?.length,this.filteredBanks.next(this.banks.slice()))}selectionChange(t){this.userSelect&&this.userSelect.emit(this.bankCtrl.value)}resetField(){this.bankCtrl.setValue(this.banks.find(t=>t.userId===this.currentUser?.userId)),this.filteredBanks.next(this.banks.slice())}static#e=this.\u0275fac=function(a){return new(a||o)(e.Y36(G.n))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-employee-searching"]],viewQuery:function(a,n){if(1&a&&e.Gf(Ha,5),2&a){let l;e.iGM(l=e.CRH())&&(n.singleSelect=l.first)}},inputs:{banks:"banks",currentUser:"currentUser",isNbUser:"isNbUser",styleMatSelect:"styleMatSelect",enableUnAssignee:"enableUnAssignee",label:"label",placeholderLabel:"placeholderLabel",isDropDown:"isDropDown",readonly:"readonly"},outputs:{userSelect:"userSelect"},features:[e.TTD],decls:7,vars:2,consts:[[4,"ngIf","ngIfElse"],["defaultEmployee",""],["defaultImg",""],["nbUserTemplate",""],[3,"nbSpinner"],["matTooltip","Enter 3 words to search...","required","",3,"formControl","ngStyle","placeholder","disabled","openedChange"],["singleSelect",""],[4,"ngIf"],["noEntriesFoundLabel","'No matching item found'",3,"formControl","placeholderLabel"],["style","height: 35px !important;",3,"disabled",4,"ngIf"],["class","col altus-search-option",3,"value",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","12px"],["id","nb-user-headshot","fxFlex","30px","size","small",3,"onlyPicture","picture","name"],[2,"font-size","14px"],["fxLayout","row","fxLayoutAlign","start start"],[3,"innerHTML"],[2,"height","35px !important",3,"disabled"],[1,"col","altus-search-option",3,"value"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["alt","user-avatar",1,"user-img",2,"margin-right","5px",3,"src","error"],["fxFlex","30px","size","small",1,"custom-avatar-outline",3,"onlyPicture","picture","name"]],template:function(a,n){if(1&a&&(e.YNc(0,Va,11,12,"ng-container",0),e.YNc(1,ja,1,1,"ng-template",null,1,e.W1O),e.YNc(3,Xa,2,3,"ng-template",null,2,e.W1O),e.YNc(5,eo,1,3,"ng-template",null,3,e.W1O)),2&a){const l=e.MAs(2);e.Q6J("ngIf",n.isDropDown)("ngIfElse",l)}},dependencies:[T.sg,T.O5,T.tP,T.PC,m.JJ,m.Q7,m.oH,u.bc,u.YE,F.KE,ge.gD,ge.$L,Fe.ey,_e.gM,v.Q7R,v.k0$,x.xw,x.SQ,x.Wh,x.yH,ue.Zl,Qa.nu,T.Ov,Ge.p,Wa],styles:[".mat-option.altus-search-option{height:50px!important;align-items:center!important;line-height:normal!important}  .mat-select-panel.mat-select-search-panel{max-height:60vh}[_nghost-%COMP%]     #nb-user-headshot .user-picture{border:1px solid rgb(48,122,189);color:#307abd;height:30px!important;width:30px!important}"]})}return o})();function no(o,r){if(1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.hij(" ",null==t.frmLeaveEntitlement||null==t.frmLeaveEntitlement.controls?null:t.frmLeaveEntitlement.controls.effectedYear.errorMessage,"")}}function ao(o,r){1&o&&(e.TgZ(0,"div")(1,"span",22),e._uU(2," Paid Leave "),e.qZA()()),2&o&&(e.xp6(1),e.Udp("background-color","#00a339"))}function oo(o,r){if(1&o&&(e.TgZ(0,"mat-option",20)(1,"div",21)(2,"div"),e._uU(3),e.qZA(),e.YNc(4,ao,3,2,"div",15),e.qZA()()),2&o){const t=r.$implicit;e.Q6J("value",null==t?null:t.leaveTypeId),e.xp6(3),e.hij(" ",null==t?null:t.leaveTypeName," "),e.xp6(1),e.Q6J("ngIf",null==t?null:t.isPaidSalary)}}function lo(o,r){if(1&o&&(e.TgZ(0,"div",35),e._uU(1),e.qZA()),2&o){const t=e.oxw(3);e.xp6(1),e.hij(" ",t.employeeStartContractInfo," ")}}function io(o,r){1&o&&(e.TgZ(0,"div",36),e._uU(1," Available Leave and Usable Leave will be calculated by the system after saving. "),e.qZA())}function ro(o,r){1&o&&(e.TgZ(0,"div",37),e._uU(1," Available Leave and Usable Leave has been calculated. "),e.qZA())}function so(o,r){if(1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&o){const t=e.oxw(3);e.xp6(1),e.hij(" ",null==t.frmLeaveEntitlement||null==t.frmLeaveEntitlement.controls?null:t.frmLeaveEntitlement.controls.availableLeave.errorMessage,"")}}function uo(o,r){if(1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&o){const t=e.oxw(3);e.xp6(1),e.hij(" ",null==t.frmLeaveEntitlement||null==t.frmLeaveEntitlement.controls?null:t.frmLeaveEntitlement.controls.usableLeave.errorMessage,"")}}function co(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",23),e.YNc(1,lo,2,1,"div",24),e.YNc(2,io,2,0,"div",25),e.YNc(3,ro,2,0,"div",26),e.TgZ(4,"mat-form-field",13)(5,"mat-label"),e._uU(6,"Choose Start Date - End Date"),e.qZA(),e.TgZ(7,"mat-date-range-input",27),e._UZ(8,"input",28)(9,"input",29),e.qZA(),e.TgZ(10,"mat-icon",30),e.NdJ("click",function(n){e.CHM(t);const l=e.oxw(2);return e.KtG(l.clearDate(n))}),e._uU(11,"clear"),e.qZA(),e._UZ(12,"mat-datepicker-toggle",31)(13,"mat-date-range-picker",null,32),e.qZA(),e.TgZ(15,"mat-form-field",13)(16,"mat-label"),e._uU(17,"Leave Budget"),e.qZA(),e._UZ(18,"input",33),e.YNc(19,so,2,1,"mat-error",15),e.qZA(),e.TgZ(20,"mat-form-field",13)(21,"mat-label"),e._uU(22,"Usable Leave"),e.qZA(),e._UZ(23,"input",34),e.YNc(24,uo,2,1,"mat-error",15),e.qZA()()}if(2&o){const t=e.MAs(14),a=e.oxw(2);e.xp6(1),e.Q6J("ngIf",2==(null==a.leaveTypeChosen?null:a.leaveTypeChosen.leaveTypeId)),e.xp6(1),e.Q6J("ngIf",1==(null==a.leaveTypeChosen?null:a.leaveTypeChosen.leaveTypeId)&&!a.readonly),e.xp6(1),e.Q6J("ngIf",1==(null==a.leaveTypeChosen?null:a.leaveTypeChosen.leaveTypeId)&&a.readonly),e.xp6(4),e.Q6J("rangePicker",t)("formGroup",a.frmDateRange),e.xp6(3),e.Q6J("hidden",""==(null==a.frmDateRange||null==a.frmDateRange.controls||null==a.frmDateRange.controls.startDate?null:a.frmDateRange.controls.startDate.value)||""==(null==a.frmDateRange||null==a.frmDateRange.controls||null==a.frmDateRange.controls.endDate?null:a.frmDateRange.controls.endDate.value)),e.xp6(2),e.Q6J("for",t),e.xp6(7),e.Q6J("ngIf",(null==a.frmLeaveEntitlement||null==a.frmLeaveEntitlement.controls||null==a.frmLeaveEntitlement.controls.availableLeave?null:a.frmLeaveEntitlement.controls.availableLeave.errors)&&((null==a.frmLeaveEntitlement||null==a.frmLeaveEntitlement.controls||null==a.frmLeaveEntitlement.controls.availableLeave?null:a.frmLeaveEntitlement.controls.availableLeave.dirty)||(null==a.frmLeaveEntitlement||null==a.frmLeaveEntitlement.controls||null==a.frmLeaveEntitlement.controls.availableLeave?null:a.frmLeaveEntitlement.controls.availableLeave.touched))),e.xp6(5),e.Q6J("ngIf",(null==a.frmLeaveEntitlement||null==a.frmLeaveEntitlement.controls||null==a.frmLeaveEntitlement.controls.usableLeave?null:a.frmLeaveEntitlement.controls.usableLeave.errors)&&((null==a.frmLeaveEntitlement||null==a.frmLeaveEntitlement.controls||null==a.frmLeaveEntitlement.controls.usableLeave?null:a.frmLeaveEntitlement.controls.usableLeave.dirty)||(null==a.frmLeaveEntitlement||null==a.frmLeaveEntitlement.controls||null==a.frmLeaveEntitlement.controls.usableLeave?null:a.frmLeaveEntitlement.controls.usableLeave.touched)))}}const ut=function(o){return{disabledNoOfCasesDiv:o}};function po(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",9)(1,"div",10)(2,"app-employee-searching",11),e.NdJ("userSelect",function(n){e.CHM(t);const l=e.oxw();return e.KtG(l.choosenEmployee(n))}),e.qZA()(),e.TgZ(3,"div",12)(4,"mat-form-field",13)(5,"mat-label"),e._uU(6,"Effected Year"),e.qZA(),e.TgZ(7,"input",14),e.NdJ("blur",function(){e.CHM(t);const n=e.oxw();let l;return e.KtG(n.setDefaultRangeDate(null==n.frmLeaveEntitlement||null==(l=n.frmLeaveEntitlement.get("effectedYear"))?null:l.value))}),e.qZA(),e.YNc(8,no,2,1,"mat-error",15),e.qZA()(),e.TgZ(9,"div",12)(10,"mat-form-field",16)(11,"mat-label"),e._uU(12,"Select Leave Type"),e.qZA(),e.TgZ(13,"mat-select",17)(14,"mat-select-trigger"),e._uU(15),e.qZA(),e.YNc(16,oo,5,3,"mat-option",18),e.qZA()()(),e.YNc(17,co,25,9,"div",19),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("ngClass",e.VKq(8,ut,t.readonly)),e.xp6(1),e.Q6J("ngClass",e.VKq(10,ut,0!=t.action)),e.xp6(1),e.Q6J("banks",t.listEmployees),e.xp6(6),e.Q6J("ngIf",(null==t.frmLeaveEntitlement||null==t.frmLeaveEntitlement.controls||null==t.frmLeaveEntitlement.controls.effectedYear?null:t.frmLeaveEntitlement.controls.effectedYear.errors)&&((null==t.frmLeaveEntitlement||null==t.frmLeaveEntitlement.controls||null==t.frmLeaveEntitlement.controls.effectedYear?null:t.frmLeaveEntitlement.controls.effectedYear.dirty)||(null==t.frmLeaveEntitlement||null==t.frmLeaveEntitlement.controls||null==t.frmLeaveEntitlement.controls.effectedYear?null:t.frmLeaveEntitlement.controls.effectedYear.touched))),e.xp6(2),e.Q6J("nbSpinner",t.isLoadingLeaveType),e.xp6(5),e.hij(" ",null==t.leaveTypeChosen?null:t.leaveTypeChosen.leaveTypeName," "),e.xp6(1),e.Q6J("ngForOf",t.listLeaveTypes),e.xp6(1),e.Q6J("ngIf",null==t.leaveTypeChosen?null:t.leaveTypeChosen.leaveTypeId)}}function mo(o,r){if(1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.hij(" ",null==t.frmLeaveEntitlement||null==t.frmLeaveEntitlement.controls?null:t.frmLeaveEntitlement.controls.availableLeave.errorMessage,"")}}function go(o,r){if(1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.hij(" ",null==t.frmLeaveEntitlement||null==t.frmLeaveEntitlement.controls?null:t.frmLeaveEntitlement.controls.usableLeave.errorMessage,"")}}function fo(o,r){if(1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.hij(" ",null==t.frmLeaveEntitlement||null==t.frmLeaveEntitlement.controls?null:t.frmLeaveEntitlement.controls.usedLeave.errorMessage,"")}}function ho(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",38)(1,"div",12)(2,"app-employee-searching",39),e.NdJ("userSelect",function(n){e.CHM(t);const l=e.oxw();return e.KtG(l.choosenEmployee(n))}),e.qZA()(),e.TgZ(3,"div",12)(4,"mat-form-field",13)(5,"mat-label"),e._uU(6,"Leave Type"),e.qZA(),e._UZ(7,"input",40),e.qZA()(),e.TgZ(8,"div",12)(9,"mat-form-field",13)(10,"mat-label"),e._uU(11,"Budget"),e.qZA(),e._UZ(12,"input",33),e.YNc(13,mo,2,1,"mat-error",15),e.qZA()(),e.TgZ(14,"div",12)(15,"mat-form-field",13)(16,"mat-label"),e._uU(17,"Earn Leave"),e.qZA(),e._UZ(18,"input",34),e.YNc(19,go,2,1,"mat-error",15),e.qZA()(),e.TgZ(20,"div",12)(21,"mat-form-field",13)(22,"mat-label"),e._uU(23,"Used Leave"),e.qZA(),e._UZ(24,"input",41),e.YNc(25,fo,2,1,"mat-error",15),e.qZA()(),e.TgZ(26,"div",12)(27,"mat-form-field",13)(28,"mat-label"),e._uU(29,"Choose Start Date - End Date"),e.qZA(),e.TgZ(30,"mat-date-range-input",27),e._UZ(31,"input",28)(32,"input",29),e.qZA(),e.TgZ(33,"mat-icon",30),e.NdJ("click",function(n){e.CHM(t);const l=e.oxw();return e.KtG(l.clearDate(n))}),e._uU(34,"clear"),e.qZA(),e._UZ(35,"mat-datepicker-toggle",31)(36,"mat-date-range-picker",null,32),e.qZA()()()}if(2&o){const t=e.MAs(37),a=e.oxw();e.xp6(2),e.Q6J("banks",a.listEmployees)("currentUser",a.employeeChosen)("readonly",!0),e.xp6(5),e.Q6J("value",null==a.leaveEntitlementModel||null==a.leaveEntitlementModel.leaveType?null:a.leaveEntitlementModel.leaveType.leaveTypeName),e.xp6(6),e.Q6J("ngIf",(null==a.frmLeaveEntitlement||null==a.frmLeaveEntitlement.controls||null==a.frmLeaveEntitlement.controls.availableLeave?null:a.frmLeaveEntitlement.controls.availableLeave.errors)&&((null==a.frmLeaveEntitlement||null==a.frmLeaveEntitlement.controls||null==a.frmLeaveEntitlement.controls.availableLeave?null:a.frmLeaveEntitlement.controls.availableLeave.dirty)||(null==a.frmLeaveEntitlement||null==a.frmLeaveEntitlement.controls||null==a.frmLeaveEntitlement.controls.availableLeave?null:a.frmLeaveEntitlement.controls.availableLeave.touched))),e.xp6(6),e.Q6J("ngIf",(null==a.frmLeaveEntitlement||null==a.frmLeaveEntitlement.controls||null==a.frmLeaveEntitlement.controls.usableLeave?null:a.frmLeaveEntitlement.controls.usableLeave.errors)&&((null==a.frmLeaveEntitlement||null==a.frmLeaveEntitlement.controls||null==a.frmLeaveEntitlement.controls.usableLeave?null:a.frmLeaveEntitlement.controls.usableLeave.dirty)||(null==a.frmLeaveEntitlement||null==a.frmLeaveEntitlement.controls||null==a.frmLeaveEntitlement.controls.usableLeave?null:a.frmLeaveEntitlement.controls.usableLeave.touched))),e.xp6(6),e.Q6J("ngIf",(null==a.frmLeaveEntitlement||null==a.frmLeaveEntitlement.controls||null==a.frmLeaveEntitlement.controls.usedLeave?null:a.frmLeaveEntitlement.controls.usedLeave.errors)&&((null==a.frmLeaveEntitlement||null==a.frmLeaveEntitlement.controls||null==a.frmLeaveEntitlement.controls.usedLeave?null:a.frmLeaveEntitlement.controls.usedLeave.dirty)||(null==a.frmLeaveEntitlement||null==a.frmLeaveEntitlement.controls||null==a.frmLeaveEntitlement.controls.usedLeave?null:a.frmLeaveEntitlement.controls.usedLeave.touched))),e.xp6(5),e.Q6J("rangePicker",t)("formGroup",a.frmDateRange),e.xp6(3),e.Q6J("hidden",""==(null==a.frmDateRange||null==a.frmDateRange.controls||null==a.frmDateRange.controls.startDate?null:a.frmDateRange.controls.startDate.value)||""==(null==a.frmDateRange||null==a.frmDateRange.controls||null==a.frmDateRange.controls.endDate?null:a.frmDateRange.controls.endDate.value)),e.xp6(2),e.Q6J("for",t)}}let _o=(()=>{class o{constructor(t,a,n,l,i,s,c,d,h,y){this.dialModalRef=t,this.data=a,this.employeeService=n,this.frmBuilder=l,this.toast=i,this.cdref=s,this.dialog=c,this.leaveEntitlementService=d,this.leaveTypeService=h,this.dateFormatPipe=y,this.destroy$=new R.x,this.isMyLeaveEntitlement=!1,this.isLoading=!1,this.isLoadingLeaveType=!1,this.isAssignee=!1,this.isChange=!1,this.environment=Me.NZ,this.readonly=!1,this.frmDateRange=new m.cw({startDate:new m.NI(new Date,[m.kI.required]),endDate:new m.NI(new Date,[m.kI.required])}),this.employeeListLeaveEntitlement=[],a.model&&(this.id=a.model.id),this.id=a.id??this.id,this.action=a.action,this.leaveEntitlementModel=a.model??new W,this.listEmployees=a?.listEmployees??this.listEmployees,this.leaveTypeChosen=new z,this.action==Z.t.Edit&&(this.leaveEntitlementModel?.User?this.employeeChosen=this.leaveEntitlementModel?.User:this.employeeService.getEmployeeById(this.leaveEntitlementModel?.User?.userId).pipe((0,k.R)(this.destroy$)).subscribe(w=>{w.result&&(this.employeeChosen=w.result,this.isAssignee=!0)})),this.setDefaultRangeDate()}ngAfterContentChecked(){this.cdref.detectChanges()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}ngOnInit(){var t=this;return(0,p.Z)(function*(){if(t.frmLeaveEntitlement=t.frmBuilder.formGroup(W,t.leaveEntitlementModel),t.dialModalRef.updatePosition({right:"0"}),t.listEmployees?.length<=0){var a=yield t.employeeService.getAllEmployee().pipe((0,k.R)(t.destroy$)).toPromise();a.result&&(t.listEmployees=a.result,t.listEmployees.map(n=>{let l=`${n.firstName} ${n.middleName} ${n.lastName}`;n.displayName=l.trim()?l:"Unknown"}))}t.isLoadingLeaveType=!t.isLoadingLeaveType,t.leaveTypeService.getAllLeaveType().pipe((0,k.R)(t.destroy$)).subscribe(n=>{n.result&&(t.listLeaveTypes=n.result,t.listLeaveTypes=t.listLeaveTypes.filter(l=>l.leaveTypeId!==I.Transfer)),t.isLoadingLeaveType=!t.isLoadingLeaveType}),t.leaveEntitlementModel?.leaveTypeId&&(t.leaveTypeChosen=t.listLeaveTypes?.find(n=>n.leaveTypeId===t.leaveEntitlementModel.leaveTypeId)),t.frmLeaveEntitlement.get("effectedYear").setValue((new Date).getFullYear()),t.frmLeaveEntitlement.get("leaveTypeId").valueChanges.subscribe(n=>{t.isLoadingLeaveType=!t.isLoadingLeaveType,t.leaveTypeChosen=t.listLeaveTypes.find(l=>l.leaveTypeId===n),t.setDefaultRangeDate(t.frmLeaveEntitlement?.get("effectedYear")?.value),n===I.Seniority?(t.frmLeaveEntitlement.get("availableLeave").setValue(t.leaveTypeChosen.defaultBudget),t.customUsableAvailableLeave()):(t.frmLeaveEntitlement.get("usableLeave").setValue(null),t.frmLeaveEntitlement.get("availableLeave").setValue(null)),t.isLoadingLeaveType=!t.isLoadingLeaveType})})()}customUsableAvailableLeave(){if(this.leaveTypeChosen?.leaveTypeId===I.Seniority){var a=new Date;this.employeeChosen?.dateStartContract&&(a=new Date(this.employeeChosen?.dateStartContract));var n=new Date(this.frmDateRange?.value?.startDate),l=vo(a,n)/365;l<0&&(l=0),l<3?(this.frmLeaveEntitlement.get("usableLeave").setValue(0),this.frmLeaveEntitlement.get("availableLeave").setValue(0)):(l>=3&&l<5||l>=5)&&(this.frmLeaveEntitlement.get("usableLeave").setValue(3),this.frmLeaveEntitlement.get("availableLeave").setValue(3)),this.employeeStartContractInfo="This employee has started contract at "+this.dateFormatPipe.transform(a.toDateString())+".\nUp to "+this.dateFormatPipe.transform(n.toDateString())+" employee has "+Math.floor(l)+" years of seniority."}}ngAfterViewInit(){this.frmLeaveEntitlement&&this.frmLeaveEntitlement.valueChanges.pipe((0,he.q)(1)).subscribe(t=>this.isChange=!0)}closeDialog(){if(this.isChange)return this.isChange=!1,void this.dialog.open($,{backdropClass:"custom-backdrop",hasBackdrop:!0,data:{message:"Do you wish to close this popup? You will lose your unsaved data."}}).afterClosed().subscribe(a=>{a?this.dialModalRef.close():this.isChange=!0});this.leaveTypeChosen?.leaveTypeId===I.Annually&&this.readonly?this.dialModalRef.close(this.leaveEntitlementModel):this.dialModalRef.close()}saveData(){if(this.frmLeaveEntitlement.valid){this.isLoading=!this.isLoading;const t=Object.assign({},this.frmLeaveEntitlement.value);t.userId=this.employeeChosen?.userId,this.frmDateRange?.valid&&(t.startDate=this.frmDateRange?.value?.startDate,t.endDate=this.frmDateRange?.value?.endDate),t.usedLeave=t.usedLeave?t.usedLeave:0,this.leaveEntitlementService.saveLeaveEntitlement(t).pipe((0,k.R)(this.destroy$)).subscribe(a=>{a.result?a.result.leaveTypeId===I.Annually?(this.toast.success("Save leave entitlement successfully","Success",{position:v.d6C.BOTTOM_END,duration:3e3}),this.leaveEntitlementModel=a.result,this.frmLeaveEntitlement.get("availableLeave").setValue(a.result.availableLeave),this.frmLeaveEntitlement.get("usableLeave").setValue(a.result.usableLeave),this.readonly=!0,this.isChange=!1):(this.toast.success("Save leave entitlement successfully","Success",{position:v.d6C.BOTTOM_END,duration:3e3}),this.dialModalRef.close(a.result)):this.toast.danger(a.message,"Error",{position:v.d6C.BOTTOM_END,duration:3e3})}).add(()=>{this.isLoading=!this.isLoading})}}choosenEmployee(t){t&&t!==this.employeeChosen?(this.employeeChosen=t,this.employeeService.getEmployeeById(this.employeeChosen?.userId).pipe((0,k.R)(this.destroy$)).subscribe(a=>{a.result&&(this.employeeChosen=a.result)}).add(()=>{this.leaveTypeChosen?.leaveTypeId===I.Seniority&&this.customUsableAvailableLeave()}),this.isAssignee=!0):this.isAssignee=!1}setDefaultRangeDate(t=null){var n=t?Number(t):(new Date).getFullYear(),l=new Date(n,this.leaveTypeChosen?.defaultStartMonth-1,this.leaveTypeChosen?.defaultStartDay),i=new Date(n,this.leaveTypeChosen?.defaultEndMonth-1,this.leaveTypeChosen?.defaultEndDay);this.leaveEntitlementModel&&this.action===Z.t.Edit&&(l=new Date(this.leaveEntitlementModel?.startDate),i=new Date(this.leaveEntitlementModel?.endDate)),this.frmDateRange.setValue({startDate:l,endDate:i})}clearDate(t){t.stopPropagation(),this.frmDateRange.reset({startDate:null,endDate:null})}static#e=this.\u0275fac=function(a){return new(a||o)(e.Y36(f.so),e.Y36(f.WI),e.Y36(G.n),e.Y36(u.GW),e.Y36(v.quB),e.Y36(e.sBO),e.Y36(f.uw),e.Y36(Te),e.Y36(qe),e.Y36(de.Ek))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-add-edit-leave-entitlement"]],decls:17,vars:5,consts:[["mat-dialog-title","",1,"d-flex","flex-wrap",2,"margin","unset","padding","1px 10px 1px 28px",3,"nbSpinner"],["mat-button","","color","primary",3,"disabled","click"],["fontSet"," material-icons-outlined"],["mat-button","","color","primary",3,"click"],["mat-icon-button","","aria-label","Close the dialog",1,"ml-auto",3,"click"],[1,"mat-typography"],[1,"container",3,"formGroup","ngSubmit"],["class","row",3,"ngClass",4,"ngIf"],["class","row",4,"ngIf"],[1,"row",3,"ngClass"],[1,"col-12",2,"margin-top","20px",3,"ngClass"],["required","",3,"banks","userSelect"],[1,"col-12",2,"margin-top","20px"],["appearance","fill"],["matInput","","formControlName","effectedYear","autocomplete","off",3,"blur"],[4,"ngIf"],["nbSpinnerStatus","primary",3,"nbSpinner"],["required","","formControlName","leaveTypeId"],[3,"value",4,"ngFor","ngForOf"],["class","col-12",4,"ngIf"],[3,"value"],["fxLayout","row","fxLayoutAlign","space-between center"],[1,"badge","badge-pill","badge-primary",2,"font-size","12px"],[1,"col-12"],["class","alert alert-primary","role","alert","style","white-space: pre-line; margin-top: 10px;",4,"ngIf"],["class","alert alert-warning","role","alert","style","margin-top: 10px;",4,"ngIf"],["class","alert alert-primary","role","alert","style","margin-top: 10px;",4,"ngIf"],[3,"rangePicker","formGroup"],["matStartDate","","formControlName","startDate","placeholder","Start Date","required","","readonly",""],["matEndDate","","formControlName","endDate","placeholder","End Date","required","","readonly",""],["matSuffix","",2,"cursor","pointer",3,"hidden","click"],["matPrefix","","id","dateRange","disabled","",3,"for"],["picker",""],["matInput","","formControlName","availableLeave","autocomplete","off"],["matInput","","formControlName","usableLeave","autocomplete","off"],["role","alert",1,"alert","alert-primary",2,"white-space","pre-line","margin-top","10px"],["role","alert",1,"alert","alert-warning",2,"margin-top","10px"],["role","alert",1,"alert","alert-primary",2,"margin-top","10px"],[1,"row"],[3,"banks","currentUser","readonly","userSelect"],["matInput","","readonly","","autocomplete","off",3,"value"],["matInput","","formControlName","usedLeave","autocomplete","off"]],template:function(a,n){1&a&&(e.TgZ(0,"div",0)(1,"button",1),e.NdJ("click",function(){return n.saveData()}),e.TgZ(2,"mat-icon",2),e._uU(3,"save"),e.qZA(),e._uU(4,"Save "),e.qZA(),e.TgZ(5,"button",3),e.NdJ("click",function(){return n.closeDialog()}),e.TgZ(6,"mat-icon"),e._uU(7,"clear"),e.qZA(),e._uU(8,"Cancel "),e.qZA(),e.TgZ(9,"button",4),e.NdJ("click",function(){return n.closeDialog()}),e.TgZ(10,"mat-icon"),e._uU(11,"close"),e.qZA()()(),e._UZ(12,"mat-divider"),e.TgZ(13,"mat-dialog-content",5)(14,"form",6),e.NdJ("ngSubmit",function(){return n.saveData()}),e.YNc(15,po,18,12,"div",7),e.YNc(16,ho,38,11,"div",8),e.qZA()()),2&a&&(e.Q6J("nbSpinner",n.isLoading),e.xp6(1),e.Q6J("disabled",!(null!=n.frmLeaveEntitlement&&n.frmLeaveEntitlement.valid)||!n.isAssignee||n.readonly||0==n.action&&!(null!=n.frmDateRange&&n.frmDateRange.valid)),e.xp6(13),e.Q6J("formGroup",n.frmLeaveEntitlement),e.xp6(1),e.Q6J("ngIf",0==n.action),e.xp6(1),e.Q6J("ngIf",1==n.action))},dependencies:[T.mk,T.sg,T.O5,m._Y,m.Fj,m.JJ,m.JL,m.Q7,m.sg,m.u,u.bc,u.VP,u.YE,F.KE,F.hX,F.TO,F.qo,F.R9,Ie.Nt,Q.Hw,J.lW,J.RK,ge.gD,ge.$L,Fe.ey,ae.nW,ae.wx,ae.zY,ae.By,ae._g,f.uh,f.xY,j.d,v.Q7R,x.xw,x.Wh,ue.oO,to]})}return o})();const vo=(o,r)=>{let t=o.getTime(),a=r.getTime();return Math.ceil((a-t)/864e5)};function yo(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",10),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.addEditLeaveEntitlement())}),e.qZA()}}function bo(o,r){if(1&o&&e.YNc(0,yo,1,0,"button",9),2&o){const t=e.oxw();e.Q6J("ngIf",t.isAdmin)}}function Co(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",11),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(),l=e.MAs(5);return e.KtG(n.clear(l))}),e.qZA(),e.TgZ(1,"button",12),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.reset())}),e.qZA()}}function To(o,r){1&o&&e._UZ(0,"th",42)}function xo(o,r){if(1&o&&(e.TgZ(0,"tr")(1,"th",13),e._UZ(2,"p-tableHeaderCheckbox"),e.qZA(),e.TgZ(3,"th",14),e._uU(4," Employee "),e._UZ(5,"p-columnFilter",15)(6,"p-sortIcon",16),e.qZA(),e.TgZ(7,"th",17),e._uU(8," Leave Type Name "),e._UZ(9,"p-columnFilter",18)(10,"p-sortIcon",19),e.qZA(),e.TgZ(11,"th",20),e._uU(12," Available Leave "),e._UZ(13,"p-columnFilter",21)(14,"p-sortIcon",22),e.qZA(),e.TgZ(15,"th",23),e._uU(16," Usable Leave "),e._UZ(17,"p-columnFilter",24)(18,"p-sortIcon",25),e.qZA(),e.TgZ(19,"th",26),e._uU(20," Used Leave "),e._UZ(21,"p-columnFilter",27)(22,"p-sortIcon",28),e.qZA(),e.TgZ(23,"th",29),e._uU(24," Remain Leave "),e._UZ(25,"p-columnFilter",30)(26,"p-sortIcon",31),e.qZA(),e.TgZ(27,"th",32),e._uU(28," Start Date "),e._UZ(29,"p-columnFilter",33)(30,"p-sortIcon",34),e.qZA(),e.TgZ(31,"th",35),e._uU(32," End Date "),e._UZ(33,"p-columnFilter",36)(34,"p-sortIcon",37),e.qZA(),e.TgZ(35,"th",38),e._uU(36," Effected Year "),e._UZ(37,"p-columnFilter",39)(38,"p-sortIcon",40),e.qZA(),e.YNc(39,To,1,0,"th",41),e.qZA()),2&o){const t=e.oxw();e.xp6(39),e.Q6J("ngIf",t.isAdmin)}}function wo(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"td")(1,"button",47),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,l=e.oxw();return e.KtG(l.addEditLeaveEntitlement(n))}),e.qZA()()}}function So(o,r){if(1&o&&(e.TgZ(0,"tr",43)(1,"td"),e._UZ(2,"p-tableCheckbox",44),e.qZA(),e.TgZ(3,"td"),e._UZ(4,"img",45),e._uU(5),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.qZA(),e.TgZ(12,"td"),e._uU(13),e.qZA(),e.TgZ(14,"td"),e._uU(15),e.qZA(),e.TgZ(16,"td"),e._uU(17),e.ALo(18,"dateFormat"),e.qZA(),e.TgZ(19,"td"),e._uU(20),e.ALo(21,"dateFormat"),e.qZA(),e.TgZ(22,"td"),e._uU(23),e.qZA(),e.YNc(24,wo,2,0,"td",46),e.qZA()),2&o){const t=r.$implicit,a=e.oxw();e.Q6J("pEditableRow",t),e.xp6(2),e.Q6J("value",t),e.xp6(2),e.s9C("src",null==t||null==t.User?null:t.User.avatarUrl,e.LSH),e.xp6(1),e.hij(" ",(null==t||null==t.User?null:t.User.firstName)+" "+(null==t||null==t.User?null:t.User.middleName)+" "+(null==t||null==t.User?null:t.User.lastName)," "),e.xp6(2),e.Oqu(null==t||null==t.LeaveType?null:t.LeaveType.leaveTypeName),e.xp6(2),e.Oqu(null==t?null:t.availableLeave),e.xp6(2),e.Oqu(null==t?null:t.usableLeave),e.xp6(2),e.Oqu(null==t?null:t.usedLeave),e.xp6(2),e.Oqu((null==t?null:t.usableLeave)-(null==t?null:t.usedLeave)),e.xp6(2),e.Oqu(e.lcZ(18,13,null==t?null:t.startDate)),e.xp6(3),e.Oqu(e.lcZ(21,15,null==t?null:t.endDate)),e.xp6(3),e.Oqu(null==t?null:t.effectedYear),e.xp6(1),e.Q6J("ngIf",a.isAdmin)}}function Zo(o,r){}const ko=function(){return{"min-width":"50rem"}},Do=function(o){return[10,25,o]},Mo=function(){return["leaveTypeName"]};let Ao=(()=>{class o{constructor(t,a,n,l){this.leaveEntitlementService=t,this.employeeService=a,this.authService=n,this.dialog=l,this.isAdmin=!1,this.destroy$=new R.x,this.listEmployees=[],this.first=0,this.rows=10,this.loading=!1,this.authService.onTokenChange().subscribe(i=>{i.isValid()&&(this.currentUser=i.getPayload()?.user,this.currentUser?.roles?.find(s=>"admin"===s.roleName)&&(this.isAdmin=!0))}),this.employeeService.getAllEmployee().pipe((0,k.R)(this.destroy$)).subscribe(i=>{i.result&&(this.listEmployees=i.result,this.listEmployees.map(s=>{let c=`${s.firstName} ${s.middleName} ${s.lastName}`;s.displayName=c.trim()?c:"Unknown"}))})}ngOnInit(){var t=this;return(0,p.Z)(function*(){t.loading=!t.loading,yield t.refreshData(),t.loading=!t.loading})()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}refreshData(){var t=this;return(0,p.Z)(function*(){t.loading=!t.loading;var a=yield t.leaveEntitlementService.getAllLeaveEntitlement().pipe((0,k.R)(t.destroy$)).toPromise();a.result&&(t.dataTable=a.result),t.loading=!t.loading})()}addEditLeaveEntitlement(t=null){var a=this;return(0,p.Z)(function*(){a.leaveEntitlementModel=t,a.dialog.open(_o,{disableClose:!0,height:"100vh",width:"600px",autoFocus:!1,backdropClass:"custom-backdrop",hasBackdrop:!0,data:{model:t,listEmployees:a.listEmployees,action:null===t?Z.t.Add:Z.t.Edit}}).afterClosed().subscribe(function(){var l=(0,p.Z)(function*(i){i&&(yield a.refreshData())});return function(i){return l.apply(this,arguments)}}())})()}next(){this.first=this.first+this.rows}prev(){this.first=this.first-this.rows}reset(){var t=this;return(0,p.Z)(function*(){t.first=0,yield t.refreshData()})()}pageChange(t){this.first=t.first,this.rows=t.rows}clear(t){t.clear()}deleteLeaveEntitlement(t){}deleteSelectedEntitlement(){}static#e=this.\u0275fac=function(a){return new(a||o)(e.Y36(Te),e.Y36(G.n),e.Y36(O._o),e.Y36(f.uw))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-leave-entitlement-managament"]],decls:9,vars:15,consts:[[1,"card"],["styleClass","mb-4 gap-2"],["pTemplate","left"],["pTemplate","right"],["styleClass","p-datatable-sm","editMode","row","scrollHeight","700px","dataKey","leaveEntitlementId",3,"value","paginator","rows","showCurrentPageReport","tableStyle","rowsPerPageOptions","loading","globalFilterFields","selection","rowHover","scrollable","onPage","selectionChange"],["table",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","paginatorleft"],["pButton","","pRipple","","label","New","icon","pi pi-plus","class","p-button-success p-button-sm mr-2",3,"click",4,"ngIf"],["pButton","","pRipple","","label","New","icon","pi pi-plus",1,"p-button-success","p-button-sm","mr-2",3,"click"],["pButton","","label","Clear","icon","pi pi-filter-slash",1,"p-button-outlined","p-button-sm",3,"click"],["pButton","","label","Refresh","icon","pi pi-refresh",1,"p-button-outlined","p-button-sm",2,"margin-left","10px",3,"click"],[2,"width","4rem"],["pSortableColumn","employee.displayName",2,"min-width","150px"],["type","text","field","employee.displayName","display","menu"],["field","employee.displayName"],["pSortableColumn","leaveType.leaveTypeName",2,"min-width","150px"],["type","text","field","leaveType.leaveTypeName","display","menu"],["field","leaveType.leaveTypeName"],["pSortableColumn","availableLeave",2,"min-width","150px"],["type","text","field","availableLeave","display","menu"],["field","availableLeave"],["pSortableColumn","usableLeave",2,"min-width","150px"],["type","text","field","usableLeave","display","menu"],["field","usableLeave"],["pSortableColumn","usedLeave",2,"min-width","150px"],["type","text","field","usedLeave","display","menu"],["field","usedLeave"],["pSortableColumn","remainLeave",2,"min-width","150px"],["type","text","field","remainLeave","display","menu"],["field","remainLeave"],["pSortableColumn","startDate",2,"min-width","150px"],["type","text","field","startDate","display","menu"],["field","startDate"],["pSortableColumn","endDate",2,"min-width","150px"],["type","text","field","endDate","display","menu"],["field","endDate"],["pSortableColumn","effectedYear",2,"min-width","150px"],["type","text","field","effectedYear","display","menu"],["field","effectedYear"],["pSortableColumn","nationality","style","min-width:150px",4,"ngIf"],["pSortableColumn","nationality",2,"min-width","150px"],[3,"pEditableRow"],[3,"value"],["width","32",2,"vertical-align","middle",3,"alt","src"],[4,"ngIf"],["pButton","","pRipple","","icon","pi pi-pencil",1,"p-button-sm","p-button-success","mr-2",3,"click"]],template:function(a,n){1&a&&(e.TgZ(0,"div",0)(1,"p-toolbar",1),e.YNc(2,bo,1,1,"ng-template",2),e.YNc(3,Co,2,0,"ng-template",3),e.qZA(),e.TgZ(4,"p-table",4,5),e.NdJ("onPage",function(i){return n.pageChange(i)})("selectionChange",function(i){return n.selectedLeaveEntitlements=i}),e.YNc(6,xo,40,1,"ng-template",6),e.YNc(7,So,25,17,"ng-template",7),e.YNc(8,Zo,0,0,"ng-template",8),e.qZA()()),2&a&&(e.xp6(4),e.Q6J("value",n.dataTable)("paginator",!0)("rows",10)("showCurrentPageReport",!0)("tableStyle",e.DdM(11,ko))("rowsPerPageOptions",e.VKq(12,Do,null==n.dataTable?null:n.dataTable.length))("loading",n.loading)("globalFilterFields",e.DdM(14,Mo))("selection",n.selectedLeaveEntitlements)("rowHover",!0)("scrollable",!0))},dependencies:[T.O5,L.jx,U.Hq,b.iA,b.lQ,b.fz,b.UA,b.Mo,b.D$,b.xl,ce.o,de.Ek]})}return o})();var ct=g(9686);function Lo(o,r){if(1&o&&(e.TgZ(0,"div",30),e._UZ(1,"nb-user",31),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("name",((null==t.employeeChosen?null:t.employeeChosen.firstName)||"")+" "+((null==t.employeeChosen?null:t.employeeChosen.middleName)||"")+" "+((null==t.employeeChosen?null:t.employeeChosen.lastName)||""))("title",t.employeeChosen.email)("showTitle",!0)("picture",null==t.employeeChosen?null:t.employeeChosen.avatarUrl)}}function Eo(o,r){if(1&o&&e.YNc(0,Lo,2,4,"div",29),2&o){const t=e.oxw();e.Q6J("ngIf",t.employeeChosen)}}function Ro(o,r){if(1&o&&(e.TgZ(0,"div",30),e._UZ(1,"nb-user",31),e.qZA()),2&o){const t=r.$implicit;e.xp6(1),e.Q6J("name",((null==t?null:t.firstName)||"")+" "+((null==t?null:t.middleName)||"")+" "+((null==t?null:t.lastName)||""))("title",t.email)("showTitle",!0)("picture",null==t?null:t.avatarUrl)}}function No(o,r){if(1&o&&(e.TgZ(0,"small",32),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(null==t.frmAttendance||null==t.frmAttendance.controls?null:t.frmAttendance.controls.punchinDate.errorMessage)}}function qo(o,r){if(1&o&&(e.TgZ(0,"small",33),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(null==t.frmAttendance||null==t.frmAttendance.controls?null:t.frmAttendance.controls.punchoutDate.errorMessage)}}let dt=(()=>{class o{constructor(t,a,n,l,i,s,c,d,h,y){this.dialModalRef=t,this.data=a,this.employeeService=n,this.frmBuilder=l,this.authService=i,this.toast=s,this.cdref=c,this.dialog=d,this.attendanceService=h,this.permissionService=y,this.destroy$=new R.x,this.isLoading=!1,this.isChange=!1,this.hasEditPermission=!1,this.action=a?.action??Z.t.Add,this.attendanceModel=a?.model??new ct.v,this.listEmployees=a?.listEmployees??[],"string"!=typeof this.attendanceModel.userId&&(this.attendanceModel.userId=this.attendanceModel?.User?.userId),this.authService.onTokenChange().subscribe(w=>{w.isValid()&&(this.currentUser=w.getPayload())})}ngAfterContentChecked(){this.cdref.detectChanges()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}ngOnInit(){var t=this;return(0,p.Z)(function*(){if(t.frmAttendance=t.frmBuilder.formGroup(ct.v,t.attendanceModel),t.dialModalRef.updatePosition({right:"0"}),t.listEmployees?.length<=0){var a=yield t.employeeService.getAllEmployee().pipe((0,k.R)(t.destroy$)).toPromise();a.result&&(t.listEmployees=a.result,t.listEmployees.map(n=>{let l=`${n.firstName} ${n.middleName} ${n.lastName}`;n.displayName=l.trim()?l:"Unknown"}))}t.action===Z.t.Add&&(t.defaultPunchinDate=new Date,t.defaultPunchoutDate=new Date,t.employeeService.getEmployeeById(t.currentUser?.nameid).pipe((0,k.R)(t.destroy$)).subscribe(n=>{n.result&&t.getAssignee(n.result)})),t.action===Z.t.Edit&&(t.defaultPunchinDate=new Date(t.attendanceModel?.punchinDate),t.defaultPunchoutDate=new Date(t.attendanceModel?.punchoutDate),t.attendanceModel?.User?t.getAssignee(t.attendanceModel?.User):t.employeeService.getEmployeeById(t.attendanceModel?.userId).pipe((0,k.R)(t.destroy$)).subscribe(n=>{n.result&&(t.employeeChosen=n.result)}))})()}ngAfterViewInit(){this.frmAttendance&&this.frmAttendance.valueChanges.pipe((0,he.q)(1)).subscribe(t=>this.isChange=!0)}closeDialog(){if(this.isChange)return this.isChange=!1,void this.dialog.open($,{backdropClass:"custom-backdrop",hasBackdrop:!0,data:{message:"Do you wish to close this popup? You will lose your unsaved data."}}).afterClosed().subscribe(a=>{a?this.dialModalRef.close():this.isChange=!0});this.dialModalRef.close()}saveData(){if(this.frmAttendance.valid){this.isLoading=!this.isLoading;const t=Object.assign({},this.frmAttendance.value);t.userId=this.employeeChosen?.userId,t.attendanceId=t.attendanceId?t.attendanceId:0,this.attendanceService.saveAttendance(t).pipe((0,k.R)(this.destroy$)).subscribe(a=>{a.result&&(this.toast.success("Save leave request successfully","Success",{position:v.d6C.BOTTOM_END,duration:3e3}),this.dialModalRef.close(a.result))}).add(()=>{this.isLoading=!this.isLoading})}}clearAssignee(){this.employeeChosen=null}getAssignee(t,a=!1){t&&(t!==this.employeeChosen||a)&&(this.employeeChosen=t)}onChangeEmployee(t){if(t){this.frmAttendance.get("userId").setValue(t.value);var a=this.listEmployees.findIndex(n=>n.userId===t.value);-1!=a&&(this.employeeChosen=this.listEmployees[a]),this.getAssignee(this.employeeChosen,!0)}}static#e=this.\u0275fac=function(a){return new(a||o)(e.Y36(f.so),e.Y36(f.WI),e.Y36(G.n),e.Y36(u.GW),e.Y36(O._o),e.Y36(v.quB),e.Y36(e.sBO),e.Y36(f.uw),e.Y36(we.v),e.Y36(Le.QH))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-add-edit-attendance"]],decls:44,vars:24,consts:[["mat-dialog-title","",1,"d-flex","flex-wrap",2,"margin","unset","padding","1px 10px 1px 28px",3,"nbSpinner"],["label","Save","icon","pi pi-save","styleClass","p-button-sm",3,"disabled","loading","click"],["fxLayout","row","fxLayoutAlign","end center",1,"ml-auto"],["mat-icon-button","","aria-label","Close the dialog",1,"ml-auto",3,"click"],[1,"mat-typography",2,"height","100%","overflow","auto"],[1,"container",3,"formGroup"],[1,"p-fluid","p-grid","p-formgrid"],["fxLayout","row","fxLayoutAlign","space-between center"],["fxLayout","column","fxFlex","49"],[1,"fs-14","w-100","fw-bold"],["alt","Punch in image",2,"height","138px !important","width","100%",3,"src"],["alt","Punch out image",2,"height","138px !important","width","100%",3,"src"],[1,"p-fluid","p-grid","p-formgrid","p-md-1"],[1,"p-field","p-col-12"],["for","employee",1,"fs-14","fw-500"],["formControlName","userId","optionValue","userId","filterBy","firstName,middleName,lastName,email","placeholder","Select an Employee",1,"p-inputtext-sm",3,"options","filter","showClear","readonly","onChange"],["pTemplate","selectedItem"],["pTemplate","item"],[1,"p-field","p-col-12","p-md-1"],["for","punchin",1,"fs-14","fw-500"],["formControlName","punchinDate","inputId","punchin","aria-describedby","punchin-help",1,"p-inputtext-sm",3,"ngModel","showIcon","showClear","readonlyInput","showTime","hourFormat","ngModelChange"],["id","punchin-help",4,"ngIf"],["for","punchinNote",1,"fs-14","fw-500"],["formControlName","punchinNote","id","punchinNote","type","punchinNote","pInputText","",1,"p-inputtext-sm"],["for","punchout",1,"fs-14","fw-500"],["formControlName","punchoutDate","inputId","punchout","aria-describedby","punchout-help",1,"p-inputtext-sm",3,"ngModel","showIcon","showClear","readonlyInput","showTime","hourFormat","ngModelChange"],["id","punchout-help",4,"ngIf"],["for","punchoutNote",1,"fs-14","fw-500"],["formControlName","punchoutNote","id","punchoutNote","type","punchoutNote","pInputText","",1,"p-inputtext-sm"],["class","flex align-items-center gap-2 dropdown-items-with-img",4,"ngIf"],[1,"flex","align-items-center","gap-2","dropdown-items-with-img"],["size","small",1,"custom-nb-user-small",3,"name","title","showTitle","picture"],["id","punchin-help"],["id","punchout-help"]],template:function(a,n){1&a&&(e.TgZ(0,"div",0)(1,"p-button",1),e.NdJ("click",function(){return n.saveData()}),e.qZA(),e.TgZ(2,"div",2)(3,"button",3),e.NdJ("click",function(){return n.closeDialog()}),e.TgZ(4,"mat-icon"),e._uU(5,"close"),e.qZA()()()(),e._UZ(6,"mat-divider"),e.TgZ(7,"mat-dialog-content",4)(8,"form",5)(9,"div",6)(10,"div",7)(11,"div",8)(12,"span",9),e._uU(13,"Punch in image"),e.qZA(),e._UZ(14,"img",10),e.qZA(),e.TgZ(15,"div",8)(16,"span",9),e._uU(17,"Punch out image"),e.qZA(),e._UZ(18,"img",11),e.qZA()(),e.TgZ(19,"div",12)(20,"div",13)(21,"label",14),e._uU(22,"Employee"),e.qZA(),e.TgZ(23,"p-dropdown",15),e.NdJ("onChange",function(i){return n.onChangeEmployee(i)}),e.YNc(24,Eo,1,1,"ng-template",16),e.YNc(25,Ro,2,4,"ng-template",17),e.qZA()()(),e.TgZ(26,"div",18)(27,"label",19),e._uU(28,"Punchin Date"),e.qZA(),e.TgZ(29,"p-calendar",20),e.NdJ("ngModelChange",function(i){return n.defaultPunchinDate=i}),e.qZA(),e.YNc(30,No,2,1,"small",21),e.qZA(),e.TgZ(31,"div",18)(32,"label",22),e._uU(33,"Punchin Note"),e.qZA(),e._UZ(34,"input",23),e.qZA(),e.TgZ(35,"div",18)(36,"label",24),e._uU(37,"Punchout Date"),e.qZA(),e.TgZ(38,"p-calendar",25),e.NdJ("ngModelChange",function(i){return n.defaultPunchoutDate=i}),e.qZA(),e.YNc(39,qo,2,1,"small",26),e.qZA(),e.TgZ(40,"div",18)(41,"label",27),e._uU(42,"Punchout Note"),e.qZA(),e._UZ(43,"input",28),e.qZA()()()()),2&a&&(e.Q6J("nbSpinner",n.isLoading),e.xp6(1),e.Q6J("disabled",!(null!=n.frmAttendance&&n.frmAttendance.valid))("loading",n.isLoading),e.xp6(7),e.Q6J("formGroup",n.frmAttendance),e.xp6(6),e.Q6J("src",(null==n.attendanceModel?null:n.attendanceModel.punchInImageUrl)||"./assets/images/no_image.png",e.LSH),e.xp6(4),e.Q6J("src",(null==n.attendanceModel?null:n.attendanceModel.punchOutImageUrl)||"./assets/images/no_image.png",e.LSH),e.xp6(5),e.Q6J("options",n.listEmployees)("filter",!0)("showClear",!0)("readonly",0!==n.action),e.xp6(6),e.Q6J("ngModel",n.defaultPunchinDate)("showIcon",!0)("showClear",!0)("readonlyInput",!0)("showTime",!0)("hourFormat",24),e.xp6(1),e.Q6J("ngIf",(null==n.frmAttendance||null==n.frmAttendance.controls||null==n.frmAttendance.controls.punchinDate?null:n.frmAttendance.controls.punchinDate.errors)&&((null==n.frmAttendance||null==n.frmAttendance.controls||null==n.frmAttendance.controls.punchinDate?null:n.frmAttendance.controls.punchinDate.dirty)||(null==n.frmAttendance||null==n.frmAttendance.controls||null==n.frmAttendance.controls.punchinDate?null:n.frmAttendance.controls.punchinDate.touched))),e.xp6(8),e.Q6J("ngModel",n.defaultPunchoutDate)("showIcon",!0)("showClear",!0)("readonlyInput",!0)("showTime",!0)("hourFormat",24),e.xp6(1),e.Q6J("ngIf",(null==n.frmAttendance||null==n.frmAttendance.controls||null==n.frmAttendance.controls.punchoutDate?null:n.frmAttendance.controls.punchoutDate.errors)&&((null==n.frmAttendance||null==n.frmAttendance.controls||null==n.frmAttendance.controls.punchoutDate?null:n.frmAttendance.controls.punchoutDate.dirty)||(null==n.frmAttendance||null==n.frmAttendance.controls||null==n.frmAttendance.controls.punchoutDate?null:n.frmAttendance.controls.punchoutDate.touched))))},dependencies:[T.O5,m._Y,m.Fj,m.JJ,m.JL,m.sg,m.u,u.bc,u.VP,u.YE,L.jx,Q.Hw,J.RK,f.uh,f.xY,j.d,v.Q7R,v.k0$,x.xw,x.Wh,x.yH,Je.f,U.zx,se.o,xe.Lt]})}return o})();function Uo(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",12),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.addEditAttendance())}),e.qZA(),e.TgZ(1,"button",13),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.deleteSelectedAttendance())}),e.qZA()}if(2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("label",t.Delete)("disabled",!t.selectedAttendances||!(null!=t.selectedAttendances&&t.selectedAttendances.length))}}function Io(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",14),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2),l=e.MAs(3);return e.KtG(n.clear(l))}),e.qZA(),e.TgZ(1,"button",15),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.reset())}),e.qZA()}}function Fo(o,r){1&o&&(e.TgZ(0,"p-toolbar",9),e.YNc(1,Uo,2,2,"ng-template",10),e.YNc(2,Io,2,0,"ng-template",11),e.qZA())}function Oo(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",17)(1,"span",18),e._UZ(2,"i",19),e.TgZ(3,"input",20),e.NdJ("input",function(n){e.CHM(t),e.oxw(2);const l=e.MAs(3);return e.KtG(l.filterGlobal(n.target.value,"contains"))}),e.qZA()()()}}function Jo(o,r){1&o&&e.YNc(0,Oo,4,0,"ng-template",16)}function Po(o,r){1&o&&(e.TgZ(0,"th",34),e._UZ(1,"p-tableHeaderCheckbox"),e.qZA())}function Yo(o,r){if(1&o&&(e.TgZ(0,"tr"),e.YNc(1,Po,2,0,"th",21),e.TgZ(2,"th",22),e._uU(3," Employee "),e._UZ(4,"p-columnFilter",23)(5,"p-sortIcon",24),e.qZA(),e.TgZ(6,"th",25),e._uU(7," Punchin Date "),e._UZ(8,"p-columnFilter",26),e.qZA(),e.TgZ(9,"th",27),e._uU(10," Punchin Note "),e.qZA(),e.TgZ(11,"th",28),e._uU(12," Punchout Date "),e._UZ(13,"p-columnFilter",29),e.qZA(),e.TgZ(14,"th",27),e._uU(15," Punchout Note "),e.qZA(),e.TgZ(16,"th",30),e._uU(17," Duration "),e._UZ(18,"p-columnFilter",31)(19,"p-sortIcon",32),e.qZA(),e._UZ(20,"th",33),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.isOnlyCurrentUser)}}function Qo(o,r){if(1&o&&(e.TgZ(0,"td"),e._UZ(1,"p-tableCheckbox",39),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("value",t)}}function Wo(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"tr",35),e.YNc(1,Qo,2,1,"td",4),e.TgZ(2,"td")(3,"nb-user",36),e.NdJ("click",function(){const l=e.CHM(t).$implicit,i=e.oxw();return e.KtG(i.openEmployeeDetail(null==l?null:l.User))}),e.qZA()(),e.TgZ(4,"td"),e._uU(5),e.ALo(6,"dateTimeFormat"),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.ALo(11,"dateTimeFormat"),e.qZA(),e.TgZ(12,"td"),e._uU(13),e.qZA(),e.TgZ(14,"td"),e._uU(15),e.ALo(16,"numberFormat"),e.qZA(),e.TgZ(17,"td")(18,"button",37),e.NdJ("click",function(){const l=e.CHM(t).$implicit,i=e.oxw();return e.KtG(i.addEditAttendance(l))}),e.qZA(),e.TgZ(19,"button",38),e.NdJ("click",function(){const l=e.CHM(t).$implicit,i=e.oxw();return e.KtG(i.deleteSelectedAttendance(l))}),e.qZA()()()}if(2&o){const t=r.$implicit,a=e.oxw();e.Q6J("pEditableRow",t),e.xp6(1),e.Q6J("ngIf",!a.isOnlyCurrentUser),e.xp6(2),e.Q6J("name",((null==t||null==t.User?null:t.User.firstName)||"")+" "+((null==t||null==t.User?null:t.User.middleName)||"")+" "+((null==t||null==t.User?null:t.User.lastName)||""))("showTitle",!1)("picture",null==t||null==t.User?null:t.User.avatarUrl),e.xp6(2),e.Oqu(e.lcZ(6,10,null==t?null:t.punchinDate)),e.xp6(3),e.Oqu(null==t?null:t.punchinNote),e.xp6(2),e.Oqu(e.lcZ(11,12,null==t?null:t.punchoutDate)),e.xp6(3),e.Oqu(null==t?null:t.punchoutNote),e.xp6(2),e.Oqu(e.lcZ(16,14,null==t?null:t.duration))}}function Ho(o,r){}function $o(o,r){1&o&&(e.TgZ(0,"tr")(1,"td",40),e._uU(2,"No record found."),e.qZA()())}const Go=function(){return{"min-width":"50rem"}},Bo=function(o){return[10,25,o]},Vo=function(){return["displayName"]};let pt=(()=>{class o{constructor(t,a,n,l,i){this.attendanceService=t,this.employeeService=a,this.dataStateService=n,this.dialog=l,this.messageService=i,this.isOnlyCurrentUser=!1,this.currentUser=null,this.scrollHeight="700px",this.destroy$=new R.x,this.listEmployees=[],this.first=0,this.rows=10,this.loading=!1,this.employeeService.getAllEmployee().pipe((0,k.R)(this.destroy$)).subscribe(s=>{s.result&&(this.listEmployees=s.result,this.listEmployees.map(c=>{let d=`${c.firstName} ${c.middleName} ${c.lastName}`;c.displayName=d.trim()?d:"Unknown"}))})}ngOnInit(){var t=this;return(0,p.Z)(function*(){t.loading=!t.loading,yield t.refreshData(),t.loading=!t.loading})()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}refreshData(){var t=this;return(0,p.Z)(function*(){t.loading=!t.loading;var a=yield t.attendanceService.getAllAttendance().pipe((0,k.R)(t.destroy$)).toPromise();a.result&&(t.isOnlyCurrentUser&&(a.result=a.result.filter(n=>n.userId===t.currentUser.userId)),t.dataTable=a.result),t.loading=!t.loading,t.selectedAttendances=[]})()}addEditAttendance(t=null){var a=this;return(0,p.Z)(function*(){a.attendanceModel=t,a.dialog.open(dt,{disableClose:!0,height:"100vh",width:"600px",backdropClass:"custom-backdrop",hasBackdrop:!0,autoFocus:!1,data:{model:t,listEmployees:a.listEmployees,action:null===t?Z.t.Add:Z.t.Edit}}).afterClosed().subscribe(function(){var l=(0,p.Z)(function*(i){i&&(yield a.refreshData())});return function(i){return l.apply(this,arguments)}}())})()}next(){this.first=this.first+this.rows}prev(){this.first=this.first-this.rows}reset(){var t=this;return(0,p.Z)(function*(){t.first=0,yield t.refreshData()})()}pageChange(t){this.first=t.first,this.rows=t.rows}clear(t){t.clear()}deleteSelectedAttendance(t=null){var a=t?[t.attendanceId]:this.selectedAttendances.map(l=>l.attendanceId);this.dialog.open($,{width:"auto",height:"auto",backdropClass:"custom-backdrop",hasBackdrop:!0,autoFocus:!1,data:{message:`Do you wish to remove ${a.length} item(s)?`}}).afterClosed().subscribe(l=>{this.attendanceService.deleteAttendance(a).subscribe(i=>{i.result?(this.messageService.add({key:"toast1",severity:"success",summary:"Success",detail:"Delete successfully!",life:2e3}),this.refreshData()):this.messageService.add({key:"toast1",severity:"warn",summary:"Warning",detail:"Failed!",life:2e3})})})}openEmployeeDetail(t=null){this.isOnlyCurrentUser||this.dialog.open(Ue,{width:"90vw",height:"90vh",backdropClass:"custom-backdrop",hasBackdrop:!0,data:{model:t,action:Z.t.Edit}}).afterClosed().subscribe(a=>{})}static#e=this.\u0275fac=function(a){return new(a||o)(e.Y36(we.v),e.Y36(G.n),e.Y36(ne.Q),e.Y36(f.uw),e.Y36(L.ez))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-attendance-managment"]],inputs:{isOnlyCurrentUser:"isOnlyCurrentUser",currentUser:"currentUser",scrollHeight:"scrollHeight"},decls:9,vars:18,consts:[[1,"card","w-100"],["styleClass","mb-4 gap-2",4,"ngIf"],["styleClass","p-datatable-sm","editMode","row","dataKey","attendanceId",3,"value","paginator","rows","showCurrentPageReport","tableStyle","rowsPerPageOptions","loading","globalFilterFields","selection","rowHover","scrollable","scrollHeight","onPage","selectionChange"],["table",""],[4,"ngIf"],["pTemplate","header"],["pTemplate","body"],["pTemplate","paginatorleft"],["pTemplate","emptymessage"],["styleClass","mb-4 gap-2"],["pTemplate","left"],["pTemplate","right"],["pButton","","pRipple","","label","New","icon","pi pi-plus",1,"p-button-success","p-button-sm","mr-2",3,"click"],["pButton","","pRipple","","icon","pi pi-trash",1,"p-button-danger","p-button-sm",3,"label","disabled","click"],["pButton","","label","Clear","icon","pi pi-filter-slash",1,"p-button-outlined","p-button-sm","mr-2",3,"click"],["pButton","","label","Refresh","icon","pi pi-refresh",1,"p-button-outlined","p-button-sm",3,"click"],["pTemplate","caption"],[1,"flex"],[1,"p-input-icon-left","ml-auto"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search by name",1,"p-inputtext-sm",3,"input"],["style","width: 4rem",4,"ngIf"],["pSortableColumn","displayName",2,"width","20%"],["type","text","field","displayName","display","menu"],["field","displayName"],["pSortableColumn","punchinDate",2,"width","15%"],["type","date","field","punchinDate","display","menu"],[2,"width","10%"],["pSortableColumn","punchoutDate",2,"width","15%"],["type","date","field","punchoutDate","display","menu"],["pSortableColumn","duration",2,"width","15%"],["type","numeric","field","duration","display","menu"],["field","duration"],[2,"width","15%"],[2,"width","4rem"],[3,"pEditableRow"],["size","small","title","Engineer",1,"custom-nb-user-small",3,"name","showTitle","picture","click"],["pButton","","pRipple","","icon","pi pi-pencil",1,"p-button-sm","p-button-success","mr-2",3,"click"],["pButton","","pRipple","","icon","pi pi-trash",1,"p-button-sm","p-button-warning",3,"click"],[3,"value"],["colspan","20"]],template:function(a,n){1&a&&(e.TgZ(0,"div",0),e.YNc(1,Fo,3,0,"p-toolbar",1),e.TgZ(2,"p-table",2,3),e.NdJ("onPage",function(i){return n.pageChange(i)})("selectionChange",function(i){return n.selectedAttendances=i}),e.YNc(4,Jo,1,0,null,4),e.YNc(5,Yo,21,1,"ng-template",5),e.YNc(6,Wo,20,16,"ng-template",6),e.YNc(7,Ho,0,0,"ng-template",7),e.YNc(8,$o,3,0,"ng-template",8),e.qZA()()),2&a&&(e.xp6(1),e.Q6J("ngIf",!n.isOnlyCurrentUser),e.xp6(1),e.Q6J("value",n.dataTable)("paginator",!0)("rows",10)("showCurrentPageReport",!0)("tableStyle",e.DdM(14,Go))("rowsPerPageOptions",e.VKq(15,Bo,null==n.dataTable?null:n.dataTable.length))("loading",n.loading)("globalFilterFields",e.DdM(17,Vo))("selection",n.selectedAttendances)("rowHover",!0)("scrollable",!0)("scrollHeight",n.scrollHeight),e.xp6(2),e.Q6J("ngIf",!n.isOnlyCurrentUser))},dependencies:[T.O5,L.jx,v.k0$,U.Hq,se.o,b.iA,b.lQ,b.fz,b.UA,b.Mo,b.D$,b.xl,ce.o,Ge.p,de.X$],styles:[".w-100[_ngcontent-%COMP%]{width:100%}"]})}return o})();function zo(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",11),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.addEditLeaveRequest())}),e.qZA()}}function Ko(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",12),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2),l=e.MAs(3);return e.KtG(n.clear(l))}),e.qZA(),e.TgZ(1,"button",13),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.reset())}),e.qZA()}}function jo(o,r){1&o&&(e.TgZ(0,"p-toolbar",8),e.YNc(1,zo,1,0,"ng-template",9),e.YNc(2,Ko,2,0,"ng-template",10),e.qZA())}function Xo(o,r){1&o&&(e.TgZ(0,"th",33),e._UZ(1,"p-tableHeaderCheckbox"),e.qZA())}function el(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"p-dropdown",34),e.NdJ("onChange",function(n){const i=e.CHM(t).filterCallback;return e.KtG(i(null==n?null:n.value))}),e.qZA()}if(2&o){const t=r.$implicit,a=e.oxw(2);e.Q6J("ngModel",t)("options",a.lstLeaveRequestState)}}function tl(o,r){if(1&o&&(e.TgZ(0,"tr"),e.YNc(1,Xo,2,0,"th",14),e.TgZ(2,"th",15),e._uU(3," Reason "),e.qZA(),e.TgZ(4,"th",16),e._uU(5," Employee "),e._UZ(6,"p-columnFilter",17)(7,"p-sortIcon",18),e.qZA(),e.TgZ(8,"th",19),e._uU(9," Status "),e.TgZ(10,"p-columnFilter",20),e.YNc(11,el,1,2,"ng-template",21),e.qZA()(),e.TgZ(12,"th",22),e._uU(13," Leave Entitlement "),e._UZ(14,"p-columnFilter",23),e.qZA(),e.TgZ(15,"th",24),e._uU(16," Leave Date From "),e._UZ(17,"p-columnFilter",25),e.qZA(),e.TgZ(18,"th",26),e._uU(19," Leave Date To "),e._UZ(20,"p-columnFilter",27),e.qZA(),e.TgZ(21,"th",28),e._uU(22," Session "),e.qZA(),e.TgZ(23,"th",29),e._uU(24," Number Of Hour "),e._UZ(25,"p-columnFilter",30),e.qZA(),e.TgZ(26,"th",31),e._uU(27," Note "),e.qZA(),e._UZ(28,"th",32),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.isShowToolBar)}}function nl(o,r){if(1&o&&(e.TgZ(0,"td"),e._UZ(1,"p-tableCheckbox",41),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("value",t)}}function al(o,r){1&o&&e.GkF(0)}function ol(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",42),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,l=e.oxw();return e.KtG(l.addEditLeaveRequest(n))}),e.qZA()}}const ll=function(o){return{row:o}};function il(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"tr",35),e.YNc(1,nl,2,1,"td",36),e.TgZ(2,"td"),e._uU(3),e.qZA(),e.TgZ(4,"td",37),e.NdJ("click",function(){const l=e.CHM(t).$implicit,i=e.oxw();return e.KtG(i.openEmployeeDetail(l.User))}),e._UZ(5,"nb-user",38),e.qZA(),e.TgZ(6,"td"),e.YNc(7,al,1,0,"ng-container",39),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.ALo(12,"dateTimeFormat"),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.ALo(15,"dateTimeFormat"),e.qZA(),e.TgZ(16,"td"),e._uU(17),e.qZA(),e.TgZ(18,"td"),e._uU(19),e.qZA(),e.TgZ(20,"td"),e._uU(21),e.qZA(),e.TgZ(22,"td"),e.YNc(23,ol,1,0,"button",40),e.qZA()()}if(2&o){const t=r.$implicit,a=e.oxw(),n=e.MAs(8);e.Q6J("pEditableRow",t),e.xp6(1),e.Q6J("ngIf",a.isShowToolBar),e.xp6(2),e.Oqu(null==t?null:t.reason),e.xp6(2),e.Q6J("name",((null==t||null==t.User?null:t.User.firstName)||"")+" "+((null==t||null==t.User?null:t.User.middleName)||"")+" "+((null==t||null==t.User?null:t.User.lastName)||""))("showTitle",!1)("picture",null==t||null==t.User?null:t.User.avatarUrl),e.xp6(2),e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.VKq(19,ll,t)),e.xp6(2),e.Oqu(null==t||null==t.LeaveEntitlement||null==t.LeaveEntitlement.LeaveType?null:t.LeaveEntitlement.LeaveType.leaveTypeName),e.xp6(2),e.Oqu(e.lcZ(12,15,null==t?null:t.leaveDateFrom)),e.xp6(3),e.Oqu(e.lcZ(15,17,null==t?null:t.leaveDateTo)),e.xp6(3),e.Oqu(null==t?null:t.session),e.xp6(2),e.Oqu(null==t?null:t.numberOfHour),e.xp6(2),e.Oqu(null==t?null:t.note),e.xp6(2),e.Q6J("ngIf",a.isAdmin||1===(null==t?null:t.status))}}function rl(o,r){}function sl(o,r){if(1&o&&(e.TgZ(0,"mat-option",41)(1,"div",44)(2,"div",45),e._uU(3),e.qZA()()()),2&o){const t=r.$implicit;e.Q6J("value",null==t?null:t.dataStateId),e.xp6(1),e.Udp("background-color",null==t?null:t.colorCode),e.xp6(2),e.hij(" ",null==t?null:t.dataStateName," ")}}function ul(o,r){if(1&o&&(e.ynx(0),e.YNc(1,sl,4,4,"mat-option",46),e.BQk()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.lstLeaveRequestState)}}function cl(o,r){if(1&o&&(e.TgZ(0,"mat-option",41)(1,"div",44)(2,"div",45),e._uU(3),e.qZA()()()),2&o){const t=r.$implicit;e.Q6J("value",null==t?null:t.dataStateId),e.xp6(1),e.Udp("background-color",null==t?null:t.colorCode),e.xp6(2),e.hij(" ",null==t?null:t.dataStateName," ")}}function dl(o,r){if(1&o&&(e.ynx(0),e.YNc(1,cl,4,4,"mat-option",46),e.BQk()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.lstLeaveRequestStateEmployee)}}function pl(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"mat-select",43),e.NdJ("ngModelChange",function(n){const i=e.CHM(t).row;return e.KtG(i.status=n)})("selectionChange",function(n){const i=e.CHM(t).row,s=e.oxw();return e.KtG(s.saveStatusInline(n,i))}),e.TgZ(1,"mat-select-trigger")(2,"div",44)(3,"div",45),e._uU(4),e.qZA()()(),e.YNc(5,ul,2,1,"ng-container",36),e.YNc(6,dl,2,1,"ng-container",36),e.qZA()}if(2&o){const t=r.row,a=e.oxw();e.Q6J("ngModel",t.status)("disabled",!a.isAdmin&&1!==t.status),e.xp6(2),e.Udp("background-color",a.handleDisplayStatus(t.status,!0)),e.xp6(2),e.hij(" ",a.handleDisplayStatus(t.status)," "),e.xp6(1),e.Q6J("ngIf",a.isAdmin||(null==a.user?null:a.user.userId)===(null==t||null==t.User?null:t.User.ownerId)),e.xp6(1),e.Q6J("ngIf",(null==a.user?null:a.user.userId)===t.userId&&!a.isAdmin)}}const ml=function(){return{"min-width":"50rem"}},gl=function(o){return[10,25,o]},fl=function(){return["leaveTypeName"]};let hl=(()=>{class o{constructor(t,a,n,l,i,s){this.leaveRequestService=t,this.employeeService=a,this.authService=n,this.dialog=l,this.dataStateService=i,this.toast=s,this.isAdmin=!1,this.isOnlyCurrentUser=!1,this.currentUser=null,this.scrollHeight="700px",this.isShowToolBar=!0,this.destroy$=new R.x,this.listEmployees=[],this.lstLeaveRequestState=[],this.lstLeaveRequestStateEmployee=[],this.first=0,this.rows=10,this.loading=!1,this.authService.onTokenChange().subscribe(c=>{c.isValid()&&(this.user=c.getPayload()?.user,this.user?.roles?.find(d=>"admin"===d.roleName)&&(this.isAdmin=!0))}),this.employeeService.getAllEmployee().pipe((0,k.R)(this.destroy$)).subscribe(c=>{c.result&&(this.listEmployees=c.result,this.listEmployees.map(d=>{let h=`${d.firstName} ${d.middleName} ${d.lastName}`;d.displayName=h.trim()?h:"Unknown"}))}),this.dataStateService.getDataStateByType("LEAVE_REQUEST").pipe((0,k.R)(this.destroy$)).subscribe(c=>{c.result&&(this.lstLeaveRequestState=c.result,this.lstLeaveRequestStateEmployee=this.lstLeaveRequestState.filter(d=>"WAITING"===d.dataStateName||"CANCELED"===d.dataStateName))})}ngOnInit(){var t=this;return(0,p.Z)(function*(){t.loading=!t.loading,yield t.refreshData(),t.loading=!t.loading})()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}refreshData(){var t=this;return(0,p.Z)(function*(){t.loading=!t.loading;var a=yield t.leaveRequestService.getAllLeaveRequest().pipe((0,k.R)(t.destroy$)).toPromise();a.result&&(t.dataTable=a.result,t.isOnlyCurrentUser&&(t.dataTable=t.dataTable.filter(n=>n.userId==t.currentUser.userId)),t.isAdmin||(t.dataTable=t.dataTable.filter(n=>n.userId===t.user?.userId||n.User?.ownerId===t.user?.userId))),t.loading=!t.loading})()}addEditLeaveRequest(t=null){var a=this;return(0,p.Z)(function*(){a.leaveRequestModel=t,a.dialog.open(Pe,{disableClose:!0,height:"100vh",width:"600px",autoFocus:!1,backdropClass:"custom-backdrop",hasBackdrop:!0,data:{model:t,listEmployees:a.listEmployees,action:null===t?Z.t.Add:Z.t.Edit}}).afterClosed().subscribe(function(){var l=(0,p.Z)(function*(i){i&&(yield a.refreshData())});return function(i){return l.apply(this,arguments)}}())})()}next(){this.first=this.first+this.rows}prev(){this.first=this.first-this.rows}reset(){var t=this;return(0,p.Z)(function*(){t.first=0,yield t.refreshData()})()}pageChange(t){this.first=t.first,this.rows=t.rows}clear(t){t.clear()}deleteLeaveRequest(t){}deleteSelectedRequest(){}handleDisplayStatus(t,a=!1){if(this.lstLeaveRequestState?.length<=0)return a?"#0000":"";if(a){var n=this.lstLeaveRequestState?.find(i=>i.dataStateId===t);return n?n?.colorCode:"#0000"}var l=this.lstLeaveRequestState?.find(i=>i.dataStateId===t);return l?l?.dataStateName:""}saveStatusInline(t,a){t&&a&&(a.status=t?.value,a.status===this.lstLeaveRequestState.find(n=>"REJECTED"===n.dataStateName).dataStateId?this.dialog.open(Ye,{backdropClass:"custom-backdrop",hasBackdrop:!0}).afterClosed().subscribe(l=>{l?(a.reasonRejected=l,this.leaveRequestService.saveLeaveRequest(a).pipe((0,k.R)(this.destroy$)).subscribe(i=>{i.result&&this.toast.success("Change status successfully","Success",{position:v.d6C.BOTTOM_END,duration:3e3})}).add(()=>{this.refreshData()})):this.refreshData()}):this.leaveRequestService.saveLeaveRequest(a).pipe((0,k.R)(this.destroy$)).subscribe(n=>{n.result&&this.toast.success("Change status successfully","Success",{position:v.d6C.BOTTOM_END,duration:3e3})}).add(()=>{this.refreshData()}))}openEmployeeDetail(t=null){this.dialog.open(Ue,{width:"90vw",height:"90vh",backdropClass:"custom-backdrop",hasBackdrop:!0,data:{model:t,action:Z.t.Edit}}).afterClosed().subscribe(a=>{})}static#e=this.\u0275fac=function(a){return new(a||o)(e.Y36(De.k),e.Y36(G.n),e.Y36(O._o),e.Y36(f.uw),e.Y36(ne.Q),e.Y36(v.quB))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-leave-request-management"]],inputs:{isOnlyCurrentUser:"isOnlyCurrentUser",currentUser:"currentUser",scrollHeight:"scrollHeight",isShowToolBar:"isShowToolBar"},decls:9,vars:17,consts:[[1,"card"],["styleClass","mb-4 gap-2",4,"ngIf"],["styleClass","p-datatable-sm","scrollHeight","flex","editMode","row","dataKey","leaveRequestId",3,"value","paginator","rows","showCurrentPageReport","tableStyle","rowsPerPageOptions","loading","globalFilterFields","selection","rowHover","scrollable","scrollHeight","onPage","selectionChange"],["table",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","paginatorleft"],["status",""],["styleClass","mb-4 gap-2"],["pTemplate","left"],["pTemplate","right"],["pButton","","pRipple","","label","New","icon","pi pi-plus",1,"p-button-success","p-button-sm","mr-2",3,"click"],["pButton","","label","Clear","icon","pi pi-filter-slash",1,"p-button-outlined","p-button-sm",3,"click"],["pButton","","label","Refresh","icon","pi pi-refresh",1,"p-button-outlined","p-button-sm",2,"margin-left","10px",3,"click"],["style","width: 4rem",4,"ngIf"],["pSortableColumn","reason",2,"min-width","150px"],["pSortableColumn","employee.displayName",2,"min-width","150px"],["type","text","field","employee.displayName","display","menu"],["field","employee.displayName"],["pSortableColumn","status",2,"min-width","150px"],["field","status","matchMode","equals","display","menu"],["pTemplate","filter"],["pSortableColumn","leaveEntitlement",2,"min-width","150px"],["type","text","field","leaveEntitlement","display","menu"],["pSortableColumn","leaveDateFrom",2,"min-width","150px"],["type","date","field","leaveDateFrom","display","menu"],["pSortableColumn","leaveDateTo",2,"min-width","150px"],["type","date","field","leaveDateTo","display","menu"],["pSortableColumn","session",2,"min-width","150px"],["pSortableColumn","numberOfHour",2,"min-width","150px"],["type","numeric","field","numberOfHour","display","menu"],["pSortableColumn","note",2,"min-width","150px"],[2,"min-width","150px"],[2,"width","4rem"],["optionLabel","dataStateName","optionValue","dataStateId","placeholder","Any",3,"ngModel","options","onChange"],[3,"pEditableRow"],[4,"ngIf"],[3,"click"],["size","small","title","Engineer",1,"custom-nb-user-small",3,"name","showTitle","picture"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["pButton","","pRipple","","icon","pi pi-pencil","class","p-button-sm p-button-success mr-2",3,"click",4,"ngIf"],[3,"value"],["pButton","","pRipple","","icon","pi pi-pencil",1,"p-button-sm","p-button-success","mr-2",3,"click"],["matTooltip","Click to edit",3,"ngModel","disabled","ngModelChange","selectionChange"],[1,"badge","badge-pill"],[2,"color","white"],[3,"value",4,"ngFor","ngForOf"]],template:function(a,n){1&a&&(e.TgZ(0,"div",0),e.YNc(1,jo,3,0,"p-toolbar",1),e.TgZ(2,"p-table",2,3),e.NdJ("onPage",function(i){return n.pageChange(i)})("selectionChange",function(i){return n.selectedLeaveRequests=i}),e.YNc(4,tl,29,1,"ng-template",4),e.YNc(5,il,24,21,"ng-template",5),e.YNc(6,rl,0,0,"ng-template",6),e.qZA()(),e.YNc(7,pl,7,7,"ng-template",null,7,e.W1O)),2&a&&(e.xp6(1),e.Q6J("ngIf",n.isShowToolBar),e.xp6(1),e.Q6J("value",n.dataTable)("paginator",!0)("rows",10)("showCurrentPageReport",!0)("tableStyle",e.DdM(13,ml))("rowsPerPageOptions",e.VKq(14,gl,null==n.dataTable?null:n.dataTable.length))("loading",n.loading)("globalFilterFields",e.DdM(16,fl))("selection",n.selectedLeaveRequests)("rowHover",!0)("scrollable",!0)("scrollHeight",n.scrollHeight))},dependencies:[T.sg,T.O5,T.tP,m.JJ,m.On,u.bc,u.YE,L.jx,ge.gD,ge.$L,Fe.ey,_e.gM,v.k0$,U.Hq,xe.Lt,b.iA,b.lQ,b.fz,b.UA,b.Mo,b.D$,b.xl,ce.o,de.X$]})}return o})();class B{constructor(){this.order=0,this.listProfile=[],this.listStatus=[],this.listRoles=[],this.listStatusLeave=[]}}(0,C.gn)([(0,u.vg)()],B.prototype,"timeMode",void 0),(0,C.gn)([(0,u.vg)()],B.prototype,"viewMode",void 0),(0,C.gn)([(0,u.vg)()],B.prototype,"fromDate",void 0),(0,C.gn)([(0,u.vg)()],B.prototype,"toDate",void 0),(0,C.gn)([(0,u.vg)()],B.prototype,"order",void 0),(0,C.gn)([(0,u.vg)()],B.prototype,"listProfile",void 0),(0,C.gn)([(0,u.vg)()],B.prototype,"listStatus",void 0),(0,C.gn)([(0,u.vg)()],B.prototype,"listRoles",void 0),(0,C.gn)([(0,u.vg)()],B.prototype,"listStatusLeave",void 0);let _l=(()=>{class o{constructor(t){this.http=t,this.baseUrl=Me.NZ.apiReportScheduleManagement}getReportSchedule(t){return this.http.post(`${this.baseUrl}/GetReportSchedule`,t)}static#e=this.\u0275fac=function(a){return new(a||o)(e.LFG(Ae.eN))};static#t=this.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var N=g(418),Oe=g(108);function vl(o,r){1&o&&(e.ynx(0),e._uU(1," No Title "),e.BQk())}function yl(o,r){if(1&o&&(e.ynx(0),e._uU(1),e.BQk()),2&o){const t=e.oxw();e.xp6(1),e.hij(" ",t.titleHeader," ")}}function bl(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"nb-list-item",5),e.NdJ("click",function(){const l=e.CHM(t).$implicit,i=e.oxw();return e.KtG(i.isAdmin?i.openAttendanceDetail(l):"")}),e._uU(1),e.ALo(2,"dateTimeToTime"),e.ALo(3,"dateTimeToTime"),e.qZA()}if(2&o){const t=r.$implicit;e.xp6(1),e.lnq(" ",null!=t&&t.punchinDate?e.lcZ(2,3,null==t?null:t.punchinDate):"??:??:??"," - ",null!=t&&t.punchoutDate?e.lcZ(3,5,null==t?null:t.punchoutDate):"??:??:??"," = ",null==t||null==t.duration?null:t.duration.toFixed(2),"h ")}}const Cl=function(o){return{color:o}};function Tl(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"nb-list-item",5),e.NdJ("click",function(){const l=e.CHM(t).$implicit,i=e.oxw();return e.KtG(i.isAdmin?i.openLeaveRequestDetail(l):"")}),e.TgZ(1,"mat-icon",6),e._uU(2,"person_off"),e.qZA(),e._uU(3),e.ALo(4,"dateTimeToTimeNotSeconds"),e.ALo(5,"dateTimeToTimeNotSeconds"),e.qZA()}if(2&o){const t=r.$implicit,a=e.oxw();e.xp6(1),e.Q6J("ngStyle",e.VKq(8,Cl,null!=t&&null!=t.leaveEntitlement&&null!=t.leaveEntitlement.leaveType&&t.leaveEntitlement.leaveType.isPaidSalary?(null==t||null==t.leaveEntitlement?null:t.leaveEntitlement.leaveTypeId)===a.bonusTypeId?"#00ced1":"#3366cc":"#996600")),e.xp6(2),e.lnq(" ",e.lcZ(4,4,null==t?null:t.leaveDateFrom)," - ",e.lcZ(5,6,null==t?null:t.leaveDateTo)," = ",null==t||null==t.numberOfHour?null:t.numberOfHour.toFixed(2),"h ")}}let xl=(()=>{class o{constructor(t,a,n,l,i,s){this.dialog=t,this.settingService=a,this.permissionService=n,this.leaveRequestService=l,this.employeeService=i,this.authService=s,this.titleHeader=null,this.onRefresh=new e.vpe,this.isAdmin=!1,this.listEmployees=[],this.lstAttendanceDetails=[],this.lstLeaveRequestDetails=[],this.bonusTypeId=0,this.hasEditAttendancePermission=!1,this.hasEditLeaveRequestPermission=!1,this.hasSuperAdminPermission=!1,this.employeeService.getAllEmployee().subscribe(c=>{c.result&&(this.listEmployees=c.result,this.listEmployees.map(d=>{let h=`${d.firstName} ${d.middleName} ${d.lastName}`;d.displayName=h.trim()?h:"Unknown"}))}),this.authService.onTokenChange().subscribe(c=>{c.isValid()&&(this.user=c.getPayload().user,"admin"===this.user?.roles[0]?.roleName&&(this.isAdmin=!0))})}ngOnInit(){var t=this;return(0,p.Z)(function*(){t.data?.map(a=>{a?.attendanceId&&t.lstAttendanceDetails?.push(a),a?.leaveRequestId&&t.lstLeaveRequestDetails?.push(a)}),yield t.getListSettingLeaveType()})()}getListSettingLeaveType(){var t=this;return(0,p.Z)(function*(){var a=yield t.settingService.getSettingByGroup("LEAVE_TYPE").toPromise();a.result&&(t.bonusTypeId=Number(a.result.find(n=>"BONUS_LEAVE_TYPE_ID"===n.key)?.value))})()}openAttendanceDetail(t){t&&this.dialog.open(dt,{disableClose:!0,height:"100vh",width:"600px",panelClass:"dialog-detail",autoFocus:!1,data:{model:t,action:Z.t.Edit,listEmployees:this.listEmployees}}).afterClosed().subscribe(n=>{n&&this.onRefresh.emit(n)})}openLeaveRequestDetail(t){t&&this.dialog.open(Pe,{disableClose:!0,height:"100vh",width:"600px",panelClass:"dialog-detail",autoFocus:!1,data:{model:t,action:Z.t.Edit,listEmployees:this.listEmployees}}).afterClosed().subscribe(n=>{n&&this.onRefresh.emit(n)})}static#e=this.\u0275fac=function(a){return new(a||o)(e.Y36(f.uw),e.Y36(Ee.L),e.Y36(Le.QH),e.Y36(De.k),e.Y36(G.n),e.Y36(O._o))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-popover-detail-schedule-cell"]],inputs:{data:"data",titleHeader:"titleHeader"},outputs:{onRefresh:"onRefresh"},decls:11,vars:4,consts:[[1,"body-card"],[4,"ngIf"],["tabTitle","Attendance"],[3,"click",4,"ngFor","ngForOf"],["tabTitle","Leave Request"],[3,"click"],[2,"margin-right","0px !important",3,"ngStyle"]],template:function(a,n){1&a&&(e.TgZ(0,"nb-card",0)(1,"nb-card-header"),e.YNc(2,vl,2,0,"ng-container",1),e.YNc(3,yl,2,1,"ng-container",1),e.qZA(),e.TgZ(4,"nb-tabset")(5,"nb-tab",2)(6,"nb-list"),e.YNc(7,bl,4,7,"nb-list-item",3),e.qZA()(),e.TgZ(8,"nb-tab",4)(9,"nb-list"),e.YNc(10,Tl,6,10,"nb-list-item",3),e.qZA()()()()),2&a&&(e.xp6(2),e.Q6J("ngIf",null==n.titleHeader),e.xp6(1),e.Q6J("ngIf",null!==n.titleHeader),e.xp6(4),e.Q6J("ngForOf",n.lstAttendanceDetails),e.xp6(3),e.Q6J("ngForOf",n.lstLeaveRequestDetails))},dependencies:[T.sg,T.O5,T.PC,v.Asz,v.ndF,Q.Hw,v.kyn,v.TR4,v.zP_,v.qBV,ue.Zl,de.Qn,de.ck],styles:["[_nghost-%COMP%]  nb-card{margin-bottom:0}[_nghost-%COMP%]  nb-card, [_nghost-%COMP%]  nb-card-header{border-radius:10px 10px 0 0;padding:0}[_nghost-%COMP%]  nb-card-header{background-color:#307abd;text-align:center;color:#e0e0e0}[_nghost-%COMP%]  nb-card-body{background-color:#d8d8d8;font-size:10px}[_nghost-%COMP%]  nb-list-item{max-height:20px;background-color:#ffebcd;border-radius:10px;margin:5px 0;cursor:pointer;align-items:center;justify-content:center}[_nghost-%COMP%]  nb-tabset .tab-link{max-height:48px}  .mat-mdc-menu-panel.mat-mdc-menu-panel{max-width:355px!important;border-radius:10px}  .mat-mdc-menu-content{padding:unset!important}.body-card[_ngcontent-%COMP%]{max-height:270px;overflow-y:auto;max-width:400px}"]})}return o})(),wl=(()=>{class o{constructor(){}transform(t,a,n){if(t)if("Month"===a){if(t){if(t=t.replace(/,/g,""),Number(t)<9)return"#ff0009";if(Number(t)>=10)return"#008080";if(9<=Number(t)&&Number(t)<10)return"#8dc63f"}}else if(t){if(t.includes("??"))return"#ffaa00";if(!t.includes("--")){var l=t.indexOf("="),i=t.indexOf("h");if(l>-1&&i>-1){var s=Number(t.substring(l+1,i).replace(/,/g,""));if(n){var c=n?.indexOf("("),d=n?.indexOf("h)");s+=Number(n.substring(c+1,d).replace(/,/g,""));var h=n?.indexOf(":"),y=n?.lastIndexOf(":"),w={hours:Number(n.substring(0,h)),minutes:Number(n.substring(h+1,h+3))},S={hours:Number(n.substring(y-2,y)),minutes:Number(n.substring(y+1,y+3))},M={hours:12,minutes:0};(w?.hours<=M?.hours&&13<=S?.hours||n.includes("09:00 - ")&&S.hours>=M.hours||n.includes("13:30 - "))&&(s+=1.5)}return s<9?"#ff0009":s>=10?"#008080":"#8dc63f"}}}}static#e=this.\u0275fac=function(a){return new(a||o)};static#t=this.\u0275pipe=e.Yjl({name:"handleDisplayColor",type:o,pure:!0})}return o})();var Ze=g(6738),Be=g.n(Ze);let mt=(()=>{class o{transform(t,a,n){if(t){const i=Be()(),s=new Date(n).getFullYear();if("Month"===a){if(t===i.format("M/DD"))return"today";if(6===(l=Be()(t,"M/DD").year(s)).day()||0===l.day())return"weekend"}else{if(t===i.format("ddd, MMM D"))return"today";var l;if(6===(l=Be()(t,"ddd, MMM D").year(s)).day()||0===l.day())return"weekend"}}}static#e=this.\u0275fac=function(a){return new(a||o)};static#t=this.\u0275pipe=e.Yjl({name:"checkColorToday",type:o,pure:!0})}return o})();const Sl=["dataTable"],Zl=["matSelectStatus"];function kl(o,r){if(1&o&&(e.TgZ(0,"div",54),e._UZ(1,"nb-user",55),e.qZA()),2&o){const t=r.$implicit;e.xp6(1),e.Q6J("name",((null==t?null:t.firstName)||"")+" "+((null==t?null:t.middleName)||"")+" "+((null==t?null:t.lastName)||""))("title",t.email)("showTitle",!0)("picture",null==t?null:t.avatarUrl)}}const ee=function(o){return{color:o}};function Dl(o,r){if(1&o&&(e.TgZ(0,"mat-button-toggle",56)(1,"mat-icon",57),e._uU(2,"fiber_manual_record"),e.qZA(),e._uU(3),e.qZA()),2&o){const t=r.$implicit,a=e.oxw();e.s9C("value",null==t?null:t.value),e.Q6J("ngStyle",e.VKq(4,ee,null!=a.listStatusChoose&&a.listStatusChoose.includes(null==t?null:t.value)?"":"#cccccc")),e.xp6(1),e.Q6J("ngStyle",e.VKq(6,ee,null!=a.listStatusChoose&&a.listStatusChoose.includes(null==t?null:t.value)?null==t?null:t.codeColor:"#dddddd")),e.xp6(2),e.hij(" ",null==t?null:t.display," ")}}function Ml(o,r){if(1&o&&(e.TgZ(0,"mat-button-toggle",56)(1,"mat-icon",57),e._uU(2,"person_off"),e.qZA(),e._uU(3),e.qZA()),2&o){const t=r.$implicit,a=e.oxw();e.s9C("value",null==t?null:t.value),e.Q6J("ngStyle",e.VKq(4,ee,null!=a.listStatusLeaveChoose&&a.listStatusLeaveChoose.includes(null==t?null:t.value)?"":"#cccccc")),e.xp6(1),e.Q6J("ngStyle",e.VKq(6,ee,null!=a.listStatusLeaveChoose&&a.listStatusLeaveChoose.includes(null==t?null:t.value)?null==t?null:t.codeColor:"#dddddd")),e.xp6(2),e.hij(" ",null==t?null:t.display," ")}}function Al(o,r){1&o&&(e.TgZ(0,"th",58),e._uU(1," Employee "),e.qZA())}function Ll(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"td",59)(1,"b",60),e.NdJ("click",function(){const l=e.CHM(t).$implicit,i=e.oxw();return e.KtG(i.openEmployeeDetail(l.userId))}),e._uU(2),e.qZA()()}if(2&o){const t=r.$implicit;e.ekj("bold-row",t.userName),e.xp6(2),e.hij(" ",t.userName," ")}}const Ve=function(o){return{"background-color":o}};function El(o,r){if(1&o&&(e.TgZ(0,"th",64),e.ALo(1,"checkColorToday"),e._uU(2),e.qZA()),2&o){const t=e.oxw(2).$implicit,a=e.oxw();let n;e.Q6J("ngStyle",e.VKq(7,Ve,"today"===e.Dn7(1,3,null==t?null:t.value,a.timeMode,null==a.frmGroup||null==(n=a.frmGroup.get("fromDate"))?null:n.value)?"#8dc63f":"#ea83ac")),e.uIk("colspan",t.length),e.xp6(2),e.hij(" ",null==t?null:t.value," ")}}const oe=function(o){return{cursor:o}},le=function(o,r){return{data:o,title:r}};function Rl(o,r){if(1&o&&(e.TgZ(0,"td",66),e.ALo(1,"handleDisplayColor"),e.ALo(2,"checkColorToday"),e.TgZ(3,"div",67),e._uU(4),e.qZA()()),2&o){const t=r.$implicit,a=e.oxw(3).$implicit,n=e.oxw(),l=e.MAs(82),i=e.MAs(91);let s;e.Udp("background-color",t[a.key]?e.Dn7(1,8,t[a.key],n.timeMode,"NoPaid"!==t[a.key+"-leaveType"]?t[a.key+"-leave"]:null):t[a.key+"-leave"]?"#d7d7d7":"")("opacity","weekend"===e.Dn7(2,12,null==a?null:a.value,n.timeMode,null==n.frmGroup||null==(s=n.frmGroup.get("fromDate"))?null:s.value)?"40%":""),e.xp6(3),e.Q6J("ngStyle",e.VKq(16,oe,null!=t[a.key]||null!=t[a.key+"-leave"]?"pointer":null))("matMenuTriggerFor",null!=t[a.key]||null!=t[a.key+"-leave"]?l:i)("matMenuTriggerData",e.WLB(18,le,t[a.key+"-detail"],t.userName+" - "+(null==a?null:a.value))),e.xp6(1),e.hij(" ",null===t[a.key]?"":t[a.key]," ")}}function Nl(o,r){1&o&&(e.ynx(0),e.YNc(1,Rl,5,21,"td",65),e.BQk())}function ql(o,r){if(1&o&&(e.TgZ(0,"mat-icon",74),e._uU(1,"person_off"),e.qZA()),2&o){const t=e.oxw().$implicit,a=e.oxw(3).$implicit;e.hYB("matTooltip","[",t[a.key+"-leaveType"],"] ",t[a.key+"-leave"],""),e.Q6J("ngStyle",e.VKq(3,ee,"Paid"===t[a.key+"-leaveType"]?"#3366cc":"#996600"))}}function Ul(o,r){if(1&o&&(e.TgZ(0,"div",75),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit,a=e.oxw(3).$implicit;e.xp6(1),e.hij(" ",t[a.key+"-leave"].substring(15,t[a.key+"-leave"].length-1)," ")}}function Il(o,r){if(1&o&&(e.TgZ(0,"td",69),e.ALo(1,"checkColorToday"),e.TgZ(2,"div",70)(3,"div",71),e.YNc(4,ql,2,5,"mat-icon",72),e.qZA(),e.YNc(5,Ul,2,1,"div",73),e.qZA()()),2&o){const t=r.$implicit,a=e.oxw(3).$implicit,n=e.oxw(),l=e.MAs(82),i=e.MAs(91);let s;e.Udp("background-color",t[a.key+"-leave"]?"#d7d7d7":"")("opacity","weekend"===e.Dn7(1,9,null==a?null:a.value,n.timeMode,null==n.frmGroup||null==(s=n.frmGroup.get("fromDate"))?null:s.value)?"40%":""),e.xp6(2),e.Q6J("ngStyle",e.VKq(13,oe,null!=t[a.key]||null!=t[a.key+"-leave"]?"pointer":null))("matMenuTriggerFor",null!=t[a.key]||null!=t[a.key+"-leave"]?l:i)("matMenuTriggerData",e.WLB(15,le,t[a.key+"-detail"],t.userName+" - "+(null==a?null:a.value))),e.xp6(2),e.Q6J("ngIf",!!t[a.key+"-leave"]),e.xp6(1),e.Q6J("ngIf",!!t[a.key+"-leave"])}}function Fl(o,r){1&o&&(e.ynx(0),e.YNc(1,Il,6,18,"td",68),e.BQk())}function Ol(o,r){if(1&o&&(e.TgZ(0,"mat-icon",77),e._uU(1,"person_off"),e.qZA()),2&o){const t=e.oxw().$implicit,a=e.oxw(3).$implicit;e.hYB("matTooltip","[",t[a.key+"-leaveType"],"] ",t[a.key+"-leave"],""),e.Q6J("ngStyle",e.VKq(3,ee,"Paid"===t[a.key+"-leaveType"]?"#3366cc":"#996600"))}}function Jl(o,r){if(1&o&&(e.TgZ(0,"td",66),e.ALo(1,"handleDisplayColor"),e.ALo(2,"checkColorToday"),e.TgZ(3,"div",70)(4,"div",71),e.YNc(5,Ol,2,5,"mat-icon",76),e.qZA(),e.TgZ(6,"div",75),e._uU(7),e.qZA()()()),2&o){const t=r.$implicit,a=e.oxw(3).$implicit,n=e.oxw(),l=e.MAs(82),i=e.MAs(91);let s;e.Udp("background-color",t[a.key]?e.Dn7(1,9,t[a.key],n.timeMode,"NoPaid"!==t[a.key+"-leaveType"]?t[a.key+"-leave"]:null):t[a.key+"-leave"]?"#d7d7d7":"")("opacity","weekend"===e.Dn7(2,13,null==a?null:a.value,n.timeMode,null==n.frmGroup||null==(s=n.frmGroup.get("fromDate"))?null:s.value)?"40%":""),e.xp6(3),e.Q6J("ngStyle",e.VKq(17,oe,null!=t[a.key]||null!=t[a.key+"-leave"]?"pointer":null))("matMenuTriggerFor",null!=t[a.key]||null!=t[a.key+"-leave"]?l:i)("matMenuTriggerData",e.WLB(19,le,t[a.key+"-detail"],t.userName+" - "+(null==a?null:a.value))),e.xp6(2),e.Q6J("ngIf",!!t[a.key+"-leave"]),e.xp6(2),e.hij(" ",null===t[a.key]?"":t[a.key]," ")}}function Pl(o,r){1&o&&(e.ynx(0),e.YNc(1,Jl,8,22,"td",65),e.BQk())}function Yl(o,r){if(1&o&&(e.ynx(0),e.YNc(1,El,3,9,"th",63),e.YNc(2,Nl,2,0,"ng-container",62),e.YNc(3,Fl,2,0,"ng-container",62),e.YNc(4,Pl,2,0,"ng-container",62),e.BQk()),2&o){const t=e.oxw(2);e.xp6(2),e.Q6J("ngIf","Attendance"===t.viewMode),e.xp6(1),e.Q6J("ngIf","Leave"===t.viewMode),e.xp6(1),e.Q6J("ngIf","Both"===t.viewMode)}}function Ql(o,r){if(1&o&&(e.TgZ(0,"th",79),e.ALo(1,"checkColorToday"),e._uU(2),e.qZA()),2&o){const t=e.oxw(2).$implicit,a=e.oxw();let n;e.Q6J("ngStyle",e.VKq(7,Ve,"today"===e.Dn7(1,3,null==t?null:t.value,a.timeMode,null==a.frmGroup||null==(n=a.frmGroup.get("fromDate"))?null:n.value)?"#8dc63f":"#ea83ac")),e.uIk("colspan",t.length),e.xp6(2),e.hij(" ",null==t?null:t.value," ")}}function Wl(o,r){if(1&o&&(e.TgZ(0,"td",81),e.ALo(1,"handleDisplayColor"),e.ALo(2,"checkColorToday"),e.TgZ(3,"div",67),e._uU(4),e.qZA()()),2&o){const t=r.$implicit,a=e.oxw(3).$implicit,n=e.oxw(),l=e.MAs(82),i=e.MAs(91);let s;e.Udp("color","--"===t[a.key]?"black":"white")("background-color","--"!==t[a.key]&&t[a.key]?e.Dn7(1,10,t[a.key],n.timeMode,"NoPaid"!==t[a.key+"-leaveType"]?t[a.key+"-leave"]:null):t[a.key+"-leave"]?"#d7d7d7":"")("opacity","weekend"===e.Dn7(2,14,null==a?null:a.value,n.timeMode,null==n.frmGroup||null==(s=n.frmGroup.get("fromDate"))?null:s.value)?"40%":""),e.xp6(3),e.Q6J("ngStyle",e.VKq(18,oe,"--"!=t[a.key]||null!=t[a.key+"-leave"]?"pointer":null))("matMenuTriggerFor","--"!=t[a.key]||null!=t[a.key+"-leave"]?l:i)("matMenuTriggerData",e.WLB(20,le,t[a.key+"-detail"],t.userName+" - "+(null==a?null:a.value))),e.xp6(1),e.hij(" ",t[a.key]," ")}}function Hl(o,r){1&o&&(e.ynx(0),e.YNc(1,Wl,5,23,"td",80),e.BQk())}function $l(o,r){if(1&o&&(e.TgZ(0,"mat-icon",87),e._uU(1,"person_off"),e.qZA()),2&o){const t=e.oxw().$implicit,a=e.oxw(3).$implicit;e.Q6J("ngStyle",e.VKq(1,ee,"Paid"===t[a.key+"-leaveType"]?"#3366cc":"#996600"))}}function Gl(o,r){if(1&o&&(e.TgZ(0,"div",88),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit,a=e.oxw(3).$implicit;e.xp6(1),e.AsE(" [",t[a.key+"-leaveType"],"] ",t[a.key+"-leave"]," ")}}function Bl(o,r){if(1&o&&(e.TgZ(0,"td",83),e.ALo(1,"checkColorToday"),e.TgZ(2,"div",70)(3,"div",84),e.YNc(4,$l,2,3,"mat-icon",85),e.qZA(),e.YNc(5,Gl,2,2,"div",86),e.qZA()()),2&o){const t=r.$implicit,a=e.oxw(3).$implicit,n=e.oxw(),l=e.MAs(82),i=e.MAs(91);let s;e.Udp("color","--"===t[a.key]?"black":"white")("background-color",t[a.key+"-leave"]?"#d7d7d7":"")("opacity","weekend"===e.Dn7(1,11,null==a?null:a.value,n.timeMode,null==n.frmGroup||null==(s=n.frmGroup.get("fromDate"))?null:s.value)?"40%":""),e.xp6(2),e.Q6J("ngStyle",e.VKq(15,oe,"--"!=t[a.key]||null!=t[a.key+"-leave"]?"pointer":null))("matMenuTriggerFor","--"!=t[a.key]||null!=t[a.key+"-leave"]?l:i)("matMenuTriggerData",e.WLB(17,le,t[a.key+"-detail"],t.userName+" - "+(null==a?null:a.value))),e.xp6(2),e.Q6J("ngIf",!!t[a.key+"-leave"]),e.xp6(1),e.Q6J("ngIf",!!t[a.key+"-leave"])}}function Vl(o,r){1&o&&(e.ynx(0),e.YNc(1,Bl,6,20,"td",82),e.BQk())}function zl(o,r){if(1&o&&(e.TgZ(0,"mat-icon",77),e._uU(1,"person_off"),e.qZA()),2&o){const t=e.oxw().$implicit,a=e.oxw(3).$implicit;e.hYB("matTooltip","[",t[a.key+"-leaveType"],"] ",t[a.key+"-leave"],""),e.Q6J("ngStyle",e.VKq(3,ee,"Paid"===t[a.key+"-leaveType"]?"#3366cc":"#996600"))}}function Kl(o,r){if(1&o&&(e.TgZ(0,"td",81),e.ALo(1,"handleDisplayColor"),e.ALo(2,"checkColorToday"),e.TgZ(3,"div",70)(4,"div",84),e.YNc(5,zl,2,5,"mat-icon",76),e.qZA(),e.TgZ(6,"div",88),e._uU(7),e.qZA()()()),2&o){const t=r.$implicit,a=e.oxw(3).$implicit,n=e.oxw(),l=e.MAs(82),i=e.MAs(91);let s;e.Udp("color","--"===t[a.key]?"black":"white")("background-color","--"!==t[a.key]&&t[a.key]?e.Dn7(1,11,t[a.key],n.timeMode,"NoPaid"!==t[a.key+"-leaveType"]?t[a.key+"-leave"]:null):t[a.key+"-leave"]?"#d7d7d7":"")("opacity","weekend"===e.Dn7(2,15,null==a?null:a.value,n.timeMode,null==n.frmGroup||null==(s=n.frmGroup.get("fromDate"))?null:s.value)?"40%":""),e.xp6(3),e.Q6J("ngStyle",e.VKq(19,oe,"--"!=t[a.key]||null!=t[a.key+"-leave"]?"pointer":null))("matMenuTriggerFor","--"!=t[a.key]||null!=t[a.key+"-leave"]?l:i)("matMenuTriggerData",e.WLB(21,le,t[a.key+"-detail"],t.userName+" - "+(null==a?null:a.value))),e.xp6(2),e.Q6J("ngIf",!!t[a.key+"-leave"]),e.xp6(2),e.hij(" ",t[a.key]," ")}}function jl(o,r){1&o&&(e.ynx(0),e.YNc(1,Kl,8,24,"td",80),e.BQk())}function Xl(o,r){if(1&o&&(e.ynx(0),e.YNc(1,Ql,3,9,"th",78),e.YNc(2,Hl,2,0,"ng-container",62),e.YNc(3,Vl,2,0,"ng-container",62),e.YNc(4,jl,2,0,"ng-container",62),e.BQk()),2&o){const t=e.oxw(2);e.xp6(2),e.Q6J("ngIf","Attendance"===t.viewMode),e.xp6(1),e.Q6J("ngIf","Leave"===t.viewMode),e.xp6(1),e.Q6J("ngIf","Both"===t.viewMode)}}function ei(o,r){if(1&o&&(e.TgZ(0,"th",90),e.ALo(1,"checkColorToday"),e._uU(2),e.qZA()),2&o){const t=e.oxw(2).$implicit,a=e.oxw();let n;e.Q6J("ngStyle",e.VKq(7,Ve,"today"===e.Dn7(1,3,null==t?null:t.value,a.timeMode,null==a.frmGroup||null==(n=a.frmGroup.get("fromDate"))?null:n.value)?"#8dc63f":"#ea83ac")),e.uIk("colspan",t.length),e.xp6(2),e.hij(" ",t.value," ")}}function ti(o,r){if(1&o&&(e.TgZ(0,"td",81),e.ALo(1,"handleDisplayColor"),e.ALo(2,"checkColorToday"),e.TgZ(3,"div",67),e._uU(4),e.qZA()()),2&o){const t=r.$implicit,a=e.oxw(3).$implicit,n=e.oxw(),l=e.MAs(82),i=e.MAs(91);let s;e.Udp("color","--"===t[a.key]?"black":"white")("background-color","--"!==t[a.key]&&t[a.key]?e.Dn7(1,10,t[a.key],n.timeMode,"NoPaid"!==t[a.key+"-leaveType"]?t[a.key+"-leave"]:null):t[a.key+"-leave"]?"#d7d7d7":"")("opacity","weekend"===e.Dn7(2,14,null==a?null:a.value,n.timeMode,null==n.frmGroup||null==(s=n.frmGroup.get("fromDate"))?null:s.value)?"40%":""),e.xp6(3),e.Q6J("ngStyle",e.VKq(18,oe,"--"!=t[a.key]||null!=t[a.key+"-leave"]?"pointer":null))("matMenuTriggerFor","--"!=t[a.key]||null!=t[a.key+"-leave"]?l:i)("matMenuTriggerData",e.WLB(20,le,t[a.key+"-detail"],t.userName+" - "+(null==a?null:a.value))),e.xp6(1),e.hij(" ",t[a.key]," ")}}function ni(o,r){1&o&&(e.ynx(0),e.YNc(1,ti,5,23,"td",80),e.BQk())}function ai(o,r){if(1&o&&(e.TgZ(0,"mat-icon",87),e._uU(1,"person_off"),e.qZA()),2&o){const t=e.oxw().$implicit,a=e.oxw(3).$implicit;e.Q6J("ngStyle",e.VKq(1,ee,"Paid"===t[a.key+"-leaveType"]?"#3366cc":"#996600"))}}function oi(o,r){if(1&o&&(e.TgZ(0,"div",94),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit,a=e.oxw(3).$implicit;e.xp6(1),e.AsE(" [",t[a.key+"-leaveType"],"] ",t[a.key+"-leave"]," ")}}function li(o,r){if(1&o&&(e.TgZ(0,"td",83),e.ALo(1,"checkColorToday"),e.TgZ(2,"div",70)(3,"div",91)(4,"div",92),e.YNc(5,ai,2,3,"mat-icon",85),e.qZA()(),e.YNc(6,oi,2,2,"div",93),e.qZA()()),2&o){const t=r.$implicit,a=e.oxw(3).$implicit,n=e.oxw(),l=e.MAs(82),i=e.MAs(91);let s;e.Udp("color","--"===t[a.key]?"black":"white")("background-color",t[a.key+"-leave"]?"#d7d7d7":"")("opacity","weekend"===e.Dn7(1,11,null==a?null:a.value,n.timeMode,null==n.frmGroup||null==(s=n.frmGroup.get("fromDate"))?null:s.value)?"40%":""),e.xp6(2),e.Q6J("ngStyle",e.VKq(15,oe,"--"!=t[a.key]||null!=t[a.key+"-leave"]?"pointer":null))("matMenuTriggerFor","--"!=t[a.key]||null!=t[a.key+"-leave"]?l:i)("matMenuTriggerData",e.WLB(17,le,t[a.key+"-detail"],t.userName+" - "+(null==a?null:a.value))),e.xp6(3),e.Q6J("ngIf",!!t[a.key+"-leave"]),e.xp6(1),e.Q6J("ngIf",!!t[a.key+"-leave"])}}function ii(o,r){1&o&&(e.ynx(0),e.YNc(1,li,7,20,"td",82),e.BQk())}function ri(o,r){if(1&o&&(e.TgZ(0,"mat-icon",77),e._uU(1,"person_off"),e.qZA()),2&o){const t=e.oxw().$implicit,a=e.oxw(3).$implicit;e.hYB("matTooltip","[",t[a.key+"-leaveType"],"] ",t[a.key+"-leave"],""),e.Q6J("ngStyle",e.VKq(3,ee,"Paid"===t[a.key+"-leaveType"]?"#3366cc":"#996600"))}}function si(o,r){if(1&o&&(e.TgZ(0,"td",81),e.ALo(1,"handleDisplayColor"),e.ALo(2,"checkColorToday"),e.TgZ(3,"div",70)(4,"div",91)(5,"div",92),e.YNc(6,ri,2,5,"mat-icon",76),e.qZA()(),e.TgZ(7,"div",94),e._uU(8),e.qZA()()()),2&o){const t=r.$implicit,a=e.oxw(3).$implicit,n=e.oxw(),l=e.MAs(82),i=e.MAs(91);let s;e.Udp("color","--"===t[a.key]?"black":"white")("background-color","--"!==t[a.key]&&t[a.key]?e.Dn7(1,11,t[a.key],n.timeMode,"NoPaid"!==t[a.key+"-leaveType"]?t[a.key+"-leave"]:null):t[a.key+"-leave"]?"#d7d7d7":"")("opacity","weekend"===e.Dn7(2,15,null==a?null:a.value,n.timeMode,null==n.frmGroup||null==(s=n.frmGroup.get("fromDate"))?null:s.value)?"40%":""),e.xp6(3),e.Q6J("ngStyle",e.VKq(19,oe,"--"!=t[a.key]||null!=t[a.key+"-leave"]?"pointer":null))("matMenuTriggerFor","--"!=t[a.key]||null!=t[a.key+"-leave"]?l:i)("matMenuTriggerData",e.WLB(21,le,t[a.key+"-detail"],t.userName+" - "+(null==a?null:a.value))),e.xp6(3),e.Q6J("ngIf",!!t[a.key+"-leave"]),e.xp6(2),e.hij(" ",t[a.key]," ")}}function ui(o,r){1&o&&(e.ynx(0),e.YNc(1,si,9,24,"td",80),e.BQk())}function ci(o,r){if(1&o&&(e.ynx(0),e.YNc(1,ei,3,9,"th",89),e.YNc(2,ni,2,0,"ng-container",62),e.YNc(3,ii,2,0,"ng-container",62),e.YNc(4,ui,2,0,"ng-container",62),e.BQk()),2&o){const t=e.oxw(2);e.xp6(2),e.Q6J("ngIf","Attendance"===t.viewMode),e.xp6(1),e.Q6J("ngIf","Leave"===t.viewMode),e.xp6(1),e.Q6J("ngIf","Both"===t.viewMode)}}function di(o,r){if(1&o&&(e.ynx(0)(1,61),e.YNc(2,Yl,5,3,"ng-container",62),e.YNc(3,Xl,5,3,"ng-container",62),e.YNc(4,ci,5,3,"ng-container",62),e.BQk()()),2&o){const t=r.$implicit,a=e.oxw();e.xp6(1),e.Q6J("matColumnDef",t.key),e.xp6(1),e.Q6J("ngIf","Month"===a.timeMode),e.xp6(1),e.Q6J("ngIf","Week"===a.timeMode),e.xp6(1),e.Q6J("ngIf","Day"===a.timeMode)}}function pi(o,r){1&o&&(e.TgZ(0,"th",95)(1,"b"),e._uU(2,"Total"),e.qZA()())}function mi(o,r){if(1&o&&(e.TgZ(0,"b"),e._uU(1),e.ALo(2,"numberFormat"),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.grandTotal)," ")}}function gi(o,r){if(1&o&&(e.TgZ(0,"td",96),e.YNc(1,mi,3,3,"b",62),e.qZA()),2&o){const t=r.$implicit,a=e.oxw();e.ekj("bold-row",t.userName),e.xp6(1),e.Q6J("ngIf","Leave"!==a.viewMode)}}function fi(o,r){1&o&&e._UZ(0,"tr",97)}function hi(o,r){1&o&&e._UZ(0,"tr",98)}function _i(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",99),e.NdJ("click",function(n){return n.stopPropagation()})("keydown",function(n){return n.stopPropagation()}),e.TgZ(1,"app-popover-detail-schedule-cell",100),e.NdJ("onRefresh",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.onRefresh())}),e.qZA()()}if(2&o){const t=r.data,a=r.title;e.xp6(1),e.Q6J("data",t)("titleHeader",a)}}const ye=function(o){return{"selected-button":o}},gt=function(o){return{"selected-button-type":o}};let vi=(()=>{class o{constructor(t,a,n,l,i,s){this.frmBuilder=t,this.attendanceService=a,this.userService=n,this.roleService=l,this.authService=i,this.router=s,this.timeMode="Week",this.viewMode="Both",this.typeMode="List",this.timeModeDisplay="This week",this.isLoading=!1,this.dataSource=[],this.headerData=[],this.headerData2=[],this.defaultHeader=["userName"],this.listStatus=[{codeColor:"#ff0009",value:"red",display:"Short of hours (< 9h)"},{codeColor:"#ffaa00",value:"yellow",display:"Not punchout"},{codeColor:"#8dc63f",value:"green",display:"Normal (9h to 10h)"},{codeColor:"#008080",value:"purple",display:"Overtime (> 10h)"}],this.listStatusLeave=[{codeColor:"#996600",value:"noPaid",display:"Unpaid Leave"},{codeColor:"#3366cc",value:"paid",display:"Paid Leave"}],this.listStatusRole=[{codeColor:"#cc9966",value:"37461060-43d3-42f4-8967-f0ecf7f67f71",display:"Internship"},{codeColor:"#df9aad",value:"95386088-fc73-4a2e-a64d-d3e73a4c07ff",display:"Employee"}],this.listStatusChoose=[],this.listStatusLeaveChoose=[],this.listStatusRoleChoose=[],this.isMyEmployee=!1,this.listOwners=[],this.btnExportState=!1,this.userService.getAllEmployee().subscribe(c=>{c.result&&(this.listEmployees=c.result,this.listEmployees.map(d=>d.displayName=`${d?.firstName} ${d?.middleName} ${d?.lastName}`))}),this.roleService.getRoles().subscribe(c=>{c.result&&(this.listRoles=c.result)}),this.reportScheduleModel=new B,this.authService.onTokenChange().subscribe(c=>{c.isValid()&&(this.user=c.getPayload().user)}),this.userService.getAllEmployee()}ngOnInit(){var t=this;return(0,p.Z)(function*(){yield t.initialData()})()}initialData(){var t=this;return(0,p.Z)(function*(){const a=window.localStorage.getItem("attendanceReportStatus");null==a?t.listStatus.map(i=>t.listStatusChoose?.push(i?.value)):t.listStatusChoose=a?.split(",");const n=window.localStorage.getItem("attendanceReportLeaveStatus");null==n?t.listStatusLeave.map(i=>t.listStatusLeaveChoose?.push(i?.value)):t.listStatusLeaveChoose=n?.split(","),window.localStorage.getItem("attendanceReportRoleStatus"),yield t.changeAttendanceReportMode(),t.frmGroup=t.frmBuilder.formGroup(B,t.reportScheduleModel)})()}callDataSource(){var t=this;return(0,p.Z)(function*(){t.isLoading=!t.isLoading;const a=yield t.attendanceService.getReportSchedule(t.frmGroup.value).toPromise();a.result&&(t.data=a.result,t.headerData=[],t.data.column.forEach(n=>{t.headerData.push(...n.month)}),t.headerData2=[...t.defaultHeader,...new Set(t.headerData.map(n=>n.key)),"grandTotal"],t.dataSource=[],t.setupData(t.data.data,t.dataSource)),t.isLoading=!t.isLoading})()}setupData(t,a){for(var n=0;n<t.length;n++)t[n].attendanceMonthly.map(l=>t[n]={...t[n],...l}),t[n].attendanceDetailMonthly.map(l=>t[n]={...t[n],...l}),t[n].leaveRequestMonthly.map(l=>t[n]={...t[n],...l}),t[n].leaveRequestTypeMonthly.map(l=>t[n]={...t[n],...l}),a.push(t[n])}changeAttendanceReportMode(t=!1){var a=this;return(0,p.Z)(function*(){const n=new Date;switch(a.reportScheduleModel.order=t?0:a.reportScheduleModel.order,a.timeMode){case"Week":a.timeModeDisplay="This week",a.reportScheduleModel.fromDate=new Date(n.setDate(n.getDate()-n.getDay()+1)),a.reportScheduleModel.toDate=new Date(n.setDate(n.getDate()+(7-n.getDay()))),a.reportScheduleModel.fromDate.setDate(a.reportScheduleModel.fromDate.getDate()+7*a.reportScheduleModel.order),a.reportScheduleModel.toDate.setDate(a.reportScheduleModel.toDate.getDate()+7*a.reportScheduleModel.order);break;case"Day":a.timeModeDisplay="Today",a.reportScheduleModel.fromDate=new Date(n),a.reportScheduleModel.toDate=new Date(n),a.reportScheduleModel.fromDate.setDate(a.reportScheduleModel.fromDate.getDate()+a.reportScheduleModel.order),a.reportScheduleModel.toDate.setDate(a.reportScheduleModel.toDate.getDate()+a.reportScheduleModel.order);break;case"Month":a.timeModeDisplay="This month",a.reportScheduleModel.fromDate=new Date(n.getFullYear(),n.getMonth()+a.reportScheduleModel.order,1),a.reportScheduleModel.toDate=new Date(n.getFullYear(),n.getMonth()+1+a.reportScheduleModel.order,0)}a.reportScheduleModel.fromDate.setHours(0,0,0),a.reportScheduleModel.toDate.setHours(23,59,59),a.reportScheduleModel.timeMode=a.timeMode,a.reportScheduleModel.listStatus=a.listStatusChoose,a.reportScheduleModel.listStatusLeave=a.listStatusLeaveChoose,a.reportScheduleModel.listRoles=a.listStatusRoleChoose,a.frmGroup=a.frmBuilder.formGroup(B,a.reportScheduleModel),yield a.callDataSource()})()}refreshData(){var t=this;return(0,p.Z)(function*(){t.isMyEmployee=!1,t.matSelectStatus?.options?.forEach(a=>a.deselect()),t.frmGroup.reset(),t.listStatusChoose=[],t.listStatusLeaveChoose=[],t.listStatusRoleChoose=[],t.reportScheduleModel.order=0,t.reportScheduleModel.listProfile=[],t.reportScheduleModel.listRoles=[],t.listStatus.map(a=>t.listStatusChoose?.push(a?.value)),window.localStorage.setItem("attendanceReportStatus",`${t.listStatusChoose}`),t.listStatusLeave.map(a=>t.listStatusLeaveChoose?.push(a?.value)),window.localStorage.setItem("attendanceReportLeaveStatus",`${t.listStatusLeaveChoose}`),window.localStorage.setItem("attendanceReportRoleStatus",`${t.listStatusRoleChoose}`),t.reportScheduleModel.listStatus=t.listStatusChoose,t.reportScheduleModel.listStatusLeave=t.listStatusLeaveChoose,t.reportScheduleModel.listRoles=t.listStatusRoleChoose,yield t.changeAttendanceReportMode()})()}refreshThis(){var t=this;return(0,p.Z)(function*(){t.reportScheduleModel.order=0,yield t.changeAttendanceReportMode()})()}prevData(){var t=this;return(0,p.Z)(function*(){t.reportScheduleModel.order-=1,yield t.changeAttendanceReportMode()})()}nextData(){var t=this;return(0,p.Z)(function*(){t.reportScheduleModel.order+=1,yield t.changeAttendanceReportMode()})()}applyFilter(){var t=this;return(0,p.Z)(function*(){t.reportScheduleModel.order=0,t.reportScheduleModel.fromDate=t.frmGroup?.get("fromDate")?.value,t.reportScheduleModel.toDate=t.frmGroup?.get("toDate")?.value,t.reportScheduleModel.listStatus=t.listStatusChoose,t.reportScheduleModel.listStatusLeave=t.listStatusLeaveChoose,t.frmGroup.get("listProfile").setValue(t.reportScheduleModel?.listProfile),t.frmGroup.get("listStatus").setValue(t.reportScheduleModel?.listStatus),t.frmGroup.get("listRoles").setValue(t.reportScheduleModel?.listRoles),t.frmGroup.get("listStatusLeave").setValue(t.reportScheduleModel?.listStatusLeave),yield t.callDataSource()})()}exportData(t){var a=this;return(0,p.Z)(function*(){a.btnExportState=!a.btnExportState,a.btnExportState=!a.btnExportState})()}onFilterDropDownEmployee(t){t&&(this.reportScheduleModel.listProfile=t?.value)}onFilterDropDownRole(t){t&&(this.reportScheduleModel.listRoles=t?.value,this.listStatusRoleChoose=[],this.reportScheduleModel?.listRoles?.map(a=>{this.listStatusRole.findIndex(l=>l.value===a)>-1&&this.listStatusRoleChoose.push(a)}))}getMyEmployeeAttendance(t){var a=this;return(0,p.Z)(function*(){if(a.isMyEmployee=t,t){var n=yield a.userService.getOwnersByEmployeeId(a.user?.userId).toPromise();n.result&&(a.listOwners=n.result.map(l=>l.userId),a.reportScheduleModel.listRoles=[],a.listStatusRoleChoose=[],a.reportScheduleModel.listProfile=[],a.reportScheduleModel.listProfile=a.reportScheduleModel?.listProfile?.concat(a.listOwners))}else a.reportScheduleModel.listProfile=a.reportScheduleModel?.listProfile?.filter(l=>!a.listOwners.includes(l)),a.listOwners=[];a.frmGroup.get("listProfile").setValue(a.reportScheduleModel?.listProfile),a.frmGroup.get("listRoles").setValue(a.reportScheduleModel?.listRoles),yield a.callDataSource()})()}changeStatus(t){var a=this;return(0,p.Z)(function*(){window.localStorage.setItem("attendanceReportStatus",`${a.listStatusChoose}`),a.reportScheduleModel.listStatus=a.listStatusChoose,a.frmGroup.get("listStatus").setValue(a.reportScheduleModel?.listStatus),yield a.callDataSource()})()}changeStatusLeave(t){var a=this;return(0,p.Z)(function*(){window.localStorage.setItem("attendanceReportLeaveStatus",`${a.listStatusLeaveChoose}`),a.reportScheduleModel.listStatusLeave=a.listStatusLeaveChoose,a.frmGroup.get("listStatusLeave").setValue(a.reportScheduleModel?.listStatusLeave),yield a.callDataSource()})()}changeStatusRole(t){var a=this;return(0,p.Z)(function*(){window.localStorage.setItem("attendanceReportRoleStatus",`${a.listStatusRoleChoose}`),a.reportScheduleModel.listRoles=a.listStatusRoleChoose,a.frmGroup.get("listRoles").setValue(a.reportScheduleModel?.listRoles),yield a.callDataSource()})()}openEmployeeDetail(t){t&&this.router.navigate([`/configuration/employee/${t}`])}onRefresh(){var t=this;return(0,p.Z)(function*(){yield t.changeAttendanceReportMode()})()}changeViewMode(){var t=this;return(0,p.Z)(function*(){t.reportScheduleModel.viewMode=t.viewMode,yield t.changeAttendanceReportMode()})()}static#e=this.\u0275fac=function(a){return new(a||o)(e.Y36(u.GW),e.Y36(_l),e.Y36(G.n),e.Y36(Se.U),e.Y36(O._o),e.Y36(pe.F0))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-report-schedule-management"]],viewQuery:function(a,n){if(1&a&&(e.Gf(Sl,5),e.Gf(Zl,5)),2&a){let l;e.iGM(l=e.CRH())&&(n.table=l.first),e.iGM(l=e.CRH())&&(n.matSelectStatus=l.first)}},decls:92,vars:48,consts:[["fxLayout","row","fxLayoutAlign","space-between center"],[2,"display","flex","justify-content","left"],[1,"attendance-report-mode",3,"ngModel","ngModelChange","change"],["value","Day",3,"ngClass"],["value","Week","ngDefaultControl","",3,"ngClass"],["value","Month",3,"ngClass"],[2,"display","flex","justify-content","center"],[1,"attendance-report-mode",3,"ngModel","ngModelChange"],["value","List","ngDefaultControl","","routerLink","/admin/report-schedule","matTooltip","Go to Report Schedule",3,"ngClass"],["value","Grid","routerLink","/admin/work-calendar","matTooltip","Go to Work Calendar",3,"ngClass"],[2,"display","flex","justify-content","right"],[2,"display","flex","justify-content","right","background-color","#edf1f7","align-items","center"],[2,"margin-right","20px","margin-top","10px",3,"checked","checkedChange"],["mat-raised-button","",1,"button-app-function",2,"background-color","#b45cea","color","white",3,"click"],["value","Attendance",3,"ngClass"],["value","Leave",3,"ngClass"],["value","Both","ngDefaultControl","",3,"ngClass"],[2,"background-color","#edf1f7","align-items","center"],[1,"form-function-filter",3,"formGroup"],["fxLayout","row","fxLayoutAlign","space-between center","fxLayoutGap","12px",1,"col-12",2,"height","64px"],["optionValue","roleId","optionLabel","displayName","filterBy","roleName,displayName","placeholder","Choose Role",1,"p-inputtext-sm",3,"options","filter","onChange"],["optionValue","userId","optionLabel","displayName","filterBy","firstName,middleName,lastName,email","placeholder","Choose Employee",1,"p-inputtext-sm",3,"options","filter","onChange"],["pTemplate","item"],[2,"font-size","14px"],["appearance","fill",1,"form-function-filter",2,"max-width","110px"],["matInput","","formControlName","fromDate","readonly","",3,"matDatepicker","click"],["fromDatePicker",""],["matInput","","formControlName","toDate","readonly","",3,"matDatepicker","click"],["toDatePicker",""],["mat-raised-button","",1,"background-gradient",2,"color","white","margin","0 10px",3,"click"],["fxLayout","row","fxLayoutAlign","center center",2,"height","30px","padding-bottom","10px"],["multiple","",2,"border","none","background-color","#edf1f7","height","42px",3,"ngModel","change","ngModelChange"],["style","border: none; background-color: #edf1f7;",3,"value","ngStyle",4,"ngFor","ngForOf"],["multiple","",2,"border","none","background-color","#edf1f7","height","42px","margin","0 60px",3,"ngModel","change","ngModelChange"],[1,"example-container","mat-elevation-z2",3,"nbSpinner"],[1,"example-table-container"],["dataTable",""],["mat-table","",3,"dataSource"],["matColumnDef","userName","sticky",""],["mat-header-cell","","class","header-table-color first-table-cell-fixed","style","text-align: center; background-color: #b45cea; color: white;",4,"matHeaderCellDef"],["mat-cell","","style","text-align: left; border-color: #e0e0e0;",3,"bold-row",4,"matCellDef"],[4,"ngFor","ngForOf"],["matColumnDef","grandTotal","stickyEnd",""],["mat-header-cell","","class","header-table-color total-table-cell-fixed","style","text-align: center; background-color: #b45cea; color: white;",4,"matHeaderCellDef"],["mat-cell","","style","text-align: right; border-color: #e0e0e0;",3,"bold-row",4,"matCellDef"],["mat-header-row","","class","report-header-row",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","","class","report-row",4,"matRowDef","matRowDefColumns"],["xPosition","after"],["popoverCellDetail","matMenu"],["matMenuContent",""],["exportMenu","matMenu"],["mat-menu-item","","color","primary",1,"button-app-function",3,"nbSpinner","click"],[1,"d-none"],["nonDisplayMenu","matMenu"],[1,"flex","align-items-center","gap-2","dropdown-items-with-img"],["size","small",1,"custom-nb-user-small",3,"name","title","showTitle","picture"],[2,"border","none","background-color","#edf1f7",3,"value","ngStyle"],[2,"margin-right","0px !important",3,"ngStyle"],["mat-header-cell","",1,"header-table-color","first-table-cell-fixed",2,"text-align","center","background-color","#b45cea","color","white"],["mat-cell","",2,"text-align","left","border-color","#e0e0e0"],[2,"padding-left","10px","cursor","pointer",3,"click"],[3,"matColumnDef"],[4,"ngIf"],["mat-header-cell","","style","text-align: center;","class","header-table-color custom-font tableCellFixedMonth",3,"ngStyle",4,"matHeaderCellDef"],["mat-header-cell","",1,"header-table-color","custom-font","tableCellFixedMonth",2,"text-align","center",3,"ngStyle"],["mat-cell","","class","data-bold-row custom-font","style","text-align: right;",3,"background-color","opacity",4,"matCellDef"],["mat-cell","",1,"data-bold-row","custom-font",2,"text-align","right"],["fxLayout","row","fxLayoutAlign","center center",3,"ngStyle","matMenuTriggerFor","matMenuTriggerData"],["mat-cell","","class","data-bold-row","style","text-align: right;",3,"background-color","opacity",4,"matCellDef"],["mat-cell","",1,"data-bold-row",2,"text-align","right"],["fxLayout","row","fxLayoutAlign","space-between center",3,"ngStyle","matMenuTriggerFor","matMenuTriggerData"],[2,"padding-left","8px"],["class","icon-leave",3,"ngStyle","matTooltip",4,"ngIf"],["fxFlex","80","style","padding-right: 10px;",4,"ngIf"],[1,"icon-leave",3,"ngStyle","matTooltip"],["fxFlex","80",2,"padding-right","10px"],["class","icon-leave",3,"matTooltip","ngStyle",4,"ngIf"],[1,"icon-leave",3,"matTooltip","ngStyle"],["mat-header-cell","","style","text-align: center;","class","header-table-color custom-font tableCellFixedWeek",3,"ngStyle",4,"matHeaderCellDef"],["mat-header-cell","",1,"header-table-color","custom-font","tableCellFixedWeek",2,"text-align","center",3,"ngStyle"],["mat-cell","","class","data-bold-row custom-font",3,"color","background-color","opacity",4,"matCellDef"],["mat-cell","",1,"data-bold-row","custom-font"],["mat-cell","","class","data-bold-row",3,"color","background-color","opacity",4,"matCellDef"],["mat-cell","",1,"data-bold-row"],["fxFlex","15",2,"display","flex","justify-content","right"],["class","icon-leave",3,"ngStyle",4,"ngIf"],["fxFlex","85","style","padding-right: 25px; text-align: center;",4,"ngIf"],[1,"icon-leave",3,"ngStyle"],["fxFlex","85",2,"padding-right","25px","text-align","center"],["mat-header-cell","","style","text-align: center;","class","header-table-color custom-font tableCellFixedDay",3,"ngStyle",4,"matHeaderCellDef"],["mat-header-cell","",1,"header-table-color","custom-font","tableCellFixedDay",2,"text-align","center",3,"ngStyle"],["fxFlex","40",2,"display","flex","justify-content","right","padding-left","20px"],["fxFlex","20",2,"padding-left","100px"],["fxFlex","60","style","padding-right: 486px;",4,"ngIf"],["fxFlex","60",2,"padding-right","486px"],["mat-header-cell","",1,"header-table-color","total-table-cell-fixed",2,"text-align","center","background-color","#b45cea","color","white"],["mat-cell","",2,"text-align","right","border-color","#e0e0e0"],["mat-header-row","",1,"report-header-row"],["mat-row","",1,"report-row"],[3,"click","keydown"],[3,"data","titleHeader","onRefresh"]],template:function(a,n){if(1&a){const l=e.EpF();e.TgZ(0,"div")(1,"div",0)(2,"div",1)(3,"mat-button-toggle-group",2),e.NdJ("ngModelChange",function(s){return n.timeMode=s})("change",function(){return n.changeAttendanceReportMode(!0)}),e.TgZ(4,"mat-button-toggle",3),e._uU(5,"Day "),e.qZA(),e.TgZ(6,"mat-button-toggle",4),e._uU(7,"Week "),e.qZA(),e.TgZ(8,"mat-button-toggle",5),e._uU(9,"Month "),e.qZA()()(),e.TgZ(10,"div",6)(11,"mat-button-toggle-group",7),e.NdJ("ngModelChange",function(s){return n.typeMode=s}),e.TgZ(12,"mat-button-toggle",8)(13,"mat-icon"),e._uU(14,"compost"),e.qZA()(),e.TgZ(15,"mat-button-toggle",9)(16,"mat-icon"),e._uU(17,"edit_calendar"),e.qZA()()()(),e.TgZ(18,"div",10)(19,"mat-toolbar",11)(20,"nb-toggle",12),e.NdJ("checkedChange",function(s){return n.getMyEmployeeAttendance(s)}),e._uU(21," My Employees "),e.qZA(),e.TgZ(22,"button",13),e.NdJ("click",function(){return n.refreshData()}),e.TgZ(23,"mat-icon"),e._uU(24,"refresh"),e.qZA()(),e.TgZ(25,"button",13),e.NdJ("click",function(){return n.prevData()}),e.TgZ(26,"mat-icon"),e._uU(27,"arrow_back_ios"),e.qZA()(),e.TgZ(28,"button",13),e.NdJ("click",function(){return n.refreshThis()}),e._uU(29),e.qZA(),e.TgZ(30,"button",13),e.NdJ("click",function(){return n.nextData()}),e.TgZ(31,"mat-icon"),e._uU(32,"arrow_forward_ios"),e.qZA()()()()(),e.TgZ(33,"div",0)(34,"div",1)(35,"mat-button-toggle-group",2),e.NdJ("ngModelChange",function(s){return n.viewMode=s})("change",function(){return n.changeViewMode()}),e.TgZ(36,"mat-button-toggle",14),e._uU(37,"Attendance "),e.qZA(),e.TgZ(38,"mat-button-toggle",15),e._uU(39,"Leave "),e.qZA(),e.TgZ(40,"mat-button-toggle",16),e._uU(41,"Both "),e.qZA()()(),e.TgZ(42,"div",10)(43,"mat-toolbar",17)(44,"form",18)(45,"div",19)(46,"p-multiSelect",20),e.NdJ("onChange",function(s){return n.onFilterDropDownRole(s)}),e.qZA(),e.TgZ(47,"p-multiSelect",21),e.NdJ("onChange",function(s){return n.onFilterDropDownEmployee(s)}),e.YNc(48,kl,2,4,"ng-template",22),e.qZA(),e.TgZ(49,"mat-label",23),e._uU(50,"From date:"),e.qZA(),e.TgZ(51,"mat-form-field",24)(52,"input",25),e.NdJ("click",function(){e.CHM(l);const s=e.MAs(54);return e.KtG(s.open())}),e.qZA(),e._UZ(53,"mat-datepicker",null,26),e.qZA(),e.TgZ(55,"mat-label",23),e._uU(56,"To date:"),e.qZA(),e.TgZ(57,"mat-form-field",24)(58,"input",27),e.NdJ("click",function(){e.CHM(l);const s=e.MAs(60);return e.KtG(s.open())}),e.qZA(),e._UZ(59,"mat-datepicker",null,28),e.qZA()()(),e.TgZ(61,"button",29),e.NdJ("click",function(){return n.applyFilter()}),e._uU(62," Apply Filter "),e.qZA()()()(),e.TgZ(63,"div",30)(64,"mat-button-toggle-group",31),e.NdJ("change",function(s){return n.changeStatus(s)})("ngModelChange",function(s){return n.listStatusChoose=s}),e.YNc(65,Dl,4,8,"mat-button-toggle",32),e.qZA(),e.TgZ(66,"mat-button-toggle-group",33),e.NdJ("change",function(s){return n.changeStatusLeave(s)})("ngModelChange",function(s){return n.listStatusLeaveChoose=s}),e.YNc(67,Ml,4,8,"mat-button-toggle",32),e.qZA()(),e.TgZ(68,"div",34)(69,"div",35,36)(71,"table",37),e.ynx(72,38),e.YNc(73,Al,2,0,"th",39),e.YNc(74,Ll,3,3,"td",40),e.BQk(),e.YNc(75,di,5,4,"ng-container",41),e.ynx(76,42),e.YNc(77,pi,3,0,"th",43),e.YNc(78,gi,2,3,"td",44),e.BQk(),e.YNc(79,fi,1,0,"tr",45),e.YNc(80,hi,1,0,"tr",46),e.qZA()()()(),e.TgZ(81,"mat-menu",47,48),e.YNc(83,_i,2,2,"ng-template",49),e.qZA(),e.TgZ(84,"mat-menu",47,50)(86,"button",51),e.NdJ("click",function(){return n.exportData(!1)}),e._uU(87," Summary Report "),e.qZA(),e.TgZ(88,"button",51),e.NdJ("click",function(){return n.exportData(!0)}),e._uU(89," Detail Report "),e.qZA()(),e._UZ(90,"mat-menu",52,53)}if(2&a){const l=e.MAs(54),i=e.MAs(60);e.xp6(3),e.Q6J("ngModel",n.timeMode),e.xp6(1),e.Q6J("ngClass",e.VKq(32,ye,"Day"===n.timeMode)),e.xp6(2),e.Q6J("ngClass",e.VKq(34,ye,"Week"===n.timeMode)),e.xp6(2),e.Q6J("ngClass",e.VKq(36,ye,"Month"===n.timeMode)),e.xp6(3),e.Q6J("ngModel",n.typeMode),e.xp6(1),e.Q6J("ngClass",e.VKq(38,gt,"List"===n.typeMode)),e.xp6(3),e.Q6J("ngClass",e.VKq(40,gt,"Grid"===n.typeMode)),e.xp6(5),e.Q6J("checked",n.isMyEmployee),e.xp6(9),e.hij(" ",n.timeModeDisplay," "),e.xp6(6),e.Q6J("ngModel",n.viewMode),e.xp6(1),e.Q6J("ngClass",e.VKq(42,ye,"Attendance"===n.viewMode)),e.xp6(2),e.Q6J("ngClass",e.VKq(44,ye,"Leave"===n.viewMode)),e.xp6(2),e.Q6J("ngClass",e.VKq(46,ye,"Both"===n.viewMode)),e.xp6(4),e.Q6J("formGroup",n.frmGroup),e.xp6(2),e.Q6J("options",n.listRoles)("filter",!0),e.xp6(1),e.Q6J("options",n.listEmployees)("filter",!0),e.xp6(5),e.Q6J("matDatepicker",l),e.xp6(6),e.Q6J("matDatepicker",i),e.xp6(6),e.Q6J("ngModel",n.listStatusChoose),e.xp6(1),e.Q6J("ngForOf",n.listStatus),e.xp6(1),e.Q6J("ngModel",n.listStatusLeaveChoose),e.xp6(1),e.Q6J("ngForOf",n.listStatusLeave),e.xp6(1),e.Q6J("nbSpinner",n.isLoading),e.xp6(3),e.Q6J("dataSource",n.dataSource),e.xp6(4),e.Q6J("ngForOf",n.headerData),e.xp6(4),e.Q6J("matHeaderRowDef",n.headerData2)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",n.headerData2),e.xp6(6),e.Q6J("nbSpinner",n.btnExportState),e.xp6(2),e.Q6J("nbSpinner",n.btnExportState)}},dependencies:[T.mk,T.sg,T.O5,T.PC,m._Y,m.Fj,m.JJ,m.JL,m.On,m.sg,m.u,u.bc,u.VP,u.YE,L.jx,F.KE,F.hX,Ie.Nt,He.Ye,Q.Hw,V.VK,V.OP,V.KA,V.p6,J.lW,ae.Mq,ae.hl,_e.gM,N.BZ,N.fO,N.as,N.w1,N.Dz,N.nj,N.ge,N.ev,N.XQ,N.Gk,Oe.A9,Oe.Yi,v.Q7R,v.BLq,v.k0$,x.xw,x.SQ,x.Wh,x.yH,ue.oO,ue.Zl,$e.NU,pe.rH,xl,Ge.p,wl,mt],styles:[".button-app-function[_ngcontent-%COMP%]{margin-right:10px!important;background-color:#b45cea;color:#fff}.dropdown-filter-function[_ngcontent-%COMP%]{font-size:14px;padding-bottom:0;max-height:64px}.attendance-report-mode[_ngcontent-%COMP%]{height:40px;align-items:center}table[_ngcontent-%COMP%]{width:100%}th.mat-header-cell[_ngcontent-%COMP%], td.mat-cell[_ngcontent-%COMP%]{text-align:center;border-left:.5px solid #e0e0e0;border-right:.5px solid #e0e0e0;padding:0!important;border-color:#e0e0e0}.custom-font[_ngcontent-%COMP%]{font-size:14px;color:#fff}.custom-group-header-font[_ngcontent-%COMP%]{font-size:16px;color:#fff}.example-container[_ngcontent-%COMP%]{position:relative;padding-right:17px}.example-table-container[_ngcontent-%COMP%]{position:relative;height:calc(100% - 326px);max-height:58vh;overflow:auto}.table[_ngcontent-%COMP%]{width:100%}.header-table-color[_ngcontent-%COMP%]{border-color:#fff;text-align:center}.first-header-color[_ngcontent-%COMP%]{background-color:#307abd;border-color:#fff;text-align:center;font-weight:700}.bold-row[_ngcontent-%COMP%]{font-weight:700}.data-bold-row[_ngcontent-%COMP%]{background-color:#ededed}.tableCellFixedMonth[_ngcontent-%COMP%]{width:70px;min-width:70px}.tableCellFixedWeek[_ngcontent-%COMP%]{width:180px;min-width:180px}.tableCellFixedDay[_ngcontent-%COMP%]{width:720px;min-width:240px}.first-table-cell-fixed[_ngcontent-%COMP%]{width:180px!important;min-width:180px!important}.total-table-cell-fixed[_ngcontent-%COMP%]{width:80px;min-width:80px}.report-header-row[_ngcontent-%COMP%]{height:32px;max-height:32px}.report-row[_ngcontent-%COMP%]{height:26px;max-height:26px}.icon-modified[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:large;cursor:pointer;color:#fff}.icon-leave[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:large;cursor:pointer;font-weight:bolder}.form-function-filter[_ngcontent-%COMP%]{display:flex;align-items:center;max-height:64px;margin-top:6px}[_nghost-%COMP%]  .mat-form-field-flex{padding-top:0!important}.d-none[_ngcontent-%COMP%]{display:none!important}  .mat-menu-content{padding-top:0!important;padding-bottom:0!important}.background-gradient[_ngcontent-%COMP%]{background:linear-gradient(to right,#b45cea,#ff9393)}.selected-button[_ngcontent-%COMP%]{background-color:#b45cea;color:#fff}.selected-button-type[_ngcontent-%COMP%]{background-color:#ff9393;color:#fff}[_nghost-%COMP%]     .p-multiselect{max-height:35px}[_nghost-%COMP%]     .p-multiselect .p-multiselect-label{max-width:170px;line-height:1}"]})}return o})();function yi(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",11),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.deleteSelectedAttendanceReport())}),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("label",t.Delete)("disabled",!t.selectedReports||!(null!=t.selectedReports&&t.selectedReports.length))}}function bi(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",12),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(),l=e.MAs(5);return e.KtG(n.clear(l))}),e.qZA(),e.TgZ(1,"button",13),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.reset())}),e.qZA()}}function Ci(o,r){1&o&&(e.TgZ(0,"tr")(1,"th",14),e._UZ(2,"p-tableHeaderCheckbox"),e.qZA(),e.TgZ(3,"th",15),e._uU(4," Email "),e._UZ(5,"p-columnFilter",16)(6,"p-sortIcon",17),e.qZA(),e.TgZ(7,"th",18),e._uU(8," Note "),e._UZ(9,"p-columnFilter",19)(10,"p-sortIcon",20),e.qZA(),e.TgZ(11,"th",21),e._uU(12," Created At "),e._UZ(13,"p-columnFilter",22)(14,"p-sortIcon",23),e.qZA(),e.TgZ(15,"th",24),e._uU(16," StatusId "),e._UZ(17,"p-columnFilter",25)(18,"p-sortIcon",26),e.qZA(),e.TgZ(19,"th",27),e._uU(20," Rejected Reason "),e._UZ(21,"p-columnFilter",28)(22,"p-sortIcon",29),e.qZA(),e.TgZ(23,"th",27),e._uU(24," type "),e._UZ(25,"p-columnFilter",28)(26,"p-sortIcon",29),e.qZA(),e._UZ(27,"th"),e.qZA())}function Ti(o,r){1&o&&e.GkF(0)}function xi(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",36),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,l=e.oxw();return e.KtG(l.saveAttendanceReport(!0,n))}),e.qZA()}}function wi(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",37),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,l=e.oxw();return e.KtG(l.saveAttendanceReport(!1,n))}),e.qZA()}}const Si=function(o){return{row:o}};function Zi(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"tr",30)(1,"td"),e._UZ(2,"p-tableCheckbox",31),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.ALo(9,"dateTimeFormat"),e.qZA(),e.TgZ(10,"td"),e.YNc(11,Ti,1,0,"ng-container",32),e.qZA(),e.TgZ(12,"td"),e._uU(13),e.qZA(),e.TgZ(14,"td"),e._uU(15),e.qZA(),e.TgZ(16,"td"),e.YNc(17,xi,1,0,"button",33),e.YNc(18,wi,1,0,"button",34),e.TgZ(19,"button",35),e.NdJ("click",function(){const l=e.CHM(t).$implicit,i=e.oxw();return e.KtG(i.openDetail(l))}),e.qZA()()()}if(2&o){const t=r.$implicit;e.oxw();const a=e.MAs(11);e.Q6J("pEditableRow",t),e.xp6(2),e.Q6J("value",t),e.xp6(2),e.Oqu(null==t?null:t.email),e.xp6(2),e.Oqu(null==t?null:t.note),e.xp6(2),e.Oqu(e.lcZ(9,11,null==t?null:t.createdAt)),e.xp6(3),e.Q6J("ngTemplateOutlet",a)("ngTemplateOutletContext",e.VKq(13,Si,t.status)),e.xp6(2),e.Oqu(null==t?null:t.reasonRejected),e.xp6(2),e.Oqu("PUNCHIN"===(null==t?null:t.type)?"Punch in":"Punch out"),e.xp6(2),e.Q6J("ngIf",1===t.status.dataStateId),e.xp6(1),e.Q6J("ngIf",1===t.status.dataStateId)}}function ki(o,r){}function Di(o,r){1&o&&(e.TgZ(0,"tr")(1,"td",38),e._uU(2,"No record found."),e.qZA()())}function Mi(o,r){if(1&o&&(e.TgZ(0,"div",39)(1,"div",40),e._uU(2),e.qZA()()),2&o){const t=r.row;e.Udp("background-color",(null==t?null:t.colorCode)||"#ffffff"),e.xp6(2),e.hij(" ",null==t?null:t.dataStateName," ")}}const Ai=function(){return{"min-width":"100%"}},Li=function(o){return[10,25,o]},Ei=function(){return["email"]};let Ri=(()=>{class o{constructor(t,a,n,l){var i=this;this.attendanceService=t,this.messageService=a,this.authService=n,this.dialog=l,this.destroy$=new R.x,this.allStatus=te.p,this.first=0,this.rows=10,this.loading=!1,this.authService.onTokenChange().pipe((0,k.R)(this.destroy$)).subscribe(function(){var s=(0,p.Z)(function*(c){c.isValid()&&(i.userModel=c.getPayload().user)});return function(c){return s.apply(this,arguments)}}())}ngOnInit(){var t=this;return(0,p.Z)(function*(){t.loading=!t.loading,yield t.refreshData(),t.loading=!t.loading})()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}refreshData(){var t=this;return(0,p.Z)(function*(){t.loading=!t.loading;var a=yield(0,fe.n)(t.attendanceService.getAllAttendanceReport(t.userModel.email).pipe((0,k.R)(t.destroy$)));a.result&&(t.dataTable=a.result),t.loading=!t.loading})()}next(){this.first=this.first+this.rows}prev(){this.first=this.first-this.rows}reset(){var t=this;return(0,p.Z)(function*(){t.first=0,yield t.refreshData()})()}pageChange(t){this.first=t.first,this.rows=t.rows}clear(t){t.clear()}deleteSelectedAttendanceReport(){var t=this.selectedReports.map(n=>n.attendanceReportId);this.dialog.open($,{width:"auto",height:"auto",backdropClass:"custom-backdrop",hasBackdrop:!0,autoFocus:!1,data:{message:`Do you wish to remove ${t.length} item(s)?`}}).afterClosed().subscribe(n=>{this.attendanceService.deleteAttendanceReport(t).subscribe(l=>{l.result?(this.messageService.add({key:"toast1",severity:"success",summary:"Success",detail:"Delete successfully!",life:2e3}),this.refreshData()):this.messageService.add({key:"toast1",severity:"warn",summary:"Warning",detail:"Failed!",life:2e3})})})}saveAttendanceReport(t,a){var n=this;return(0,p.Z)(function*(){if(a.statusId=t?te.p.APPROVED:te.p.REJECTED,!t){const i=n.dialog.open(Ye,{backdropClass:"custom-backdrop",hasBackdrop:!0});var l=yield(0,fe.n)(i.afterClosed());l&&(a.reasonRejected=l)}n.attendanceService.saveAttendanceReport(a,n.userModel.userId).subscribe(i=>{i.result?(n.messageService.add({key:"toast1",severity:"success",summary:"Success",detail:(t?"Approved":"Rejected")+" successfully!",life:2e3}),n.refreshData()):n.messageService.add({key:"toast1",severity:"warn",summary:"Warning",detail:"Failed!",life:2e3})})})()}openDetail(t){this.dialog.open(at.y,{width:"auto",height:"auto",backdropClass:"custom-backdrop",hasBackdrop:!0,autoFocus:!1,data:{captureImg:t.imageUrl,model:t,action:Z.t.Edit}}).afterClosed().subscribe(n=>{n&&(this.messageService.add({key:"toast1",severity:"success",summary:"Success",detail:(n.isApprove?"Approved":"Rejected")+" successfully!",life:2e3}),this.refreshData())})}static#e=this.\u0275fac=function(a){return new(a||o)(e.Y36(we.v),e.Y36(L.ez),e.Y36(O._o),e.Y36(f.uw))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-attendance-report-management"]],decls:12,vars:15,consts:[[1,"card"],["styleClass","mb-4 gap-2"],["pTemplate","left"],["pTemplate","right"],["styleClass","p-datatable-sm","editMode","row","scrollHeight","700px","dataKey","attendanceReportId",3,"value","paginator","rows","showCurrentPageReport","tableStyle","rowsPerPageOptions","loading","globalFilterFields","selection","rowHover","scrollable","onPage","selectionChange"],["table",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","paginatorleft"],["pTemplate","emptymessage"],["status",""],["pButton","","pRipple","","icon","pi pi-trash",1,"p-button-danger","p-button-sm",3,"label","disabled","click"],["pButton","","label","Clear","icon","pi pi-filter-slash",1,"p-button-outlined","p-button-sm","mr-2",3,"click"],["pButton","","label","Refresh","icon","pi pi-refresh",1,"p-button-outlined","p-button-sm",3,"click"],[2,"width","4rem"],["pSortableColumn","email"],["type","text","field","email","display","menu"],["field","email"],["pSortableColumn","note"],["type","text","field","note","display","menu"],["field","note"],["pSortableColumn","createdAt"],["type","text","field","createdAt","display","menu"],["field","createdAt"],["pSortableColumn","statusId"],["type","text","display","menu"],["field","statusId"],["pSortableColumn","type"],["type","text","field","type","display","menu"],["field","type"],[3,"pEditableRow"],[3,"value"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["matTooltip","Approve","style","margin-right: 0.5rem;","pButton","","pRipple","","icon","pi pi-check-circle","class","p-button-sm p-button-success",3,"click",4,"ngIf"],["matTooltip","Reject","style","margin-right: 0.5rem;","pButton","","pRipple","","icon","pi pi-times-circle","class","p-button-sm p-button-warning",3,"click",4,"ngIf"],["matTooltip","Open detail","pButton","","pRipple","","icon","pi pi-eye",1,"p-button-sm","p-button-primary",3,"click"],["matTooltip","Approve","pButton","","pRipple","","icon","pi pi-check-circle",1,"p-button-sm","p-button-success",2,"margin-right","0.5rem",3,"click"],["matTooltip","Reject","pButton","","pRipple","","icon","pi pi-times-circle",1,"p-button-sm","p-button-warning",2,"margin-right","0.5rem",3,"click"],["colspan","20"],[1,"badge","badge-pill"],[2,"color","white"]],template:function(a,n){1&a&&(e.TgZ(0,"div",0)(1,"p-toolbar",1),e.YNc(2,yi,1,2,"ng-template",2),e.YNc(3,bi,2,0,"ng-template",3),e.qZA(),e.TgZ(4,"p-table",4,5),e.NdJ("onPage",function(i){return n.pageChange(i)})("selectionChange",function(i){return n.selectedReports=i}),e.YNc(6,Ci,28,0,"ng-template",6),e.YNc(7,Zi,20,15,"ng-template",7),e.YNc(8,ki,0,0,"ng-template",8),e.YNc(9,Di,3,0,"ng-template",9),e.qZA()(),e.YNc(10,Mi,3,3,"ng-template",null,10,e.W1O)),2&a&&(e.xp6(4),e.Q6J("value",n.dataTable)("paginator",!0)("rows",10)("showCurrentPageReport",!0)("tableStyle",e.DdM(11,Ai))("rowsPerPageOptions",e.VKq(12,Li,null==n.dataTable?null:n.dataTable.length))("loading",n.loading)("globalFilterFields",e.DdM(14,Ei))("selection",n.selectedReports)("rowHover",!0)("scrollable",!0))},dependencies:[T.O5,T.tP,L.jx,_e.gM,U.Hq,b.iA,b.lQ,b.fz,b.UA,b.Mo,b.D$,b.xl,ce.o,de.X$]})}return o})();class ie{}(0,C.gn)([(0,u.vg)()],ie.prototype,"roleId",void 0),(0,C.gn)([(0,u.vg)(),(0,u.C1)()],ie.prototype,"roleName",void 0),(0,C.gn)([(0,u.vg)()],ie.prototype,"roleDescription",void 0),(0,C.gn)([(0,u.vg)(),(0,u.C1)()],ie.prototype,"displayName",void 0),(0,C.gn)([(0,u.vg)()],ie.prototype,"defaultScreen",void 0),(0,C.gn)([(0,u.vg)(),(0,u.C1)()],ie.prototype,"priority",void 0),(0,C.gn)([(0,u.vg)()],ie.prototype,"isShow",void 0);var Ni=g(2451),ft=g(6970);function qi(o,r){if(1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(null==t.form||null==t.form.controls?null:t.form.controls.roleName.errorMessage)}}function Ui(o,r){if(1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(null==t.form||null==t.form.controls?null:t.form.controls.displayName.errorMessage)}}function Ii(o,r){if(1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(null==t.form||null==t.form.controls?null:t.form.controls.roleDescription.errorMessage)}}function Fi(o,r){if(1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(null==t.form||null==t.form.controls?null:t.form.controls.defaultScreen.errorMessage)}}function Oi(o,r){if(1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(null==t.form||null==t.form.controls?null:t.form.controls.priority.errorMessage)}}let Ji=(()=>{class o{constructor(t,a,n,l,i,s){this.dialModalRef=t,this.data=a,this.roleService=n,this.frmBuilder=l,this.dialog=i,this.messageService=s,this.destroy$=new R.x,this.isLoading=!1,this.isChange=!1,this.action=a.action?a.action:Z.t.Add,this.roleModel=a?.model||new ie}ngOnInit(){this.form=this.frmBuilder.formGroup(ie,this.roleModel),this.dialModalRef.updatePosition({right:"0"})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}ngAfterViewInit(){this.form&&this.form.valueChanges.pipe((0,he.q)(1)).subscribe(t=>this.isChange=!0)}saveData(){if(this.form.valid){this.isLoading=!this.isLoading;const t=Object.assign({},this.form.value);t.isShow=!0,this.roleService.saveRole(t).pipe((0,k.R)(this.destroy$)).subscribe(a=>{a.result&&(this.messageService.add({key:"toast1",severity:"success",summary:"Success",detail:"Save role successfully!",life:2e3}),this.dialModalRef.close(a.result))}).add(()=>{this.isLoading=!this.isLoading})}}closeDialog(){if(this.isChange)return this.isChange=!1,void this.dialog.open($,{backdropClass:"custom-backdrop",hasBackdrop:!0,data:{message:"Do you wish to close this popup? You will lose your unsaved data."}}).afterClosed().subscribe(a=>{a?this.dialModalRef.close():this.isChange=!0});this.dialModalRef.close(!1)}static#e=this.\u0275fac=function(a){return new(a||o)(e.Y36(f.so),e.Y36(f.WI),e.Y36(Se.U),e.Y36(u.GW),e.Y36(f.uw),e.Y36(L.ez))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-add-edit-role"]],decls:39,vars:11,consts:[["fxLayout","row","fxLayoutAlign","start center","mat-dialog-title","",1,"dialog-header",2,"margin","unset","padding","1px 10px 1px 28px",3,"nbSpinner"],["label","Save","icon","pi pi-save","styleClass","p-button-sm",3,"disabled","loading","click"],["fxLayout","row","fxLayoutAlign","end center",1,"ml-auto"],["mat-icon-button","","aria-label","Close the dialog",1,"ml-auto",3,"click"],[1,"mat-typography",2,"height","100%","overflow","auto"],[1,"container",3,"formGroup"],[1,"p-fluid","p-grid","p-formgrid"],[1,"p-field","p-col-12","p-md-2"],["for","roleName",1,"fs-14","fw-500"],["formControlName","roleName","id","roleName","type","roleName","pInputText","",1,"p-inputtext-sm"],[4,"ngIf"],["for","displayName",1,"fs-14","fw-500"],["formControlName","displayName","id","displayName","type","displayName","pInputText","",1,"p-inputtext-sm"],["for","roleDescription",1,"fs-14","fw-500"],["rows","5","pInputTextarea","","formControlName","text","formControlName","roleDescription","id","roleDescription","type","roleDescription",1,"p-inputtext-sm"],["for","defaultScreen",1,"fs-14","fw-500"],["formControlName","defaultScreen","id","defaultScreen","type","defaultScreen","pInputText","",1,"p-inputtext-sm"],["for","priority",1,"fs-14","fw-500"],["formControlName","priority","id","priority","type","priority","inputId","integeronly","mode","decimal",1,"p-inputtext-sm",3,"min","max"]],template:function(a,n){1&a&&(e.TgZ(0,"div",0)(1,"p-button",1),e.NdJ("click",function(){return n.saveData()}),e.qZA(),e.TgZ(2,"div",2)(3,"button",3),e.NdJ("click",function(){return n.closeDialog()}),e.TgZ(4,"mat-icon"),e._uU(5,"close"),e.qZA()()()(),e._UZ(6,"mat-divider"),e.TgZ(7,"mat-dialog-content",4)(8,"form",5)(9,"div",6)(10,"div",7)(11,"label",8),e._uU(12,"Role Name"),e.qZA(),e._UZ(13,"input",9),e.YNc(14,qi,2,1,"mat-error",10),e.qZA()(),e.TgZ(15,"div",6)(16,"div",7)(17,"label",11),e._uU(18,"Display Name"),e.qZA(),e._UZ(19,"input",12),e.YNc(20,Ui,2,1,"mat-error",10),e.qZA()(),e.TgZ(21,"div",6)(22,"div",7)(23,"label",13),e._uU(24,"Role Description"),e.qZA(),e._UZ(25,"textarea",14),e.YNc(26,Ii,2,1,"mat-error",10),e.qZA()(),e.TgZ(27,"div",6)(28,"div",7)(29,"label",15),e._uU(30,"Default Screen"),e.qZA(),e._UZ(31,"input",16),e.YNc(32,Fi,2,1,"mat-error",10),e.qZA()(),e.TgZ(33,"div",6)(34,"div",7)(35,"label",17),e._uU(36,"Priority"),e.qZA(),e._UZ(37,"p-inputNumber",18),e.YNc(38,Oi,2,1,"mat-error",10),e.qZA()()()()),2&a&&(e.Q6J("nbSpinner",n.isLoading),e.xp6(1),e.Q6J("disabled",!n.form.valid)("loading",n.isLoading),e.xp6(7),e.Q6J("formGroup",n.form),e.xp6(6),e.Q6J("ngIf",(null==n.form||null==n.form.controls||null==n.form.controls.roleName?null:n.form.controls.roleName.errors)&&((null==n.form||null==n.form.controls||null==n.form.controls.roleName?null:n.form.controls.roleName.dirty)||(null==n.form||null==n.form.controls||null==n.form.controls.roleName?null:n.form.controls.roleName.touched))),e.xp6(6),e.Q6J("ngIf",(null==n.form||null==n.form.controls||null==n.form.controls.displayName?null:n.form.controls.displayName.errors)&&((null==n.form||null==n.form.controls||null==n.form.controls.displayName?null:n.form.controls.displayName.dirty)||(null==n.form||null==n.form.controls||null==n.form.controls.displayName?null:n.form.controls.displayName.touched))),e.xp6(6),e.Q6J("ngIf",(null==n.form||null==n.form.controls||null==n.form.controls.roleDescription?null:n.form.controls.roleDescription.errors)&&((null==n.form||null==n.form.controls||null==n.form.controls.roleDescription?null:n.form.controls.roleDescription.dirty)||(null==n.form||null==n.form.controls||null==n.form.controls.roleDescription?null:n.form.controls.roleDescription.touched))),e.xp6(6),e.Q6J("ngIf",(null==n.form||null==n.form.controls||null==n.form.controls.defaultScreen?null:n.form.controls.defaultScreen.errors)&&((null==n.form||null==n.form.controls||null==n.form.controls.defaultScreen?null:n.form.controls.defaultScreen.dirty)||(null==n.form||null==n.form.controls||null==n.form.controls.defaultScreen?null:n.form.controls.defaultScreen.touched))),e.xp6(5),e.Q6J("min",0)("max",100),e.xp6(1),e.Q6J("ngIf",(null==n.form||null==n.form.controls||null==n.form.controls.priority?null:n.form.controls.priority.errors)&&((null==n.form||null==n.form.controls||null==n.form.controls.priority?null:n.form.controls.priority.dirty)||(null==n.form||null==n.form.controls||null==n.form.controls.priority?null:n.form.controls.priority.touched))))},dependencies:[T.O5,m._Y,m.Fj,m.JJ,m.JL,m.sg,m.u,u.bc,u.VP,u.YE,F.TO,Q.Hw,J.RK,f.uh,f.xY,j.d,v.Q7R,x.xw,x.Wh,U.zx,se.o,Ni.Rn,ft.g],styles:[".dialog-header .p-button.p-button-sm{padding:.5rem 1rem}"]})}return o})();function Pi(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",11),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.addEditRole())}),e.qZA(),e.TgZ(1,"button",12),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.deleteRole())}),e.qZA()}if(2&o){const t=e.oxw();e.xp6(1),e.Q6J("label",t.Delete)("disabled",!t.selectedRoles||!(null!=t.selectedRoles&&t.selectedRoles.length))}}function Yi(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",13),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(),l=e.MAs(5);return e.KtG(n.clear(l))}),e.qZA(),e.TgZ(1,"button",14),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.reset())}),e.qZA()}}function Qi(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",15)(1,"span",16),e._UZ(2,"i",17),e.TgZ(3,"input",18),e.NdJ("input",function(n){e.CHM(t),e.oxw();const l=e.MAs(5);return e.KtG(l.filterGlobal(n.target.value,"contains"))}),e.qZA()()()}}function Wi(o,r){1&o&&(e.TgZ(0,"tr")(1,"th",19),e._UZ(2,"p-tableHeaderCheckbox"),e.qZA(),e.TgZ(3,"th",20),e._uU(4," Role Name "),e._UZ(5,"p-columnFilter",21)(6,"p-sortIcon",22),e.qZA(),e.TgZ(7,"th",23),e._uU(8," Role Description "),e._UZ(9,"p-columnFilter",24),e.qZA(),e.TgZ(10,"th",25),e._uU(11," Display Name "),e._UZ(12,"p-columnFilter",26),e.qZA(),e.TgZ(13,"th",27),e._uU(14," Default Screen "),e._UZ(15,"p-columnFilter",28),e.qZA(),e.TgZ(16,"th",29),e._uU(17," Priority "),e._UZ(18,"p-columnFilter",30)(19,"p-sortIcon",31),e.qZA(),e.TgZ(20,"th",32),e._uU(21," is Show "),e._UZ(22,"p-columnFilter",33),e.qZA(),e._UZ(23,"th",34),e.qZA())}function Hi(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"tr",35)(1,"td"),e._UZ(2,"p-tableCheckbox",36),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.qZA(),e.TgZ(15,"td")(16,"button",37),e.NdJ("click",function(){const l=e.CHM(t).$implicit,i=e.oxw();return e.KtG(i.addEditRole(l))}),e.qZA(),e.TgZ(17,"button",38),e.NdJ("click",function(){const l=e.CHM(t).$implicit,i=e.oxw();return e.KtG(i.deleteRole(l))}),e.qZA()()()}if(2&o){const t=r.$implicit;e.Q6J("pEditableRow",t),e.xp6(2),e.Q6J("value",t),e.xp6(2),e.Oqu(null==t?null:t.roleName),e.xp6(2),e.Oqu(null==t?null:t.roleDescription),e.xp6(2),e.Oqu(null==t?null:t.displayName),e.xp6(2),e.Oqu(null==t?null:t.defaultScreen),e.xp6(2),e.Oqu(null==t?null:t.priority),e.xp6(2),e.Oqu(null==t?null:t.isShow)}}function $i(o,r){}function Gi(o,r){1&o&&(e.TgZ(0,"tr")(1,"td",39),e._uU(2,"No record found."),e.qZA()())}const Bi=function(){return{"min-width":"50rem"}},Vi=function(o){return[10,25,o]},zi=function(){return["roleName"]};let Ki=(()=>{class o{constructor(t,a,n){this.roleService=t,this.dialog=a,this.messageService=n,this.destroy$=new R.x,this.first=0,this.rows=10,this.loading=!1}ngOnInit(){this.refreshData()}refreshData(){this.roleService.getRoles().subscribe(t=>{t.result&&(this.dataTable=t.result)})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}pageChange(t){this.first=t.first,this.rows=t.rows}clear(t){t.clear()}addEditRole(t){var a=this;this.roleModel=t,this.dialog.open(Ji,{disableClose:!0,height:"100vh",width:"600px",backdropClass:"custom-backdrop",hasBackdrop:!0,autoFocus:!1,data:{model:t,action:t?Z.t.Edit:Z.t.Add}}).afterClosed().subscribe(function(){var l=(0,p.Z)(function*(i){i&&a.refreshData()});return function(i){return l.apply(this,arguments)}}())}deleteRole(t){var a=[];!t||this.selectedRoles.length<=0||(a=t?[t.roleId]:this.selectedRoles.map(l=>l.roleId),this.dialog.open($,{width:"auto",height:"auto",backdropClass:"custom-backdrop",hasBackdrop:!0,autoFocus:!1,data:{message:`Do you wish to remove ${a.length} item(s)?`}}).afterClosed().subscribe(l=>{this.roleService.deleteRoles(a).subscribe(i=>{i.result?(this.messageService.add({key:"toast1",severity:"success",summary:"Success",detail:"Delete successfully!",life:2e3}),this.refreshData()):this.messageService.add({key:"toast1",severity:"warn",summary:"Warning",detail:"Failed!",life:2e3})})}))}static#e=this.\u0275fac=function(a){return new(a||o)(e.Y36(Se.U),e.Y36(f.uw),e.Y36(L.ez))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-role-management"]],decls:11,vars:15,consts:[[1,"card","w-100"],["styleClass","mb-4 gap-2"],["pTemplate","left"],["pTemplate","right"],["styleClass","p-datatable-sm","editMode","row","scrollHeight","700px","dataKey","roleId",3,"value","paginator","rows","showCurrentPageReport","tableStyle","rowsPerPageOptions","loading","globalFilterFields","selection","rowHover","scrollable","onPage","selectionChange"],["table",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","paginatorleft"],["pTemplate","emptymessage"],["pButton","","pRipple","","label","New","icon","pi pi-plus",1,"p-button-success","p-button-sm","mr-2",3,"click"],["pButton","","pRipple","","icon","pi pi-trash",1,"p-button-danger","p-button-sm",3,"label","disabled","click"],["pButton","","label","Clear","icon","pi pi-filter-slash",1,"p-button-outlined","p-button-sm","mr-2",3,"click"],["pButton","","label","Refresh","icon","pi pi-refresh",1,"p-button-outlined","p-button-sm",3,"click"],[1,"flex"],[1,"p-input-icon-left","ml-auto"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search by role name",1,"p-inputtext-sm",3,"input"],[2,"width","4rem"],["pSortableColumn","roleName",2,"min-width","150px"],["type","text","field","roleName","display","menu"],["field","roleName"],["pSortableColumn","roleDescription",2,"min-width","150px"],["type","date","field","roleDescription","display","menu"],["pSortableColumn","displayName",2,"min-width","150px"],["type","date","field","displayName","display","menu"],["pSortableColumn","defaultScreen",2,"min-width","150px"],["type","date","field","defaultScreen","display","menu"],["pSortableColumn","priority",2,"min-width","150px"],["type","date","field","priority","display","menu"],["field","priority"],["pSortableColumn","isShow",2,"min-width","150px"],["type","date","field","isShow","display","menu"],[2,"min-width","150px"],[3,"pEditableRow"],[3,"value"],["pButton","","pRipple","","icon","pi pi-pencil",1,"p-button-sm","p-button-success","mr-2",3,"click"],["pButton","","pRipple","","icon","pi pi-trash",1,"p-button-sm","p-button-warning",3,"click"],["colspan","20"]],template:function(a,n){1&a&&(e.TgZ(0,"div",0)(1,"p-toolbar",1),e.YNc(2,Pi,2,2,"ng-template",2),e.YNc(3,Yi,2,0,"ng-template",3),e.qZA(),e.TgZ(4,"p-table",4,5),e.NdJ("onPage",function(i){return n.pageChange(i)})("selectionChange",function(i){return n.selectedRoles=i}),e.YNc(6,Qi,4,0,"ng-template",6),e.YNc(7,Wi,24,0,"ng-template",7),e.YNc(8,Hi,18,8,"ng-template",8),e.YNc(9,$i,0,0,"ng-template",9),e.YNc(10,Gi,3,0,"ng-template",10),e.qZA()()),2&a&&(e.xp6(4),e.Q6J("value",n.dataTable)("paginator",!0)("rows",10)("showCurrentPageReport",!0)("tableStyle",e.DdM(11,Bi))("rowsPerPageOptions",e.VKq(12,Vi,null==n.dataTable?null:n.dataTable.length))("loading",n.loading)("globalFilterFields",e.DdM(14,zi))("selection",n.selectedRoles)("rowHover",!0)("scrollable",!0))},dependencies:[L.jx,U.Hq,se.o,b.iA,b.lQ,b.fz,b.UA,b.Mo,b.D$,b.xl,ce.o]})}return o})();class be{}(0,C.gn)([(0,u.vg)(),(0,u.C1)()],be.prototype,"key",void 0),(0,C.gn)([(0,u.vg)(),(0,u.C1)()],be.prototype,"group",void 0),(0,C.gn)([(0,u.vg)()],be.prototype,"value",void 0);class ji{}function Xi(o,r){if(1&o&&(e.TgZ(0,"small",14),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(null==t.frmSetting||null==t.frmSetting.controls?null:t.frmSetting.controls.key.errorMessage)}}function er(o,r){if(1&o&&(e.TgZ(0,"small",15),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(null==t.frmSetting||null==t.frmSetting.controls?null:t.frmSetting.controls.group.errorMessage)}}let tr=(()=>{class o{constructor(t,a,n,l,i,s,c,d,h){this.dialModalRef=t,this.data=a,this.settingService=n,this.frmBuilder=l,this.authService=i,this.toast=s,this.cdref=c,this.dialog=d,this.permissionService=h,this.destroy$=new R.x,this.isLoading=!1,this.isChange=!1,this.hasEditPermission=!1,this.action=a?.action??Z.t.Add,this.settingModel=a?.model??new be,this.oldSettingModel=a?.model??new be,this.authService.onTokenChange().subscribe(y=>{y.isValid()&&(this.currentUser=y.getPayload())})}ngAfterContentChecked(){this.cdref.detectChanges()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}ngOnInit(){var t=this;return(0,p.Z)(function*(){t.frmSetting=t.frmBuilder.formGroup(be,t.settingModel),t.dialModalRef.updatePosition({right:"0"})})()}ngAfterViewInit(){this.frmSetting&&this.frmSetting.valueChanges.pipe((0,he.q)(1)).subscribe(t=>this.isChange=!0)}closeDialog(){if(this.isChange)return this.isChange=!1,void this.dialog.open($,{backdropClass:"custom-backdrop",hasBackdrop:!0,data:{message:"Do you wish to close this popup? You will lose your unsaved data."}}).afterClosed().subscribe(a=>{a?this.dialModalRef.close():this.isChange=!0});this.dialModalRef.close()}saveData(){if(this.frmSetting.valid){this.isLoading=!this.isLoading;const t=Object.assign({},this.frmSetting.value),a=new ji;a.newSetting=t,a.newSetting.key=a.newSetting.key.toUpperCase(),a.newSetting.group=a.newSetting.group.toUpperCase(),a.oldSetting=this.oldSettingModel,this.settingService.saveSetting(a).pipe((0,k.R)(this.destroy$)).subscribe(n=>{n.result&&(this.toast.success("Save setting successfully","Success",{position:v.d6C.BOTTOM_END,duration:3e3}),this.dialModalRef.close(n.result))}).add(()=>{this.isLoading=!this.isLoading})}}static#e=this.\u0275fac=function(a){return new(a||o)(e.Y36(f.so),e.Y36(f.WI),e.Y36(Ee.L),e.Y36(u.GW),e.Y36(O._o),e.Y36(v.quB),e.Y36(e.sBO),e.Y36(f.uw),e.Y36(Le.QH))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-add-edit-setting"]],decls:24,vars:6,consts:[["mat-dialog-title","",1,"d-flex","flex-wrap",2,"margin","unset","padding","1px 10px 1px 28px",3,"nbSpinner"],["label","Save","icon","pi pi-save","styleClass","p-button-sm",3,"disabled","loading","click"],["fxLayout","row","fxLayoutAlign","end center",1,"ml-auto"],["mat-icon-button","","aria-label","Close the dialog",1,"ml-auto",3,"click"],[1,"mat-typography",2,"height","100%","overflow","auto"],[1,"container",3,"formGroup"],[1,"p-fluid","p-grid","p-formgrid"],[1,"p-field","p-col-12","p-md-1"],["for","key",1,"fs-14","fw-500"],["formControlName","key","id","key","type","key","aria-describedby","key-help","pInputText","",1,"p-inputtext-sm"],["id","key-help",4,"ngIf"],["formControlName","group","id","group","type","group","aria-describedby","group-help","pInputText","",1,"p-inputtext-sm"],["id","group-help",4,"ngIf"],["formControlName","value","id","value","type","value","pInputText","",1,"p-inputtext-sm"],["id","key-help"],["id","group-help"]],template:function(a,n){1&a&&(e.TgZ(0,"div",0)(1,"p-button",1),e.NdJ("click",function(){return n.saveData()}),e.qZA(),e.TgZ(2,"div",2)(3,"button",3),e.NdJ("click",function(){return n.closeDialog()}),e.TgZ(4,"mat-icon"),e._uU(5,"close"),e.qZA()()()(),e._UZ(6,"mat-divider"),e.TgZ(7,"mat-dialog-content",4)(8,"form",5)(9,"div",6)(10,"div",7)(11,"label",8),e._uU(12,"Key"),e.qZA(),e._UZ(13,"input",9),e.YNc(14,Xi,2,1,"small",10),e.qZA(),e.TgZ(15,"div",7)(16,"label",8),e._uU(17,"Group"),e.qZA(),e._UZ(18,"input",11),e.YNc(19,er,2,1,"small",12),e.qZA(),e.TgZ(20,"div",7)(21,"label",8),e._uU(22,"Value"),e.qZA(),e._UZ(23,"input",13),e.qZA()()()()),2&a&&(e.Q6J("nbSpinner",n.isLoading),e.xp6(1),e.Q6J("disabled",!(null!=n.frmSetting&&n.frmSetting.valid))("loading",n.isLoading),e.xp6(7),e.Q6J("formGroup",n.frmSetting),e.xp6(6),e.Q6J("ngIf",(null==n.frmSetting||null==n.frmSetting.controls||null==n.frmSetting.controls.key?null:n.frmSetting.controls.key.errors)&&((null==n.frmSetting||null==n.frmSetting.controls||null==n.frmSetting.controls.key?null:n.frmSetting.controls.key.dirty)||(null==n.frmSetting||null==n.frmSetting.controls||null==n.frmSetting.controls.key?null:n.frmSetting.controls.key.touched))),e.xp6(5),e.Q6J("ngIf",(null==n.frmSetting||null==n.frmSetting.controls||null==n.frmSetting.controls.group?null:n.frmSetting.controls.group.errors)&&((null==n.frmSetting||null==n.frmSetting.controls||null==n.frmSetting.controls.group?null:n.frmSetting.controls.group.dirty)||(null==n.frmSetting||null==n.frmSetting.controls||null==n.frmSetting.controls.group?null:n.frmSetting.controls.group.touched))))},dependencies:[T.O5,m._Y,m.Fj,m.JJ,m.JL,m.sg,m.u,u.bc,u.VP,u.YE,Q.Hw,J.RK,f.uh,f.xY,j.d,v.Q7R,x.xw,x.Wh,U.zx,se.o]})}return o})();function nr(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",11),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.addEditSetting())}),e.qZA(),e.TgZ(1,"button",12),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.deleteSelectedSetting())}),e.qZA()}if(2&o){const t=e.oxw();e.xp6(1),e.Q6J("label",t.Delete)("disabled",!t.selectedSettings||!(null!=t.selectedSettings&&t.selectedSettings.length))}}function ar(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",13),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(),l=e.MAs(5);return e.KtG(n.clear(l))}),e.qZA(),e.TgZ(1,"button",14),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.reset())}),e.qZA()}}function or(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",15)(1,"span",16),e._UZ(2,"i",17),e.TgZ(3,"input",18),e.NdJ("input",function(n){e.CHM(t),e.oxw();const l=e.MAs(5);return e.KtG(l.filterGlobal(n.target.value,"contains"))}),e.qZA()()()}}function lr(o,r){1&o&&(e.TgZ(0,"tr")(1,"th",19),e._UZ(2,"p-tableHeaderCheckbox"),e.qZA(),e.TgZ(3,"th",20),e._uU(4," Key "),e._UZ(5,"p-columnFilter",21)(6,"p-sortIcon",22),e.qZA(),e.TgZ(7,"th",23),e._uU(8," Group "),e._UZ(9,"p-columnFilter",24)(10,"p-sortIcon",25),e.qZA(),e.TgZ(11,"th",26),e._uU(12," Value "),e._UZ(13,"p-columnFilter",27)(14,"p-sortIcon",28),e.qZA(),e._UZ(15,"th",29),e.qZA())}function ir(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"tr",30)(1,"td"),e._UZ(2,"p-tableCheckbox",31),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td")(10,"button",32),e.NdJ("click",function(){const l=e.CHM(t).$implicit,i=e.oxw();return e.KtG(i.addEditSetting(l))}),e.qZA(),e.TgZ(11,"button",33),e.NdJ("click",function(){const l=e.CHM(t).$implicit,i=e.oxw();return e.KtG(i.deleteSetting(l))}),e.qZA()()()}if(2&o){const t=r.$implicit;e.Q6J("pEditableRow",t),e.xp6(2),e.Q6J("value",t),e.xp6(2),e.Oqu(null==t?null:t.key),e.xp6(2),e.Oqu(null==t?null:t.group),e.xp6(2),e.Oqu(null==t?null:t.value)}}function rr(o,r){}function sr(o,r){1&o&&(e.TgZ(0,"tr")(1,"td",34),e._uU(2,"No record found."),e.qZA()())}const ur=function(){return{"min-width":"50rem"}},cr=function(o){return[10,25,o]},dr=function(){return["key"]};let pr=(()=>{class o{constructor(t,a){this.settingService=t,this.dialog=a,this.destroy$=new R.x,this.first=0,this.rows=10,this.loading=!1}ngOnInit(){var t=this;return(0,p.Z)(function*(){t.loading=!t.loading,yield t.refreshData(),t.loading=!t.loading})()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}refreshData(){var t=this;return(0,p.Z)(function*(){t.loading=!t.loading;var a=yield t.settingService.getAllSetting().pipe((0,k.R)(t.destroy$)).toPromise();a.result&&(t.dataTable=a.result),t.loading=!t.loading})()}addEditSetting(t=null){var a=this;return(0,p.Z)(function*(){a.settingModel=t,a.dialog.open(tr,{disableClose:!0,height:"100vh",width:"600px",backdropClass:"custom-backdrop",hasBackdrop:!0,autoFocus:!1,data:{model:t,action:null===t?Z.t.Add:Z.t.Edit}}).afterClosed().subscribe(function(){var l=(0,p.Z)(function*(i){i&&(yield a.refreshData())});return function(i){return l.apply(this,arguments)}}())})()}next(){this.first=this.first+this.rows}prev(){this.first=this.first-this.rows}reset(){var t=this;return(0,p.Z)(function*(){t.first=0,yield t.refreshData()})()}pageChange(t){this.first=t.first,this.rows=t.rows}clear(t){t.clear()}deleteSetting(t){}deleteSelectedSetting(){}static#e=this.\u0275fac=function(a){return new(a||o)(e.Y36(Ee.L),e.Y36(f.uw))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-setting-management"]],decls:11,vars:15,consts:[[1,"card","w-100"],["styleClass","mb-4 gap-2"],["pTemplate","left"],["pTemplate","right"],["styleClass","p-datatable-sm","editMode","row","scrollHeight","700px","dataKey","key",3,"value","paginator","rows","showCurrentPageReport","tableStyle","rowsPerPageOptions","loading","globalFilterFields","selection","rowHover","scrollable","onPage","selectionChange"],["table",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","paginatorleft"],["pTemplate","emptymessage"],["pButton","","pRipple","","label","New","icon","pi pi-plus",1,"p-button-success","p-button-sm","mr-2",3,"click"],["pButton","","pRipple","","icon","pi pi-trash",1,"p-button-danger","p-button-sm",3,"label","disabled","click"],["pButton","","label","Clear","icon","pi pi-filter-slash",1,"p-button-outlined","p-button-sm","mr-2",3,"click"],["pButton","","label","Refresh","icon","pi pi-refresh",1,"p-button-outlined","p-button-sm",3,"click"],[1,"flex"],[1,"p-input-icon-left","ml-auto"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search by key",1,"p-inputtext-sm",3,"input"],[2,"width","4rem"],["pSortableColumn","key",2,"width","25%"],["type","text","field","key","display","menu"],["field","key"],["pSortableColumn","group",2,"width","25%"],["type","text","field","group","display","menu"],["field","group"],["pSortableColumn","value",2,"width","35%"],["type","text","field","value","display","menu"],["field","value"],[2,"width","15%"],[3,"pEditableRow"],[3,"value"],["pButton","","pRipple","","icon","pi pi-pencil",1,"p-button-sm","p-button-success","mr-2",3,"click"],["pButton","","pRipple","","icon","pi pi-trash",1,"p-button-sm","p-button-warning",3,"click"],["colspan","20"]],template:function(a,n){1&a&&(e.TgZ(0,"div",0)(1,"p-toolbar",1),e.YNc(2,nr,2,2,"ng-template",2),e.YNc(3,ar,2,0,"ng-template",3),e.qZA(),e.TgZ(4,"p-table",4,5),e.NdJ("onPage",function(i){return n.pageChange(i)})("selectionChange",function(i){return n.selectedSettings=i}),e.YNc(6,or,4,0,"ng-template",6),e.YNc(7,lr,16,0,"ng-template",7),e.YNc(8,ir,12,5,"ng-template",8),e.YNc(9,rr,0,0,"ng-template",9),e.YNc(10,sr,3,0,"ng-template",10),e.qZA()()),2&a&&(e.xp6(4),e.Q6J("value",n.dataTable)("paginator",!0)("rows",10)("showCurrentPageReport",!0)("tableStyle",e.DdM(11,ur))("rowsPerPageOptions",e.VKq(12,cr,null==n.dataTable?null:n.dataTable.length))("loading",n.loading)("globalFilterFields",e.DdM(14,dr))("selection",n.selectedSettings)("rowHover",!0)("scrollable",!0))},dependencies:[L.jx,U.Hq,se.o,b.iA,b.lQ,b.fz,b.UA,b.Mo,b.D$,b.xl,ce.o]})}return o})();var ke=g(8589),ht=g(1842),mr=g(1720),gr=g(2889);function fr(o,r){if(1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.frmData||null==t.frmData.controls?null:t.frmData.controls.from.errorMessage,"")}}function hr(o,r){if(1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.frmData||null==t.frmData.controls?null:t.frmData.controls.to.errorMessage,"")}}function _r(o,r){if(1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.frmData||null==t.frmData.controls?null:t.frmData.controls.description.errorMessage,"")}}function vr(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"p-button",17),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.deleteData())}),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("disabled",!t.frmData.valid)("loading",t.isLoading)}}function yr(o,r){if(1&o){const t=e.EpF();e.ynx(0),e.YNc(1,vr,1,2,"p-button",15),e.TgZ(2,"p-button",16),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.saveData())}),e.qZA(),e.BQk()}if(2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.action==t.tblactions.Edit),e.xp6(1),e.Q6J("disabled",!t.frmData.valid)("loading",t.isLoading)}}function br(o,r){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"p-button",18),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.reviewData())}),e.qZA(),e.BQk()}if(2&o){const t=e.oxw();e.xp6(1),e.Q6J("loading",t.isLoading)}}let Cr=(()=>{class o{constructor(t,a,n,l,i,s,c){this.frmBuilder=t,this.authService=a,this.toast=n,this.cdref=l,this.dataStateService=i,this.messageService=s,this.workCalendarService=c,this.onRefresh=new e.vpe,this.destroy$=new R.x,this.isLoading=!1,this.isAdmin=!1,this.tblactions=Z.t,this.authService.onTokenChange().pipe((0,k.R)(this.destroy$)).subscribe(d=>{d.isValid()&&(this.user=d.getPayload().user)})}ngOnInit(){this.dataModel=this.model??new ke.l6,this.action=this.dataModel?.workCalendarDetailId?Z.t.Edit:Z.t.Add,this.frmData=this.frmBuilder.formGroup(ke.l6,this.dataModel)}ngAfterContentChecked(){this.cdref.detectChanges()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}saveData(){if(this.frmData?.valid){this.isLoading=!this.isLoading;const t=Object.assign({},this.frmData.value);t.workCalendarId=this.data?.workCalendarId??this.model.workCalendarId,t.from="Invalid date"===Ze(t.from).format("HH:mm")?t.from:Ze(t.from).format("HH:mm"),t.to="Invalid date"===Ze(t.to).format("HH:mm")?t.to:Ze(t.to).format("HH:mm"),this.workCalendarService.saveWorkCalendarDetail(t).subscribe(a=>{a.result?(this.messageService.add({key:"toast1",severity:"success",summary:"Success",detail:"Save work calendar detail successfully",life:2e3}),this.onRefresh.emit(a)):this.toast.danger(a.message,"Failure",{position:v.d6C.BOTTOM_END})}).add(()=>{this.isLoading=!this.isLoading})}}reviewData(){const t=this.model;t.isReviewed=!0,this.workCalendarService.saveWorkCalendarDetail(t).subscribe(a=>{a.result?(this.messageService.add({key:"toast1",severity:"success",summary:"Success",detail:"Reviewed work calendar detail successfully",life:2e3}),this.onRefresh.emit(a)):this.toast.danger(a.message,"Failure",{position:v.d6C.BOTTOM_END})}).add(()=>{this.isLoading=!this.isLoading})}deleteData(){this.workCalendarService.deleteWorkCalendarDetail(this.dataModel?.workCalendarDetailId).subscribe(t=>{t.result?(this.messageService.add({key:"toast1",severity:"success",summary:"Success",detail:"Delete work calendar detail successfully",life:2e3}),this.onRefresh.emit(t)):this.toast.danger(t.message,"Failure",{position:v.d6C.BOTTOM_END})}).add(()=>{this.isLoading=!this.isLoading})}static#e=this.\u0275fac=function(a){return new(a||o)(e.Y36(u.GW),e.Y36(O._o),e.Y36(v.quB),e.Y36(e.sBO),e.Y36(ne.Q),e.Y36(L.ez),e.Y36(ht.H))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-add-edit-work-calendar-detail"]],inputs:{data:"data",model:"model"},outputs:{onRefresh:"onRefresh"},decls:26,vars:9,consts:[[1,"mat-typography"],[1,"container",3,"formGroup"],[1,"row"],[1,"p-fluid","p-grid","p-formgrid","p-md-1"],["fxLayout","row","fxLayoutAlign","space-around center"],[1,"p-field","p-col-12"],["for","from",1,"fs-14","fw-500"],["formControlName","from","id","from",1,"p-inputtext-sm",3,"timeOnly"],[4,"ngIf"],["for","to",1,"fs-14","fw-500"],["formControlName","to","id","to",1,"p-inputtext-sm",3,"timeOnly"],["formControlName","codeColor"],["for","description",1,"fs-14","fw-500"],["rows","5","pInputTextarea","","formControlName","description","id","description",1,"p-inputtext-sm"],["fxLayout","row","fxLayoutGap","5","fxLayoutAlign","end end","mat-dialog-title","",1,"dialog-header",2,"margin","unset","padding-top","40px",3,"nbSpinner"],["label","Delete","icon","pi pi-times","styleClass","p-button-sm p-button-rounded p-button-danger",3,"disabled","loading","click",4,"ngIf"],["label","Save","icon","pi pi-save","styleClass","p-button-sm p-button-rounded p-button-success",3,"disabled","loading","click"],["label","Delete","icon","pi pi-times","styleClass","p-button-sm p-button-rounded p-button-danger",3,"disabled","loading","click"],["label","Reviewed","icon","pi pi-eye","styleClass","p-button-sm p-button-rounded p-button-success",3,"loading","click"]],template:function(a,n){1&a&&(e.TgZ(0,"mat-dialog-content",0)(1,"form",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"label",6),e._uU(7,"From"),e.qZA(),e._UZ(8,"p-calendar",7),e.YNc(9,fr,2,1,"mat-error",8),e.qZA(),e.TgZ(10,"div",5)(11,"label",9),e._uU(12,"To"),e.qZA(),e._UZ(13,"p-calendar",10),e.YNc(14,hr,2,1,"mat-error",8),e.qZA(),e.TgZ(15,"div",5),e._UZ(16,"p-colorPicker",11),e.qZA()()(),e.TgZ(17,"div",3)(18,"div",5)(19,"label",12),e._uU(20,"Description"),e.qZA(),e._UZ(21,"textarea",13),e.YNc(22,_r,2,1,"mat-error",8),e.qZA()()()()(),e.TgZ(23,"div",14),e.YNc(24,yr,3,3,"ng-container",8),e.YNc(25,br,2,1,"ng-container",8),e.qZA()),2&a&&(e.xp6(1),e.Q6J("formGroup",n.frmData),e.xp6(7),e.Q6J("timeOnly",!0),e.xp6(1),e.Q6J("ngIf",(null==n.frmData||null==n.frmData.controls||null==n.frmData.controls.from?null:n.frmData.controls.from.errors)&&((null==n.frmData||null==n.frmData.controls||null==n.frmData.controls.from?null:n.frmData.controls.from.dirty)||(null==n.frmData||null==n.frmData.controls||null==n.frmData.controls.from?null:n.frmData.controls.from.touched))),e.xp6(4),e.Q6J("timeOnly",!0),e.xp6(1),e.Q6J("ngIf",(null==n.frmData||null==n.frmData.controls||null==n.frmData.controls.to?null:n.frmData.controls.to.errors)&&((null==n.frmData||null==n.frmData.controls||null==n.frmData.controls.to?null:n.frmData.controls.to.dirty)||(null==n.frmData||null==n.frmData.controls||null==n.frmData.controls.to?null:n.frmData.controls.to.touched))),e.xp6(8),e.Q6J("ngIf",(null==n.frmData||null==n.frmData.controls||null==n.frmData.controls.description?null:n.frmData.controls.description.errors)&&((null==n.frmData||null==n.frmData.controls||null==n.frmData.controls.description?null:n.frmData.controls.description.dirty)||(null==n.frmData||null==n.frmData.controls||null==n.frmData.controls.description?null:n.frmData.controls.description.touched))),e.xp6(1),e.Q6J("nbSpinner",n.isLoading),e.xp6(1),e.Q6J("ngIf",(null==n.user?null:n.user.userId)===(null==n.data?null:n.data.userId)&&!n.dataModel.isReviewed),e.xp6(1),e.Q6J("ngIf",(null==n.user?null:n.user.userId)===(null==n.data||null==n.data.User?null:n.data.User.ownerId)&&!n.dataModel.isReviewed))},dependencies:[T.O5,m._Y,m.Fj,m.JJ,m.JL,m.sg,m.u,u.bc,u.VP,u.YE,F.TO,f.uh,f.xY,v.Q7R,x.xw,x.SQ,x.Wh,gr.zH,Je.f,U.zx,ft.g],styles:["[_nghost-%COMP%]     .p-colorpicker-overlay-panel{left:-160px!important}[_nghost-%COMP%]     .p-fluid .p-calendar .p-inputtext{width:60px!important}  .mat-mdc-menu-panel.mat-mdc-menu-panel{max-width:380px!important}  .mat-mdc-menu-content{padding:8px!important}"]})}return o})();const Tr=["dataTable"],xr=["matSelectStatus"],_t=function(o){return{color:o}};function wr(o,r){if(1&o&&(e.TgZ(0,"mat-button-toggle",46)(1,"mat-icon",47),e._uU(2,"fiber_manual_record"),e.qZA(),e._uU(3),e.qZA()),2&o){const t=r.$implicit,a=e.oxw();e.s9C("value",null==t?null:t.value),e.Q6J("ngStyle",e.VKq(4,_t,null!=a.listStatusChoose&&a.listStatusChoose.includes(null==t?null:t.value)?"":"#cccccc")),e.xp6(1),e.Q6J("ngStyle",e.VKq(6,_t,null!=a.listStatusChoose&&a.listStatusChoose.includes(null==t?null:t.value)?null==t?null:t.codeColor:"#dddddd")),e.xp6(2),e.hij(" ",null==t?null:t.display," ")}}function Sr(o,r){if(1&o&&(e.TgZ(0,"div",48),e._UZ(1,"nb-user",49),e.qZA()),2&o){const t=r.$implicit;e.xp6(1),e.Q6J("name",((null==t?null:t.firstName)||"")+" "+((null==t?null:t.middleName)||"")+" "+((null==t?null:t.lastName)||""))("title",t.email)("showTitle",!0)("picture",null==t?null:t.avatarUrl)}}function Zr(o,r){1&o&&(e.TgZ(0,"th",50),e._uU(1," EMPLOYEES "),e.qZA())}function kr(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"td",51)(1,"b",52),e.NdJ("click",function(){const l=e.CHM(t).$implicit,i=e.oxw();return e.KtG(i.openEmployeeDetail(l.userId))}),e._uU(2),e.qZA()()}if(2&o){const t=r.$implicit;e.xp6(2),e.hij(" ",t.userName," ")}}const vt=function(o){return{"background-color":o}};function Dr(o,r){if(1&o&&(e.TgZ(0,"th",56),e.ALo(1,"checkColorToday"),e._uU(2),e.qZA()),2&o){const t=e.oxw(2).$implicit,a=e.oxw();let n;e.Q6J("ngStyle",e.VKq(7,vt,"today"===e.Dn7(1,3,null==t?null:t.value,a.timeMode,null==a.frmGroup||null==(n=a.frmGroup.get("fromDate"))?null:n.value)?"#8dc63f":"white")),e.uIk("colspan",t.length),e.xp6(2),e.hij(" ",null==t?null:t.value," ")}}function Mr(o,r){1&o&&e.GkF(0,62)}function Ar(o,r){1&o&&e.GkF(0,63)}const yt=function(o){return{data:o}};function Lr(o,r){if(1&o&&(e.TgZ(0,"td",58)(1,"div",59),e.YNc(2,Mr,1,0,"ng-container",60),e.YNc(3,Ar,1,0,"ng-container",61),e.qZA()()),2&o){const t=r.$implicit,a=e.oxw(3).$implicit;e.oxw();const n=e.MAs(64),l=e.MAs(66);e.xp6(2),e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.VKq(4,yt,t[a.key])),e.xp6(1),e.Q6J("ngTemplateOutlet",l)("ngTemplateOutletContext",e.VKq(6,yt,t[a.key]))}}function Er(o,r){1&o&&(e.ynx(0),e.YNc(1,Lr,4,8,"td",57),e.BQk())}function Rr(o,r){if(1&o&&(e.ynx(0),e.YNc(1,Dr,3,9,"th",55),e.YNc(2,Er,2,0,"ng-container",54),e.BQk()),2&o){const t=e.oxw(2);e.xp6(2),e.Q6J("ngIf","Both"===t.viewMode)}}function Nr(o,r){if(1&o&&(e.ynx(0)(1,53),e.YNc(2,Rr,3,1,"ng-container",54),e.BQk()()),2&o){const t=r.$implicit,a=e.oxw();e.xp6(1),e.Q6J("matColumnDef",t.key),e.xp6(1),e.Q6J("ngIf","Week"===a.timeMode)}}function qr(o,r){1&o&&e._UZ(0,"tr",64)}function Ur(o,r){1&o&&e._UZ(0,"tr",65)}function Ir(o,r){1&o&&e._UZ(0,"i",75)}function Fr(o,r){1&o&&e._UZ(0,"i",76)}function Or(o,r){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,Ir,1,0,"i",73),e.YNc(2,Fr,1,0,"i",74),e.qZA()),2&o){const t=e.oxw(3).data;e.xp6(1),e.Q6J("ngIf",5===t.workingType),e.xp6(1),e.Q6J("ngIf",6===t.workingType)}}function Jr(o,r){if(1&o&&e.YNc(0,Or,3,2,"div",54),2&o){const t=e.oxw(2).data;e.Q6J("ngIf",t.workingType)}}const Pr=function(o){return{data:o,model:null}};function Yr(o,r){if(1&o&&e._UZ(0,"i",77),2&o){const t=e.oxw(2).data;e.oxw();const a=e.MAs(68);e.Q6J("matMenuTriggerFor",a)("matMenuTriggerData",e.VKq(2,Pr,t))}}const Qr=function(o){return{disabledNoOfCasesDiv:o}};function Wr(o,r){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",66)(2,"div",67)(3,"div",68)(4,"p-dropdown",69),e.NdJ("ngModelChange",function(n){e.CHM(t);const l=e.oxw().data;return e.KtG(l.workingType=n)})("onChange",function(n){e.CHM(t);const l=e.oxw().data,i=e.oxw();return e.KtG(i.editWorkType(n,l))}),e.YNc(5,Jr,1,1,"ng-template",70),e.qZA(),e.TgZ(6,"p-dropdown",71),e.NdJ("ngModelChange",function(n){e.CHM(t);const l=e.oxw().data;return e.KtG(l.workingHour=n)})("onChange",function(n){e.CHM(t);const l=e.oxw().data,i=e.oxw();return e.KtG(i.editWorkHour(n,l))}),e.qZA(),e.YNc(7,Yr,1,4,"i",72),e.qZA()()(),e.BQk()}if(2&o){const t=e.oxw().data,a=e.oxw();e.xp6(2),e.Q6J("ngClass",e.VKq(7,Qr,!((null==a.user?null:a.user.userId)===(null==t?null:t.userId)||(null==a.user?null:a.user.userId)===(null==t||null==t.User?null:t.User.ownerId)))),e.xp6(2),e.Q6J("options",a.lstWorkType)("ngModel",t.workingType),e.xp6(2),e.Q6J("options",a.lstWorkHours)("ngModel",t.workingHour)("readonly",!a.isAdmin),e.xp6(1),e.Q6J("ngIf",(null==a.user?null:a.user.userId)===(null==t?null:t.userId))}}function Hr(o,r){1&o&&e.YNc(0,Wr,8,9,"ng-container",54),2&o&&e.Q6J("ngIf",r.data)}function $r(o,r){1&o&&e._UZ(0,"i",85)}const Gr=function(o,r){return{data:o,model:r}};function Br(o,r){if(1&o&&(e.TgZ(0,"div",81)(1,"div",0)(2,"div",82),e._uU(3),e.qZA(),e.TgZ(4,"div",83),e.YNc(5,$r,1,0,"i",84),e.qZA()(),e.TgZ(6,"span"),e._uU(7),e.qZA()()),2&o){const t=r.$implicit,a=e.oxw(2).data;e.oxw();const n=e.MAs(68);e.Q6J("ngStyle",e.VKq(7,vt,null==t?null:t.codeColor))("matMenuTriggerFor",n)("matMenuTriggerData",e.WLB(9,Gr,a,t)),e.xp6(3),e.AsE(" ",null==t?null:t.from," - ",null==t?null:t.to," "),e.xp6(2),e.Q6J("ngIf",null==t?null:t.isReviewed),e.xp6(2),e.Oqu(null==t?null:t.description)}}function Vr(o,r){if(1&o&&(e.TgZ(0,"p-listbox",80),e.YNc(1,Br,8,12,"ng-template",18),e.qZA()),2&o){const t=e.oxw().data;e.Q6J("options",null==t?null:t.WorkCalendarDetails)}}function zr(o,r){if(1&o&&(e.TgZ(0,"div",78),e.YNc(1,Vr,2,1,"p-listbox",79),e.qZA()),2&o){const t=r.data;e.xp6(1),e.Q6J("ngIf",(null==t||null==t.WorkCalendarDetails?null:t.WorkCalendarDetails.length)>0)}}function Kr(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",86),e.NdJ("click",function(n){return n.stopPropagation()})("keydown",function(n){return n.stopPropagation()}),e.TgZ(1,"app-add-edit-work-calendar-detail",87),e.NdJ("onRefresh",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.callDataSource())}),e.qZA()()}if(2&o){const t=r.data,a=r.model;e.xp6(1),e.Q6J("data",t)("model",a)}}const bt=function(o){return{"selected-button-type":o}},jr=[{path:"",component:Zt,children:[{path:"dashboard",component:Zn},{path:"data-state",component:Wn},{path:"employee",component:wa},{path:"leave-type",component:Ja},{path:"leave-entitlement",component:Ao},{path:"leave-request",component:hl},{path:"report-schedule",component:vi},{path:"work-calendar",component:(()=>{class o{constructor(t,a,n,l,i,s,c,d,h){this.frmBuilder=t,this.workCalendarService=a,this.userService=n,this.roleService=l,this.authService=i,this.router=s,this.toast=c,this.dataStateService=d,this.dialog=h,this.isAdmin=!1,this.timeMode="Week",this.viewMode="Both",this.typeMode="Grid",this.timeModeDisplay="This week",this.isLoading=!1,this.dataSource=[],this.headerData=[],this.headerData2=[],this.defaultHeader=["userName"],this.listStatus=[{codeColor:"#a33ce3",value:"5",display:"At Company"},{codeColor:"#f78282",value:"6",display:"At Home"}],this.listStatusLeave=[{codeColor:"#996600",value:"noPaid",display:"Unpaid Leave"},{codeColor:"#3366cc",value:"paid",display:"Paid Leave"}],this.listStatusRole=[{codeColor:"#cc9966",value:"37461060-43d3-42f4-8967-f0ecf7f67f71",display:"Internship"},{codeColor:"#df9aad",value:"95386088-fc73-4a2e-a64d-d3e73a4c07ff",display:"Employee"}],this.listStatusChoose=[],this.listStatusLeaveChoose=[],this.listStatusRoleChoose=[],this.isMyEmployee=!1,this.listOwners=[],this.btnExportState=!1,this.lstWorkType=[],this.lstWorkHours=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18],this.userService.getAllEmployee().subscribe(y=>{y.result&&(this.listEmployees=y.result,this.listEmployees.map(w=>w.displayName=`${w?.firstName} ${w?.middleName} ${w?.lastName}`))}),this.roleService.getRoles().subscribe(y=>{y.result&&(this.listRoles=y.result)}),this.dataFilterWorkCalendar=new ke.a2,this.authService.onTokenChange().subscribe(y=>{y.isValid()&&(this.user=y.getPayload().user,this.user?.roles?.find(w=>"admin"===w.roleName)&&(this.isAdmin=!0))}),this.dataStateService.getDataStateByType("WORK_TYPE").subscribe(y=>{y.result&&(this.lstWorkType=y.result)})}ngOnInit(){var t=this;return(0,p.Z)(function*(){yield t.initialData()})()}initialData(){var t=this;return(0,p.Z)(function*(){const a=window.localStorage.getItem("workCalendarStatus");null==a?t.listStatus.map(i=>t.listStatusChoose?.push(i?.value)):t.listStatusChoose=a?.split(",");const n=window.localStorage.getItem("attendanceReportLeaveStatus");null==n?t.listStatusLeave.map(i=>t.listStatusLeaveChoose?.push(i?.value)):t.listStatusLeaveChoose=n?.split(","),window.localStorage.getItem("workCalendarRoleStatus"),yield t.changeAttendanceReportMode(),t.frmGroup=t.frmBuilder.formGroup(ke.a2,t.dataFilterWorkCalendar)})()}callDataSource(){var t=this;return(0,p.Z)(function*(){t.isLoading=!t.isLoading;const a=yield t.workCalendarService.getWorkCalendar(t.frmGroup.value).toPromise();a.result&&(t.data=a.result,t.headerData=[],t.data.column.forEach(n=>{t.headerData.push(...n.month)}),t.headerData2=[...t.defaultHeader,...new Set(t.headerData.map(n=>n.key))],t.dataSource=[],t.setupData(t.data.data,t.dataSource)),t.isLoading=!t.isLoading})()}setupData(t,a){for(var n=0;n<t.length;n++)t[n].workCalendarMonthly?.map(l=>t[n]={...t[n],...l}),a.push(t[n])}changeAttendanceReportMode(t=!1){var a=this;return(0,p.Z)(function*(){const n=new Date;switch(a.dataFilterWorkCalendar.order=t?0:a.dataFilterWorkCalendar.order,a.timeMode){case"Week":a.timeModeDisplay="This week",a.dataFilterWorkCalendar.fromDate=new Date(n.setDate(n.getDate()-n.getDay()+1)),a.dataFilterWorkCalendar.toDate=new Date(n.setDate(n.getDate()+(7-n.getDay()))),a.dataFilterWorkCalendar.fromDate.setDate(a.dataFilterWorkCalendar.fromDate.getDate()+7*a.dataFilterWorkCalendar.order),a.dataFilterWorkCalendar.toDate.setDate(a.dataFilterWorkCalendar.toDate.getDate()+7*a.dataFilterWorkCalendar.order);break;case"Day":a.timeModeDisplay="Today",a.dataFilterWorkCalendar.fromDate=new Date(n),a.dataFilterWorkCalendar.toDate=new Date(n),a.dataFilterWorkCalendar.fromDate.setDate(a.dataFilterWorkCalendar.fromDate.getDate()+a.dataFilterWorkCalendar.order),a.dataFilterWorkCalendar.toDate.setDate(a.dataFilterWorkCalendar.toDate.getDate()+a.dataFilterWorkCalendar.order);break;case"Month":a.timeModeDisplay="This month",a.dataFilterWorkCalendar.fromDate=new Date(n.getFullYear(),n.getMonth()+a.dataFilterWorkCalendar.order,1),a.dataFilterWorkCalendar.toDate=new Date(n.getFullYear(),n.getMonth()+1+a.dataFilterWorkCalendar.order,0)}a.dataFilterWorkCalendar.fromDate.setHours(0,0,0),a.dataFilterWorkCalendar.toDate.setHours(23,59,59),a.dataFilterWorkCalendar.timeMode=a.timeMode,a.dataFilterWorkCalendar.listStatus=a.listStatusChoose,a.dataFilterWorkCalendar.listStatusLeave=a.listStatusLeaveChoose,a.dataFilterWorkCalendar.listRoles=a.listStatusRoleChoose,a.frmGroup=a.frmBuilder.formGroup(ke.a2,a.dataFilterWorkCalendar),yield a.callDataSource()})()}refreshData(){var t=this;return(0,p.Z)(function*(){t.isMyEmployee=!1,t.matSelectStatus?.options?.forEach(a=>a.deselect()),t.frmGroup.reset(),t.listStatusChoose=[],t.listStatusLeaveChoose=[],t.listStatusRoleChoose=[],t.dataFilterWorkCalendar.order=0,t.dataFilterWorkCalendar.listProfile=[],t.dataFilterWorkCalendar.listRoles=[],t.listStatus.map(a=>t.listStatusChoose?.push(a?.value)),window.localStorage.setItem("workCalendarStatus",`${t.listStatusChoose}`),t.listStatusLeave.map(a=>t.listStatusLeaveChoose?.push(a?.value)),window.localStorage.setItem("attendanceReportLeaveStatus",`${t.listStatusLeaveChoose}`),window.localStorage.setItem("workCalendarRoleStatus",`${t.listStatusRoleChoose}`),t.dataFilterWorkCalendar.listStatus=t.listStatusChoose,t.dataFilterWorkCalendar.listStatusLeave=t.listStatusLeaveChoose,t.dataFilterWorkCalendar.listRoles=t.listStatusRoleChoose,yield t.changeAttendanceReportMode()})()}refreshThis(){var t=this;return(0,p.Z)(function*(){t.dataFilterWorkCalendar.order=0,yield t.changeAttendanceReportMode()})()}prevData(){var t=this;return(0,p.Z)(function*(){t.dataFilterWorkCalendar.order-=1,yield t.changeAttendanceReportMode()})()}nextData(){var t=this;return(0,p.Z)(function*(){t.dataFilterWorkCalendar.order+=1,yield t.changeAttendanceReportMode()})()}applyFilter(){var t=this;return(0,p.Z)(function*(){t.dataFilterWorkCalendar.order=0,t.dataFilterWorkCalendar.fromDate=t.frmGroup?.get("fromDate")?.value,t.dataFilterWorkCalendar.toDate=t.frmGroup?.get("toDate")?.value,t.dataFilterWorkCalendar.listStatus=t.listStatusChoose,t.dataFilterWorkCalendar.listStatusLeave=t.listStatusLeaveChoose,t.frmGroup.get("listProfile").setValue(t.dataFilterWorkCalendar?.listProfile),t.frmGroup.get("listStatus").setValue(t.dataFilterWorkCalendar?.listStatus),t.frmGroup.get("listRoles").setValue(t.dataFilterWorkCalendar?.listRoles),t.frmGroup.get("listStatusLeave").setValue(t.dataFilterWorkCalendar?.listStatusLeave),yield t.callDataSource()})()}exportData(t){var a=this;return(0,p.Z)(function*(){a.btnExportState=!a.btnExportState,a.btnExportState=!a.btnExportState})()}onFilterDropDownEmployee(t){t&&(this.dataFilterWorkCalendar.listProfile=t?.value)}onFilterDropDownRole(t){t&&(this.dataFilterWorkCalendar.listRoles=t?.value,this.listStatusRoleChoose=[],this.dataFilterWorkCalendar?.listRoles?.map(a=>{this.listStatusRole.findIndex(l=>l.value===a)>-1&&this.listStatusRoleChoose.push(a)}))}getMyEmployeeAttendance(t){var a=this;return(0,p.Z)(function*(){if(a.isMyEmployee=t,t){var n=yield a.userService.getOwnersByEmployeeId(a.user?.userId).toPromise();n.result&&(a.listOwners=n.result.map(l=>l.userId),a.listOwners.length<=0&&a.listOwners.push("Nothing"),a.dataFilterWorkCalendar.listRoles=[],a.listStatusRoleChoose=[],a.dataFilterWorkCalendar.listProfile=[],a.dataFilterWorkCalendar.listProfile=a.dataFilterWorkCalendar?.listProfile?.concat(a.listOwners))}else a.dataFilterWorkCalendar.listProfile=a.dataFilterWorkCalendar?.listProfile?.filter(l=>!a.listOwners.includes(l)),a.listOwners=[];a.frmGroup.get("listProfile").setValue(a.dataFilterWorkCalendar?.listProfile),a.frmGroup.get("listRoles").setValue(a.dataFilterWorkCalendar?.listRoles),yield a.callDataSource()})()}changeStatus(t){var a=this;return(0,p.Z)(function*(){window.localStorage.setItem("workCalendarStatus",`${a.listStatusChoose}`),a.dataFilterWorkCalendar.listStatus=a.listStatusChoose,a.frmGroup.get("listStatus").setValue(a.dataFilterWorkCalendar?.listStatus),yield a.callDataSource()})()}changeStatusLeave(t){var a=this;return(0,p.Z)(function*(){window.localStorage.setItem("attendanceReportLeaveStatus",`${a.listStatusLeaveChoose}`),a.dataFilterWorkCalendar.listStatusLeave=a.listStatusLeaveChoose,a.frmGroup.get("listStatusLeave").setValue(a.dataFilterWorkCalendar?.listStatusLeave),yield a.callDataSource()})()}changeStatusRole(t){var a=this;return(0,p.Z)(function*(){window.localStorage.setItem("workCalendarRoleStatus",`${a.listStatusRoleChoose}`),a.dataFilterWorkCalendar.listRoles=a.listStatusRoleChoose,a.frmGroup.get("listRoles").setValue(a.dataFilterWorkCalendar?.listRoles),yield a.callDataSource()})()}openEmployeeDetail(t){t&&this.router.navigate([`/configuration/employee/${t}`])}onRefresh(){var t=this;return(0,p.Z)(function*(){yield t.changeAttendanceReportMode()})()}changeViewMode(){var t=this;return(0,p.Z)(function*(){t.dataFilterWorkCalendar.viewMode=t.viewMode,yield t.changeAttendanceReportMode()})()}editWorkType(t,a){var n=this;return(0,p.Z)(function*(){if(t&&a){const i=a;i.workingType=t.value,(yield n.workCalendarService.saveWorkCalendar(i).toPromise()).result&&(n.toast.success("Save working type successfully","Success",{position:v.d6C.BOTTOM_END,duration:3e3}),yield n.callDataSource())}})()}editWorkHour(t,a){var n=this;return(0,p.Z)(function*(){if(t&&a&&t&&a){const i=a;i.workingHour=t.value,(yield n.workCalendarService.saveWorkCalendar(i).toPromise()).result&&(n.toast.success("Save working hours successfully","Success",{position:v.d6C.BOTTOM_END,duration:3e3}),yield n.callDataSource())}})()}static#e=this.\u0275fac=function(a){return new(a||o)(e.Y36(u.GW),e.Y36(ht.H),e.Y36(G.n),e.Y36(Se.U),e.Y36(O._o),e.Y36(pe.F0),e.Y36(v.quB),e.Y36(ne.Q),e.Y36(f.uw))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-work-calendar-management"]],viewQuery:function(a,n){if(1&a&&(e.Gf(Tr,5),e.Gf(xr,5)),2&a){let l;e.iGM(l=e.CRH())&&(n.table=l.first),e.iGM(l=e.CRH())&&(n.matSelectStatus=l.first)}},decls:78,vars:26,consts:[["fxLayout","row","fxLayoutAlign","space-between center"],[2,"display","flex","justify-content","left"],["multiple","",2,"border","none","background-color","#edf1f7","height","42px",3,"ngModel","change","ngModelChange"],["style","border: none; background-color: #edf1f7;",3,"value","ngStyle",4,"ngFor","ngForOf"],[2,"display","flex","justify-content","center"],[1,"attendance-report-mode",3,"ngModel","ngModelChange"],["value","List","ngDefaultControl","","routerLink","/admin/report-schedule","matTooltip","Go to Report Schedule",3,"ngClass"],["value","Grid","routerLink","/admin/work-calendar","matTooltip","Go to Work Calendar",3,"ngClass"],[2,"display","flex","justify-content","right"],[2,"display","flex","justify-content","right","background-color","#edf1f7","align-items","center"],[2,"margin-right","20px","margin-top","10px",3,"checked","checkedChange"],["mat-raised-button","",1,"button-app-function",2,"background-color","#b45cea","color","white",3,"click"],[2,"background-color","#edf1f7","align-items","center"],[1,"form-function-filter",3,"formGroup"],["fxLayout","row","fxLayoutAlign","space-between center","fxLayoutGap","12px",1,"col-12",2,"height","64px"],["optionValue","roleId","optionLabel","displayName","filterBy","roleName,displayName","placeholder","Choose Role",1,"p-inputtext-sm",3,"options","filter","onChange"],["multiSelectRoles",""],["optionValue","userId","optionLabel","displayName","filterBy","firstName,middleName,lastName,email","placeholder","Choose Employee",1,"p-inputtext-sm",3,"options","filter","onChange"],["pTemplate","item"],[2,"font-size","14px"],["appearance","fill",1,"form-function-filter"],["matInput","","formControlName","fromDate","readonly","",3,"matDatepicker","click"],["fromDatePicker",""],["matInput","","formControlName","toDate","readonly","",3,"matDatepicker","click"],["toDatePicker",""],["mat-raised-button","",1,"background-gradient",2,"color","white","margin","0 10px",3,"click"],["fxLayout","row","fxLayoutAlign","center center",2,"height","30px","padding-bottom","15px"],[1,"example-container","mat-elevation-z2",3,"nbSpinner"],[1,"example-table-container"],["dataTable",""],["mat-table","",3,"dataSource"],["matColumnDef","userName","sticky",""],["mat-header-cell","","class","header-table-color first-table-cell-fixed","style","text-align: center; background-color: white;",4,"matHeaderCellDef"],["mat-cell","","style","text-align: left; border-color: #696969;",4,"matCellDef"],[4,"ngFor","ngForOf"],["mat-header-row","","class","report-header-row",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","","class","report-row",4,"matRowDef","matRowDefColumns"],["workCalendar",""],["workCalendarDetail",""],["xPosition","after"],["addEditWorkCalendarDetail","matMenu"],["matMenuContent",""],["exportMenu","matMenu"],["mat-menu-item","","color","primary",1,"button-app-function",3,"nbSpinner","click"],[1,"d-none"],["nonDisplayMenu","matMenu"],[2,"border","none","background-color","#edf1f7",3,"value","ngStyle"],[2,"margin-right","0px !important",3,"ngStyle"],[1,"flex","align-items-center","gap-2","dropdown-items-with-img"],["size","small",1,"custom-nb-user-small",3,"name","title","showTitle","picture"],["mat-header-cell","",1,"header-table-color","first-table-cell-fixed",2,"text-align","center","background-color","white"],["mat-cell","",2,"text-align","left","border-color","#696969"],[2,"padding-left","10px","cursor","pointer",3,"click"],[3,"matColumnDef"],[4,"ngIf"],["mat-header-cell","","style","text-align: center;","class","header-table-color tableCellFixedWeek",3,"ngStyle",4,"matHeaderCellDef"],["mat-header-cell","",1,"header-table-color","tableCellFixedWeek",2,"text-align","center",3,"ngStyle"],["mat-cell","","class","custom-font","style","border-color: #696969;",4,"matCellDef"],["mat-cell","",1,"custom-font",2,"border-color","#696969"],["fxLayout","column","fxLayoutAlign","space-around center"],["fxFlex","40",4,"ngTemplateOutlet","ngTemplateOutletContext"],["fxFlex","60",4,"ngTemplateOutlet","ngTemplateOutletContext"],["fxFlex","40"],["fxFlex","60"],["mat-header-row","",1,"report-header-row"],["mat-row","",1,"report-row"],[1,"p-fluid","p-grid","p-formgrid","p-md-1"],[1,"p-field","p-col-12",3,"ngClass"],[1,"p-inputgroup"],["optionLabel","dataStateName","optionValue","dataStateId",3,"options","ngModel","ngModelChange","onChange"],["pTemplate","selectedItem"],[3,"options","ngModel","readonly","ngModelChange","onChange"],["class","pi pi-plus-circle","style","align-items: center; display: flex;",3,"matMenuTriggerFor","matMenuTriggerData",4,"ngIf"],["class","pi pi-building","style","color: #a33ce3;",4,"ngIf"],["class","pi pi-home","style","color: #f78282",4,"ngIf"],[1,"pi","pi-building",2,"color","#a33ce3"],[1,"pi","pi-home",2,"color","#f78282"],[1,"pi","pi-plus-circle",2,"align-items","center","display","flex",3,"matMenuTriggerFor","matMenuTriggerData"],[2,"max-height","64px","min-height","64px","overflow","auto"],[3,"options",4,"ngIf"],[3,"options"],[2,"color","white","font-size","12px","min-width","130px",3,"ngStyle","matMenuTriggerFor","matMenuTriggerData"],["fxFlex","80"],["fxFlex","20"],["class","pi pi-eye",4,"ngIf"],[1,"pi","pi-eye"],[3,"click","keydown"],[3,"data","model","onRefresh"]],template:function(a,n){if(1&a){const l=e.EpF();e.TgZ(0,"div")(1,"div",0)(2,"div",1)(3,"mat-button-toggle-group",2),e.NdJ("change",function(s){return n.changeStatus(s)})("ngModelChange",function(s){return n.listStatusChoose=s}),e.YNc(4,wr,4,8,"mat-button-toggle",3),e.qZA()(),e.TgZ(5,"div",4)(6,"mat-button-toggle-group",5),e.NdJ("ngModelChange",function(s){return n.typeMode=s}),e.TgZ(7,"mat-button-toggle",6)(8,"mat-icon"),e._uU(9,"compost"),e.qZA()(),e.TgZ(10,"mat-button-toggle",7)(11,"mat-icon"),e._uU(12,"edit_calendar"),e.qZA()()()(),e.TgZ(13,"div",8)(14,"mat-toolbar",9)(15,"nb-toggle",10),e.NdJ("checkedChange",function(s){return n.getMyEmployeeAttendance(s)}),e._uU(16," My Employees "),e.qZA(),e.TgZ(17,"button",11),e.NdJ("click",function(){return n.refreshData()}),e.TgZ(18,"mat-icon"),e._uU(19,"refresh"),e.qZA()(),e.TgZ(20,"button",11),e.NdJ("click",function(){return n.prevData()}),e.TgZ(21,"mat-icon"),e._uU(22,"arrow_back_ios"),e.qZA()(),e.TgZ(23,"button",11),e.NdJ("click",function(){return n.refreshThis()}),e._uU(24),e.qZA(),e.TgZ(25,"button",11),e.NdJ("click",function(){return n.nextData()}),e.TgZ(26,"mat-icon"),e._uU(27,"arrow_forward_ios"),e.qZA()()()()(),e.TgZ(28,"div",0),e._UZ(29,"div",1),e.TgZ(30,"div",8)(31,"mat-toolbar",12)(32,"form",13)(33,"div",14)(34,"p-multiSelect",15,16),e.NdJ("onChange",function(s){return n.onFilterDropDownRole(s)}),e.qZA(),e.TgZ(36,"p-multiSelect",17),e.NdJ("onChange",function(s){return n.onFilterDropDownEmployee(s)}),e.YNc(37,Sr,2,4,"ng-template",18),e.qZA(),e.TgZ(38,"mat-label",19),e._uU(39,"From date:"),e.qZA(),e.TgZ(40,"mat-form-field",20)(41,"input",21),e.NdJ("click",function(){e.CHM(l);const s=e.MAs(43);return e.KtG(s.open())}),e.qZA(),e._UZ(42,"mat-datepicker",null,22),e.qZA(),e.TgZ(44,"mat-label",19),e._uU(45,"To date:"),e.qZA(),e.TgZ(46,"mat-form-field",20)(47,"input",23),e.NdJ("click",function(){e.CHM(l);const s=e.MAs(49);return e.KtG(s.open())}),e.qZA(),e._UZ(48,"mat-datepicker",null,24),e.qZA()()(),e.TgZ(50,"button",25),e.NdJ("click",function(){return n.applyFilter()}),e._uU(51," Apply Filter "),e.qZA()()()(),e._UZ(52,"div",26),e.TgZ(53,"div",27)(54,"div",28,29)(56,"table",30),e.ynx(57,31),e.YNc(58,Zr,2,0,"th",32),e.YNc(59,kr,3,1,"td",33),e.BQk(),e.YNc(60,Nr,3,2,"ng-container",34),e.YNc(61,qr,1,0,"tr",35),e.YNc(62,Ur,1,0,"tr",36),e.qZA()()()(),e.YNc(63,Hr,1,1,"ng-template",null,37,e.W1O),e.YNc(65,zr,2,1,"ng-template",null,38,e.W1O),e.TgZ(67,"mat-menu",39,40),e.YNc(69,Kr,2,2,"ng-template",41),e.qZA(),e.TgZ(70,"mat-menu",39,42)(72,"button",43),e.NdJ("click",function(){return n.exportData(!1)}),e._uU(73," Summary Report "),e.qZA(),e.TgZ(74,"button",43),e.NdJ("click",function(){return n.exportData(!0)}),e._uU(75," Detail Report "),e.qZA()(),e._UZ(76,"mat-menu",44,45)}if(2&a){const l=e.MAs(43),i=e.MAs(49);e.xp6(3),e.Q6J("ngModel",n.listStatusChoose),e.xp6(1),e.Q6J("ngForOf",n.listStatus),e.xp6(2),e.Q6J("ngModel",n.typeMode),e.xp6(1),e.Q6J("ngClass",e.VKq(22,bt,"List"===n.typeMode)),e.xp6(3),e.Q6J("ngClass",e.VKq(24,bt,"Grid"===n.typeMode)),e.xp6(5),e.Q6J("checked",n.isMyEmployee),e.xp6(9),e.hij(" ",n.timeModeDisplay," "),e.xp6(8),e.Q6J("formGroup",n.frmGroup),e.xp6(2),e.Q6J("options",n.listRoles)("filter",!0),e.xp6(2),e.Q6J("options",n.listEmployees)("filter",!0),e.xp6(5),e.Q6J("matDatepicker",l),e.xp6(6),e.Q6J("matDatepicker",i),e.xp6(6),e.Q6J("nbSpinner",n.isLoading),e.xp6(3),e.Q6J("dataSource",n.dataSource),e.xp6(4),e.Q6J("ngForOf",n.headerData),e.xp6(1),e.Q6J("matHeaderRowDef",n.headerData2)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",n.headerData2),e.xp6(10),e.Q6J("nbSpinner",n.btnExportState),e.xp6(2),e.Q6J("nbSpinner",n.btnExportState)}},dependencies:[T.mk,T.sg,T.O5,T.tP,T.PC,m._Y,m.Fj,m.JJ,m.JL,m.On,m.sg,m.u,u.bc,u.VP,u.YE,L.jx,F.KE,F.hX,Ie.Nt,He.Ye,Q.Hw,V.VK,V.OP,V.KA,V.p6,J.lW,ae.Mq,ae.hl,_e.gM,N.BZ,N.fO,N.as,N.w1,N.Dz,N.nj,N.ge,N.ev,N.XQ,N.Gk,Oe.A9,Oe.Yi,v.Q7R,v.BLq,v.k0$,x.xw,x.SQ,x.Wh,x.yH,ue.oO,ue.Zl,xe.Lt,$e.NU,pe.rH,mr.Ri,Cr,mt],styles:[".button-app-function[_ngcontent-%COMP%]{margin-right:10px!important;background-color:#b45cea;color:#fff}.dropdown-filter-function[_ngcontent-%COMP%]{font-size:14px;padding-bottom:0;max-height:64px}.attendance-report-mode[_ngcontent-%COMP%]{height:40px;align-items:center}table[_ngcontent-%COMP%]{width:100%}th.mat-header-cell[_ngcontent-%COMP%], td.mat-cell[_ngcontent-%COMP%]{text-align:center;border-left:.5px solid #696969;border-right:.5px solid #696969;padding:0!important;border-color:#696969}.custom-font[_ngcontent-%COMP%]{font-size:12px!important}.custom-group-header-font[_ngcontent-%COMP%]{font-size:16px;color:#fff}.example-container[_ngcontent-%COMP%]{position:relative;padding-right:17px}.example-table-container[_ngcontent-%COMP%]{position:relative;height:calc(100% - 326px);max-height:68vh;overflow:auto}.table[_ngcontent-%COMP%]{width:100%}.header-table-color[_ngcontent-%COMP%]{border-color:#696969;text-align:center;font-weight:700;color:#186598}.first-header-color[_ngcontent-%COMP%]{background-color:#307abd;border-color:#696969;text-align:center;font-weight:700}.bold-row[_ngcontent-%COMP%]{font-weight:700}.data-bold-row[_ngcontent-%COMP%]{background-color:#ededed}.tableCellFixedMonth[_ngcontent-%COMP%]{width:70px;min-width:70px}.tableCellFixedWeek[_ngcontent-%COMP%]{width:180px;min-width:180px}.tableCellFixedDay[_ngcontent-%COMP%]{width:720px;min-width:240px}.first-table-cell-fixed[_ngcontent-%COMP%]{width:180px!important;min-width:180px!important}.total-table-cell-fixed[_ngcontent-%COMP%]{width:80px;min-width:80px}.report-header-row[_ngcontent-%COMP%]{height:32px;max-height:32px}.report-row[_ngcontent-%COMP%]{height:26px;max-height:26px}.form-function-filter[_ngcontent-%COMP%]{display:flex;align-items:center;max-height:64px;margin-top:6px}[_nghost-%COMP%]  .mat-form-field-flex{padding-top:0!important}.d-none[_ngcontent-%COMP%]{display:none!important}  .mat-menu-content{padding-top:0!important;padding-bottom:0!important}.background-gradient[_ngcontent-%COMP%]{background:linear-gradient(to right,#b45cea,#ff9393)}.selected-button[_ngcontent-%COMP%]{background-color:#b45cea;color:#fff}.selected-button-type[_ngcontent-%COMP%]{background-color:#ff9393;color:#fff}[_nghost-%COMP%]     .p-dropdown{border:none}[_nghost-%COMP%]     .p-dropdown .p-icon-wrapper{display:none}[_nghost-%COMP%]     .p-dropdown .p-dropdown-items{position:fixed}[_nghost-%COMP%]     .p-dropdown .p-dropdown-trigger{width:0%}[_nghost-%COMP%]     .p-dropdown-panel .p-dropdown-items{padding:0!important;background-color:#faebd7;max-height:20%;overflow:auto}[_nghost-%COMP%]     .p-inputgroup .p-inputwrapper>.p-component{width:100%}[_nghost-%COMP%]     .p-listbox{border:none}[_nghost-%COMP%]     .p-listbox .p-listbox-list .p-listbox-item{padding:0!important}[_nghost-%COMP%]     .p-listbox .p-listbox-list .p-listbox-item .p-highlight{color:#fff!important}[_nghost-%COMP%]     .p-listbox .p-listbox-list{padding:0!important}[_nghost-%COMP%]     .p-multiselect{max-height:35px}[_nghost-%COMP%]     .p-multiselect .p-multiselect-label{max-width:170px;line-height:1}.disabledNoOfCasesDiv[_ngcontent-%COMP%]{pointer-events:none!important}"]})}return o})()},{path:"attendances",component:pt},{path:"attendance-report",component:Ri},{path:"roles",component:Ki},{path:"settings",component:pr},{path:"",redirectTo:"dashboard",pathMatch:"full"}]}];let Xr=(()=>{class o{static#e=this.\u0275fac=function(a){return new(a||o)};static#t=this.\u0275mod=e.oAB({type:o});static#n=this.\u0275inj=e.cJS({imports:[pe.Bz.forChild(jr),pe.Bz]})}return o})();var es=g(7707),ts=g(6366);let ns=(()=>{class o{static#e=this.\u0275fac=function(a){return new(a||o)};static#t=this.\u0275mod=e.oAB({type:o});static#n=this.\u0275inj=e.cJS({imports:[ts.O,es.m,T.ez,Xr,_n.forRoot({radius:60,space:-9,outerStrokeGradient:!1,outerStrokeWidth:7,outerStrokeColor:"#4882c2",innerStrokeWidth:7,innerStrokeColor:"#e7e8ea",title:"",subtitle:"Remains",animateTitle:!1,animationDuration:1e3,showUnits:!1,showBackground:!1,clockwise:!1,startFromZero:!1,lazy:!0})]})}return o})();e.B6R(Ue,function(){return[Q.Hw,J.lW,f.uh,f.xY,j.d,v.k0$,x.xw,x.SQ,x.Wh,x.yH,U.zx,lt._w,it,pt]},function(){return[de.Ek]})}}]);